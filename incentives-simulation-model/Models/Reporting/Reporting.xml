<?xml version="1.0" encoding="utf-8"?>
<CollabArchV6Model xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Name>NewCollabArchV6</Name>
  <Id>66d86062-1564-4bc0-8c53-6327aa96de65</Id>
  <Structure xsi:type="CollabArchV6Structure">
    <Id>d3198875-894f-498c-999c-ab9c7afe4122</Id>
    <Types>
      <anyType xsi:type="CollabPattern">
        <Name>Reporting</Name>
        <Id>91ea554c-e4d0-4e80-b01c-cb88b0f86bd9</Id>
        <Structure xsi:type="CollabPatternStructure">
          <Id>edeefb20-1f38-47e7-ab0d-452a9da9ac21</Id>
          <Types>
            <anyType xsi:type="Collaborator">
              <Name>Worker</Name>
              <Id>82f10d08-2324-4eef-892a-db8f75d5efbc</Id>
              <Structure xsi:type="CollaboratorStructure">
                <Id>70448334-077c-4dce-9391-389f3e0df683</Id>
                <Types>
                  <anyType xsi:type="Component">
                    <Name>Behavior</Name>
                    <Id>444f3e18-0d26-43aa-a79a-ea1ca3305010</Id>
                    <Structure xsi:type="ComponentStructure">
                      <Id>beacffc2-a5c1-4703-9418-6bb2521d3d0a</Id>
                      <Types>
                        <anyType xsi:type="Create">
                          <Name>Submit</Name>
                          <Id>2941b8d8-5654-4783-99f1-a1143ead265b</Id>
                          <Structure xsi:type="CreateStructure">
                            <Id>1d3b99dc-a2f5-4219-af3d-69e801132643</Id>
                            <Types>
                              <anyType xsi:type="Variable">
                                <Name>RefSituation</Name>
                                <Id>3145a3a8-28b4-4af8-b9ab-65b21e28c01b</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>d465e1a2-5460-4e0a-9812-0096c6d33757</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>41d815f4-1adf-412c-817a-52289d165ce4</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>76</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>1</X>
                                  <Y>-1</Y>
                                </Location>
                                <DisplayName>RefSituation</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Situation</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>NewReport</Name>
                                <Id>20ccf624-5fd9-4b4f-ade1-74be1c65e6b3</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>8687b641-5a23-4ef6-8570-9426e9dad4e7</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>1a5a755a-5b61-45f9-b955-b86ed6d18ef4</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>74</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>1</X>
                                  <Y>32</Y>
                                </Location>
                                <DisplayName>NewReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                            </Types>
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>0dde9bc3-9468-448f-8a9f-86616df1aef5</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Run</Name>
                                <String>
	if (RefSituation == null) {
		NewReport = null;
		return;
	}
	RefSituation.isReported = true;

Behavior.Worker.Reporting.TotalSubmit++;

// create Report. does not guarantee unique report, may create a duplicate
NewReport = Behavior.Worker.Reporting.Create("Report") as Report;
NewReport.createdBy = Behavior.Worker;
NewReport.createdOn = Model.Simulation.Simulator.Scheduler.Time + (Random.Uniform()/1000);
NewReport.refSituation = RefSituation;


//TODO: If we want malicious behavior, we can influence the setting of the initial estimates of the report's accuracy and importance


if (Behavior.Worker.profile == 0)
{
//worker assesses the initial importance of the report from the real severity of the situation, diverging heavily, because it is a matter of subjectivity. Value constricted to [~0..1]. Epsilon smallest positive non-zero double
NewReport.importance = Math.Min(1, Math.Max(Double.Epsilon, Random.Normal(RefSituation.severity, 0.2 * RefSituation.severity)));

//how confident can I be about the situation. Let's say that the closer I am the more accurate I could be.
double conf = 1 - distance(RefSituation.location, Behavior.Worker.location); 

//but then, again, accuracy also depends on the personality.
NewReport.accuracy = Math.Min(1, Math.Max(Double.Epsilon, Random.Normal(conf, 0.1 * conf)));
}
else // malicious
{
	NewReport.importance = RefSituation.severity &gt; 0.5 ? 0.05 : 0.95;
	NewReport.accuracy = 0.05; 
}


System.Diagnostics.Debug.Assert(NewReport.accuracy &gt;= 0 &amp;&amp; NewReport.accuracy &lt;= 1, "NewReport.accuracy violated", "NewReport.accuracy violated"); 


}//to close the method


public double distance(double A, double B, bool worldContinuous = false) 
{
	if (!worldContinuous) 
		return Math.Abs(B - A);
	else
		return 1 - Math.Abs(B - A);
}
//keep this line last</String>
                              </Instruction>
                              <Instruction>
                                <Name>Duration</Name>
                                <String>return 0;
</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>94</Width>
                            <Height>51</Height>
                          </Size>
                          <Location>
                            <X>125</X>
                            <Y>28</Y>
                          </Location>
                          <DisplayName>Submit</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>-1</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                            <CornerRounding>5</CornerRounding>
                            <Alignment>MiddleCenter</Alignment>
                          </ShapeProperties>
                        </anyType>
                        <anyType xsi:type="Update">
                          <Name>Improve</Name>
                          <Id>7338ef4f-f6d3-4aa1-88a1-923165bf375f</Id>
                          <Structure xsi:type="UpdateStructure">
                            <Id>fc6d6103-18cc-475b-a5a0-6b6013a09672</Id>
                            <Types>
                              <anyType xsi:type="Variable">
                                <Name>RefReport</Name>
                                <Id>564ca061-4965-4d2a-995c-1cdb1a17061b</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>e6aa810f-0c05-4776-a783-e666e273b6c4</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>be68cc8e-3563-4a75-a1dd-1f16821703e2</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>5</X>
                                  <Y>-1</Y>
                                </Location>
                                <DisplayName>RefReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                            </Types>
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>d77935e2-b705-4d57-a36f-f14a2c18fa50</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Run</Name>
                                <String>//ImprovementImpact should be limited to [-maxReportImprovementImpact, maxReportImprovementImpact]
//double maxReportImprovementImpact = 0.2; //@SIMPARAM. Let it keep within [0..0,3]

Simulation.ReportingContext.ReportContext.UpdateInfo newUpdateInfo = RefReport.Create("UpdateInfo") as Simulation.ReportingContext.ReportContext.UpdateInfo;

newUpdateInfo.ImprovedBy = Behavior.Worker;

Behavior.Worker.Reporting.TotalImprove++;

if (Behavior.Worker.profile == 0)
{
//[-maxReportImprovementImpact ..maxReportImprovementImpact] 
//but make positive improvements more frequent than negative
newUpdateInfo.ImprovementImpact = Behavior.Worker.maxReportImprovementImpact * (1 - 1.5 * Random.Uniform()); 
}
else //malicious
{
	// if importance is high, we want to reduce accuracy to cause costs, if the importance is low then we want to rais accuracy to trigger processing and cause cost on low important report
	newUpdateInfo.ImprovementImpact = RefReport.importance &gt; 0.5 ? -1*Behavior.Worker.maxReportImprovementImpact : Behavior.Worker.maxReportImprovementImpact; 
}</String>
                              </Instruction>
                              <Instruction>
                                <Name>Duration</Name>
                                <String>return 0;
</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>76</Width>
                            <Height>50</Height>
                          </Size>
                          <Location>
                            <X>106</X>
                            <Y>99</Y>
                          </Location>
                          <DisplayName>Improve</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>-1</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                            <CornerRounding>5</CornerRounding>
                            <Alignment>MiddleCenter</Alignment>
                          </ShapeProperties>
                        </anyType>
                        <anyType xsi:type="Create">
                          <Name>ReportDuplicate</Name>
                          <Id>4f5f4a2d-e7cb-4bb8-a460-f50029c3f1e0</Id>
                          <Structure xsi:type="CreateStructure">
                            <Id>296c8d06-f280-4fb7-a0ef-bfcfc5d62793</Id>
                            <Types>
                              <anyType xsi:type="Variable">
                                <Name>ActiveReport</Name>
                                <Id>1eb3f186-9479-4a8e-a855-b979f7805027</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>4e5fcaf8-6d56-4702-a0bd-f239e76596da</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>a1396b9d-fe80-4aa9-b2c3-59b37396fb09</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>3</X>
                                  <Y>3</Y>
                                </Location>
                                <DisplayName>ActiveReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>OriginalReport</Name>
                                <Id>7ed3fdc4-45d2-4efb-9da4-0ff9ec82b172</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>b7f9d5bf-963e-4d1c-b32b-abd916a848ce</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>a487ef1a-7b36-4438-bb51-fc55a5edd08a</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>3</X>
                                  <Y>44</Y>
                                </Location>
                                <DisplayName>OriginalReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>newDup</Name>
                                <Id>5faedbc2-cc62-412c-9402-71188c67c691</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>6f0a2cf6-158a-41f7-bec9-5d8ac6f5ab39</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>0d50ba91-9e23-404e-b2e9-8dda0c2e1d3a</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>88</X>
                                  <Y>24</Y>
                                </Location>
                                <DisplayName>newDup</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Simulation.ReportingContext.DuplicatesContext.DuplicateInfo</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                            </Types>
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>f0f60e86-23cc-4949-915c-a278ec972e19</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Run</Name>
                                <String>
Behavior.Worker.Reporting.TotalDuplicate++;
//setting newDup to non-null will trigger the transition to Duplicates.Added

Duplicates dups = Behavior.DuplicatesConn;

//local hidden variable. 
newDup = dups.Create("DuplicateInfo") as Simulation.ReportingContext.DuplicatesContext.DuplicateInfo; 

newDup.ReportOrig = OriginalReport;
newDup.ReportDupl = ActiveReport;
newDup.detectedBy = Behavior.Worker;

</String>
                              </Instruction>
                              <Instruction>
                                <Name>Duration</Name>
                                <String>return 0;
</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>101</Width>
                            <Height>68</Height>
                          </Size>
                          <Location>
                            <X>62</X>
                            <Y>233</Y>
                          </Location>
                          <DisplayName>ReportDuplicate</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>-1</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                            <CornerRounding>5</CornerRounding>
                            <Alignment>MiddleCenter</Alignment>
                          </ShapeProperties>
                        </anyType>
                        <anyType xsi:type="Create">
                          <Name>Rate</Name>
                          <Id>24e394ca-a8b3-4f57-878b-385e9ed08c91</Id>
                          <Structure xsi:type="CreateStructure">
                            <Id>7ca8e1c0-8a97-4084-8d0c-c942b0afda0b</Id>
                            <Types>
                              <anyType xsi:type="Variable">
                                <Name>RefReport</Name>
                                <Id>60e2ae85-0cd2-4612-ab8c-592f4b1a09a4</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>86da2288-91a5-452e-a860-f17e3077d56e</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>94395748-f188-4197-ad16-a0e0f25923ab</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>4</X>
                                  <Y>-3</Y>
                                </Location>
                                <DisplayName>RefReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                            </Types>
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>e7e1ac28-10ec-4daa-861f-0c24f5349b50</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Run</Name>
                                <String>//int ratingBehavior = 2; //@SIMPARAM 0 - uniform, 1 - according to severity, 2 - extremum-biased

// rate according to importance but with some deviation (assume that on average people rank report according to true underlying importance)
Simulation.ReportingContext.ReportContext.RatingInfo newRate = RefReport.Create("RatingInfo") as Simulation.ReportingContext.ReportContext.RatingInfo;
newRate.RatedBy = Behavior.Worker;

Behavior.Worker.Reporting.TotalRate++;

if (Behavior.Worker.profile == 0)
{
switch (Behavior.Worker.ratingBehavior)
{
	case 0: //uniform
		newRate.RatingValue = Random.Uniform();
		break;
	case 1: //according to severity
		int dev = (int)Math.Round((Random.Uniform()*0.4)-0.2);
		newRate.RatingValue = Math.Min(1, Math.Max(0, dev + RefReport.refSituation.severity));	
		break;
	case 2: //extremum-biased
	default:
		//In practice, people tend to bias towards an extreme. So either 1 star, or 5 stars, or in our case 0 or 1. 
		double rating = 0.5;
		if (RefReport.refSituation.severity &gt; 0.5)
		{
			do
			{
				rating = 1 - Random.Normal(0.5, 0.8*0.5);
			}
			while (rating &lt; 0.5);
		} 
		else
		{
			do
			{
				rating = 1 - Random.Normal(0.5, 0.8*0.5);
			}
			while (rating &gt; 0.5);
		}
		newRate.RatingValue = rating;
		break;
}
}
else //malicious
{
	//if accuracy is high then we provide a low rating to avoid it being processed, otherwise cause it to reach threshold and produce cost through current low accuracy
	newRate.RatingValue = RefReport.accuracy &gt; 0.5 ? 0.05 : 0.95;
}


</String>
                              </Instruction>
                              <Instruction>
                                <Name>Duration</Name>
                                <String>return 0;
</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>75</Width>
                            <Height>46</Height>
                          </Size>
                          <Location>
                            <X>92</X>
                            <Y>172</Y>
                          </Location>
                          <DisplayName>Rate</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>-1</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                            <CornerRounding>5</CornerRounding>
                            <Alignment>MiddleCenter</Alignment>
                          </ShapeProperties>
                        </anyType>
                        <anyType xsi:type="Work">
                          <Name>Idle</Name>
                          <Id>8a32822d-2634-478f-889b-88e2de72bff5</Id>
                          <Structure xsi:type="WorkStructure">
                            <Id>5875eea8-ec41-47a0-8d9f-ba40726f57d0</Id>
                            <Types>
                              <anyType xsi:type="Variable">
                                <Name>idleTime</Name>
                                <Id>5415d236-fa48-4087-b7e0-e5ea64b6619e</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>ccafe424-4f02-4721-aa25-d9c7b1d340e1</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>8764bd58-10fe-488b-a956-6acb89a29569</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>54</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>7</X>
                                  <Y>117</Y>
                                </Location>
                                <DisplayName>idleTime</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>double</ImplementationType>
                                <InitialValue>0.0</InitialValue>
                              </anyType>
                            </Types>
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>68affeb1-3694-404f-a3a0-cb5b03075992</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Run</Name>
                                <String>Behavior.Worker.isIdling = false;</String>
                              </Instruction>
                              <Instruction>
                                <Name>Duration</Name>
                                <String>return 0.1+idleTime+(Random.Uniform()/10);
</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>72</Width>
                            <Height>144</Height>
                          </Size>
                          <Location>
                            <X>5</X>
                            <Y>62</Y>
                          </Location>
                          <DisplayName>Idle</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderStyle>Dot</BorderStyle>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>-1</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                            <CornerRounding>5</CornerRounding>
                            <Alignment>MiddleCenter</Alignment>
                          </ShapeProperties>
                        </anyType>
                        <anyType xsi:type="CollabSequence">
                          <Name>NewCollabSequence7</Name>
                          <Id>92b6e524-aa84-42af-ab9f-eda03541c835</Id>
                          <Structure xsi:type="CollabSequenceStructure">
                            <Id>e1a82dd2-7d25-4458-aef2-5c2d3b1ea7f8</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>47e94548-44ba-458d-b66a-b13dda87c4d2</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Trigger</Name>
                                <String>return  true;
</String>
                              </Instruction>
                              <Instruction>
                                <Name>Transfer</Name>
                                <String>Idle.idleTime = Submit.Behavior.Worker.submitDuration; //@SIMPARAM
Idle.Behavior.Worker.isIdling = true;</String>
                              </Instruction>
                              <Instruction>
                                <Name>Resolve</Name>
                                <String>return Context;</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>48</Width>
                            <Height>9</Height>
                          </Size>
                          <Location>
                            <X>77</X>
                            <Y>53</Y>
                          </Location>
                          <DisplayName>NewCollabSequence7</DisplayName>
                          <ShowName>false</ShowName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <LineProperties>
                            <LineWidth>2</LineWidth>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <BorderWidth>0</BorderWidth>
                            <FillColor>
                              <Argb>-16777216</Argb>
                            </FillColor>
                            <Role1>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Offset>
                                <X>0</X>
                                <Y>25</Y>
                              </Offset>
                            </Role1>
                            <Role2>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Icon>..\..\Icons\triangle.gif</Icon>
                              <Offset>
                                <X>72</X>
                                <Y>0</Y>
                              </Offset>
                            </Role2>
                          </LineProperties>
                          <Role1Id>2941b8d8-5654-4783-99f1-a1143ead265b</Role1Id>
                          <Role2Id>8a32822d-2634-478f-889b-88e2de72bff5</Role2Id>
                        </anyType>
                        <anyType xsi:type="CollabSequence">
                          <Name>NewCollabSequence9</Name>
                          <Id>2ea35d6a-2f20-4e8b-8416-14b63bc11fe6</Id>
                          <Structure xsi:type="CollabSequenceStructure">
                            <Id>dabf0eab-ff48-4efc-babb-91dada841698</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>066f88e4-589d-4e84-a7bb-f067b6a23ca3</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Trigger</Name>
                                <String>return true;
</String>
                              </Instruction>
                              <Instruction>
                                <Name>Transfer</Name>
                                <String>Idle.idleTime = Improve.Behavior.Worker.improveDuration; //@SIMPARAM
Idle.Behavior.Worker.isIdling = true;</String>
                              </Instruction>
                              <Instruction>
                                <Name>Resolve</Name>
                                <String>return Context;</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>29</Width>
                            <Height>4</Height>
                          </Size>
                          <Location>
                            <X>77</X>
                            <Y>124</Y>
                          </Location>
                          <DisplayName>NewCollabSequence9</DisplayName>
                          <ShowName>false</ShowName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <LineProperties>
                            <LineWidth>2</LineWidth>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <BorderWidth>0</BorderWidth>
                            <FillColor>
                              <Argb>-16777216</Argb>
                            </FillColor>
                            <Role1>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Offset>
                                <X>0</X>
                                <Y>25</Y>
                              </Offset>
                            </Role1>
                            <Role2>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Icon>..\..\Icons\triangle.gif</Icon>
                              <Offset>
                                <X>72</X>
                                <Y>66</Y>
                              </Offset>
                            </Role2>
                          </LineProperties>
                          <Role1Id>7338ef4f-f6d3-4aa1-88a1-923165bf375f</Role1Id>
                          <Role2Id>8a32822d-2634-478f-889b-88e2de72bff5</Role2Id>
                        </anyType>
                        <anyType xsi:type="CollabSequence">
                          <Name>NewCollabSequence10</Name>
                          <Id>8f40b6cf-033f-49de-9ab2-256b033aaf03</Id>
                          <Structure xsi:type="CollabSequenceStructure">
                            <Id>1cfef69f-603b-441c-bab6-1a2ebf358481</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>238df704-b7c7-4433-b6e9-ea77f6bd788f</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Trigger</Name>
                                <String>return true;
</String>
                              </Instruction>
                              <Instruction>
                                <Name>Transfer</Name>
                                <String>Idle.idleTime = Rate.Behavior.Worker.rateDuration; //@SIMPARAM
Idle.Behavior.Worker.isIdling = true;</String>
                              </Instruction>
                              <Instruction>
                                <Name>Resolve</Name>
                                <String>return Context;</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>15</Width>
                            <Height>11</Height>
                          </Size>
                          <Location>
                            <X>77</X>
                            <Y>189</Y>
                          </Location>
                          <DisplayName>NewCollabSequence10</DisplayName>
                          <ShowName>false</ShowName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <LineProperties>
                            <LineWidth>2</LineWidth>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <BorderWidth>0</BorderWidth>
                            <FillColor>
                              <Argb>-16777216</Argb>
                            </FillColor>
                            <Role1>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Offset>
                                <X>0</X>
                                <Y>28</Y>
                              </Offset>
                            </Role1>
                            <Role2>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Icon>..\..\Icons\triangle.gif</Icon>
                              <Offset>
                                <X>72</X>
                                <Y>127</Y>
                              </Offset>
                            </Role2>
                          </LineProperties>
                          <Role1Id>24e394ca-a8b3-4f57-878b-385e9ed08c91</Role1Id>
                          <Role2Id>8a32822d-2634-478f-889b-88e2de72bff5</Role2Id>
                        </anyType>
                        <anyType xsi:type="CollabSequence">
                          <Name>NewCollabSequence11</Name>
                          <Id>13e67c11-7e64-4de8-bd73-52d7e4fdf9ff</Id>
                          <Structure xsi:type="CollabSequenceStructure">
                            <Id>45957f0a-4da0-4961-9e73-c4edf7c65fa3</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>8c0c5c87-818f-475d-acab-46f2c126dea6</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Trigger</Name>
                                <String>return true;
</String>
                              </Instruction>
                              <Instruction>
                                <Name>Transfer</Name>
                                <String>Idle.idleTime = ReportDuplicate.Behavior.Worker.duplicateReportDuration; //@SIMPARAM;
Idle.Behavior.Worker.isIdling = true;</String>
                              </Instruction>
                              <Instruction>
                                <Name>Resolve</Name>
                                <String>return Context;</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>4</Width>
                            <Height>27</Height>
                          </Size>
                          <Location>
                            <X>58</X>
                            <Y>206</Y>
                          </Location>
                          <DisplayName>NewCollabSequence11</DisplayName>
                          <ShowName>false</ShowName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <LineProperties>
                            <LineWidth>2</LineWidth>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <BorderWidth>0</BorderWidth>
                            <FillColor>
                              <Argb>-16777216</Argb>
                            </FillColor>
                            <Role1>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Offset>
                                <X>0</X>
                                <Y>0</Y>
                              </Offset>
                            </Role1>
                            <Role2>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Icon>..\..\Icons\triangle.gif</Icon>
                              <Offset>
                                <X>53</X>
                                <Y>144</Y>
                              </Offset>
                            </Role2>
                          </LineProperties>
                          <Role1Id>4f5f4a2d-e7cb-4bb8-a460-f50029c3f1e0</Role1Id>
                          <Role2Id>8a32822d-2634-478f-889b-88e2de72bff5</Role2Id>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>6388bf73-473c-4180-8f9a-6283ff2ae0d3</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Startup</Name>
                          <String>DuplicatesConnLink = Worker.Reporting.Create("DuplicatesConn") as DuplicatesConn;
DuplicatesConn = Worker.Reporting.DuplicatesList[0];

</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>232</Width>
                      <Height>308</Height>
                    </Size>
                    <Location>
                      <X>12</X>
                      <Y>16</Y>
                    </Location>
                    <DisplayName>Behavior</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Bold</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <BorderWidth>3</BorderWidth>
                      <FillColor>
                        <Argb>-21</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>TopCenter</Alignment>
                    </ShapeProperties>
                    <CreateP>0.1</CreateP>
                    <ReadP>0.3</ReadP>
                  </anyType>
                  <anyType xsi:type="Component">
                    <Name>ActionSelector</Name>
                    <Id>96151e7e-9cf1-42c2-9934-fe1de80fe454</Id>
                    <Structure xsi:type="ComponentStructure">
                      <Id>bdd9c99b-3389-42fb-b8c8-5135ec32867a</Id>
                      <Types>
                        <anyType xsi:type="DataTransfer">
                          <Name>nextActionType</Name>
                          <Id>1e33bd1d-2f27-4bb7-93f4-5b70cf30997b</Id>
                          <Structure xsi:type="DataTransferStructure">
                            <Id>d465b972-c0f9-4d9e-ab4e-0c238e2ef1b4</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>a73ec8cd-1694-4a40-b6a4-7bcb2d4bcfcd</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>89</Width>
                            <Height>25</Height>
                          </Size>
                          <Location>
                            <X>6</X>
                            <Y>153</Y>
                          </Location>
                          <DisplayName>nextActionType</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderStyle>Dash</BorderStyle>
                            <BorderColor>
                              <Argb>-16776961</Argb>
                            </BorderColor>
                            <BorderWidth>2</BorderWidth>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>int</ImplementationType>
                          <InitialValue>0</InitialValue>
                        </anyType>
                        <anyType xsi:type="Read">
                          <Name>SetNextStep</Name>
                          <Id>d7a16cac-2655-4fe5-9baf-78cb3f7f6b67</Id>
                          <Structure xsi:type="ReadStructure">
                            <Id>eac81102-d851-4640-b69c-47120f363390</Id>
                            <Types>
                              <anyType xsi:type="Variable">
                                <Name>ActiveReport</Name>
                                <Id>ba9832c6-ee8c-4fb0-adf0-e941f26165bf</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>9bb7c2b0-daad-45cb-9226-77ee8c8df0e8</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>9f272fe2-ebc3-47ee-990d-f8d4a7b90ddd</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>11</X>
                                  <Y>10</Y>
                                </Location>
                                <DisplayName>ActiveReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>OriginalReport</Name>
                                <Id>866f5702-b681-491c-a46e-e0833428979a</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>a02acd23-e37c-4ba2-8865-fe30027fe7cb</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>ab1a50a5-a25a-4424-a2a8-4f532d716a8b</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>11</X>
                                  <Y>30</Y>
                                </Location>
                                <DisplayName>OriginalReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>ActiveSituation</Name>
                                <Id>e31dca57-bc6d-41bd-ad08-943cdea67568</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>5548fe7e-f1ce-4f65-a390-6f39d824dbb5</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>e10833b3-284a-454d-a088-3ff0c5771e62</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>18</X>
                                  <Y>72</Y>
                                </Location>
                                <DisplayName>ActiveSituation</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Situation</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                            </Types>
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>afc73058-f0fd-4bb2-9a3d-d6f936b9d8ee</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Run</Name>
                                <String>ActionSelector.nextActionType = 0; // go to idle by default

bool previousReportFinishedBeingProcessed = 
ActionSelector.Worker.Reporting.endedInIncentivize &amp;&amp;
ActionSelector.Worker.Reporting.endedInFinalize &amp;&amp;
ActionSelector.Worker.Reporting.endedInCalculate;

if (ActionSelector.Worker.banned) return;

if (!previousReportFinishedBeingProcessed)
{
	//TODO: adjust duration of idle state if necessary
	return; //go to idle		
}
else
{
	ActionSelector.Worker.Reporting.endedInIncentivize = false;
	ActionSelector.Worker.Reporting.endedInFinalize = false;
	ActionSelector.Worker.Reporting.endedInCalculate = false;
	//now we can start with a new action, because we are sure the last action completed
	//and we won;t have tasks in queue any more
}

ActiveSituation = null; //output
ActiveReport = null; //output
OriginalReport = null; //output

HashSet&lt;Report&gt; selectedReports = new HashSet&lt;Report&gt;();
List&lt;Tuple&lt;object, double&gt;&gt; reportsToConsider = new List&lt;Tuple&lt;object, double&gt;&gt;();

// ##### submitting and reporting duplicate part #####

/* as Worker cannot know in advance that he will encounter a situation to report
 * we will model that he encounters a situation with a fixed probability - CreateP.
 * Which situation he encounters? Those closer to him with higher probability. 
 * However, whether he will actually decide to report it depends on his personality. 
 * The cost in this case is fixed and same for each Worker
 * because when he already encountered the situation, the cost is equal to the time spent to submit
 * a report. And that is something that should be similar for everyone. It depends only on Worker's
 * personality whether he submits or not (normal  distr). Because for
 * submitting a report he gets points in any case, so there's no point calculating the utility.
 * Of course, as we agreed, we can prevent him from submitting , as part of an incentive mech.
 * bt we still need to decide where we implement that
 */
 
//as the worker approaches the probability that he will be non-idle grows
double prob1 = 0.6 * ActionSelector.Worker.probSubmitOrDuplicate + 0.4 * ActionSelector.Worker.probSubmitOrDuplicate * Math.Max(1, 1 - (ActionSelector.Worker.pointQuota - ActionSelector.Worker.points) / ActionSelector.Worker.pointQuota);
int i = 0;

if ( Random.Uniform() &lt;= prob1 &amp;&amp; ActionSelector.Worker.Reporting.SituationList.Count &gt; 0 &amp;&amp;
		(toConsiderAction((ProfileType)ActionSelector.Worker.profile, ActionType.Submit) || 
		 toConsiderAction((ProfileType)ActionSelector.Worker.profile, ActionType.ReportDuplicate)
		) 
   ) 
{
	List&lt;Tuple&lt;object, double&gt;&gt; situationsToConsider = new List&lt;Tuple&lt;object, double&gt;&gt;();
	foreach (Situation s in ActionSelector.Worker.Reporting.SituationList)
	{	
		if (s.isProcessed) continue;
		double dst = distance(ActionSelector.Worker.location, s.location);
		if (dst &gt; ActionSelector.Worker.tooFarAway) continue; //too far away. We may want to change this later on.	
		situationsToConsider.Add(new Tuple&lt;object,double&gt;((object) s, 1 - dst));
		i++;
	}
	
	if (i &gt; 0) //if any situation to consider
	{	
		ActiveSituation = (Situation) selectMostProbable(situationsToConsider); //this is the situation we have to check. The worker in real cannot read the .isProcessed
		double activeLocation = ActiveSituation.location;

		//the higher the karma, the more likely we generate a positive value. We assume that peope with higher karma will be more likely to check for duplicates
		double probToCheckForDuplicates = Random.Normal(0 + 0.5 * ActionSelector.Worker.Karma, 0.25); 
		if (ActionSelector.Worker.profile == 2) // malicious
		{
			probToCheckForDuplicates = 0;
		}
		if (probToCheckForDuplicates &gt; 0) //check if it is a duplicate, and report a duplicate.
		{ 
			
			HashSet&lt;Report&gt; L1 = new HashSet&lt;Report&gt;();
			HashSet&lt;Report&gt; L2 = new HashSet&lt;Report&gt;();
			
			//now pick up to N still unresolved reports 'close' to activeLocation into list L1
			int j = 0;
			foreach (Report r in ActionSelector.Worker.Reporting.ReportList)
			{	
				if (r.isProcessed ) continue;
				reportsToConsider.Add(new Tuple&lt;object,double&gt;((object) r, 1 - distance(activeLocation, r.refSituation.location)));
				j++;
			}
			for (j = 0; j &lt; ActionSelector.Worker.numberOfReportsToEvaluateForDuplicateChecking; j++)
			{
				Report selRep = (Report) selectMostProbable(reportsToConsider);
				
				// the selectMostProbable may return multiple times the same Report, but HashSet will not allow duplicates.
				if (selRep != null &amp;&amp; !selRep.isProcessed) L1.Add(selRep); 
			}
			
			//now pick up to N other reports 'close' to activeLocation in list L2
			for (j = 0; j &lt; ActionSelector.Worker.numberOfReportsToEvaluateForDuplicateChecking; j++)
			{
				Report selRep = (Report) selectMostProbable(reportsToConsider);
				
				// the selectMostProbable may return multiple times the same Report, but HashSet will not allow duplicates.
				if (selRep != null ) L2.Add(selRep); 
			}

				
			//do the pairwise comparisons of elements from L1 and L2, and check if they point to the same situation. 
			//TODO: Later on make sure we can create malicious duplicate reports.
			foreach (Report rL1 in L1)
			{
				foreach (Report rL2 in L2) 
				{
					if (rL1 != rL2 &amp;&amp; rL1.refSituation == ActiveSituation &amp;&amp; rL2.refSituation == ActiveSituation)
					{	
						Report newerRep = (rL1.createdOn &gt; rL2.createdOn) ? rL1 : rL2;
						Report olderRep = (rL1.createdOn &gt; rL2.createdOn) ? rL2 : rL1;
						
						//pass the newer as ActiveReport, and older as OriginalReport into the ReportDuplicate action, and the situation, and return.
						OriginalReport = olderRep;
						ActiveReport = newerRep;
		System.Diagnostics.Debug.Assert(ActiveReport != null, "ActiveReport NULL", "ActiveReport NULL"); 
		System.Diagnostics.Debug.Assert(OriginalReport != null, "OriginalReport NULL", "OriginalReport NULL");

						//if a DuplicateInfo connecting same Reports already exists, just return.
//In reality the tool for submission wouldn't allow this either, and this is how we later avoid creation of a multigraph
//and make sure that only one Report is the root of the tree/graph
						foreach (Simulation.ReportingContext.DuplicatesContext.DuplicateInfo di in 												ActionSelector.Worker.Reporting.DuplicatesList[0].DuplicateInfoList)
						{
							if ( 	(di.ReportOrig == OriginalReport &amp;&amp; di.ReportDupl == ActiveReport)
								 || (di.ReportOrig == ActiveReport &amp;&amp; di.ReportDupl == OriginalReport)
							   )
							{
								ActionSelector.nextActionType = (int) ActionType.Idle;
								reactivateTerminationFlags();
								return;
							}
						}
						ActionSelector.nextActionType = (int) ActionType.ReportDuplicate;
						return;						
					}					
				}
			}						
		}
		//If we did not return already, this means that we didn't find any duplicates in this attempt, or didn't want to bother looking for duplicates. 
		//So, submit a new report, even though it may happen that another report about this situation already exists.
		ActionSelector.nextActionType = (int) ActionType.Submit; 
		return;
	} 
	else
	{
		ActionSelector.nextActionType = (int) ActionType.Idle;
		reactivateTerminationFlags();
		return;
	}
	
	
}

if (
	!toConsiderAction((ProfileType)ActionSelector.Worker.profile, ActionType.Improve) ||
	!toConsiderAction((ProfileType)ActionSelector.Worker.profile, ActionType.Rate)
   )
{
	ActionSelector.nextActionType = (int) ActionType.Idle;
	reactivateTerminationFlags();
	return;
}




// ##### improve and rating part #####

//as the worker approaches the probability that he will be non-idle grows
double prob2 = 0.6 * ActionSelector.Worker.probImproveOrRate + 0.4 * ActionSelector.Worker.probImproveOrRate * Math.Max(0, Math.Abs(1 - (ActionSelector.Worker.pointQuota - ActionSelector.Worker.points) / ActionSelector.Worker.pointQuota));

if (Random.Uniform() &lt;= prob2) 
{
	ActionSelector.nextActionType = (int) ActionType.Idle; // go to idle
	reactivateTerminationFlags();
	return;
}

double currentMaxUtil = Double.MinValue; //cause utility may be negative, depending on how we set model/simulation params
int totalReports = ActionSelector.Worker.Reporting.ReportList.Count;	
if (totalReports == 0) 
{
	reactivateTerminationFlags();
	return;
}

selectedReports = new HashSet&lt;Report&gt;();
reportsToConsider = new List&lt;Tuple&lt;object, double&gt;&gt;();

List&lt;Tuple&lt;Report, double&gt;&gt; ActionCosts_Improve = new List&lt;Tuple&lt;Report, double&gt;&gt;();
List&lt;Tuple&lt;Report, double&gt;&gt; ActionCosts_Rate = new List&lt;Tuple&lt;Report, double&gt;&gt;();
List&lt;Tuple&lt;Report, double&gt;&gt; ActionBenefits_Improve = new List&lt;Tuple&lt;Report, double&gt;&gt;();
List&lt;Tuple&lt;Report, double&gt;&gt; ActionBenefits_Rate = new List&lt;Tuple&lt;Report, double&gt;&gt;();
List&lt;Tuple&lt;object, double, ActionType&gt;&gt; ActionUtilities = new List&lt;Tuple&lt;object, double, ActionType&gt;&gt;();


i = 0;
int repeats = Math.Max(ActionSelector.Worker.numberOfReportsToEvaluate, totalReports);
for (int j = 0; j &lt; repeats; j++)
{
	//go through all the reports we haven't considered yet
	foreach (Report r in ActionSelector.Worker.Reporting.ReportList)
	{	
		if (r.isProcessed || r.isDuplicate || selectedReports.Contains(r)) continue;
	
		//we may want to add a condition involving a distance threshold later on
		reportsToConsider.Add(new Tuple&lt;object,double&gt;((object) r, 1 - distance(ActionSelector.Worker.location, r.refSituation.location)));
		i++;
	}
	Report selRep = (Report) selectMostProbable(reportsToConsider);
	
	// the selectMostProbable may return multiple times the same Report, but HashSet will not allow duplicates.
	if (selRep != null) selectedReports.Add(selRep); 
}
// We may have ended up with as little as zero reports in the selectedReports set here.
if (selectedReports.Count == 0) 
{
	ActionSelector.nextActionType = (int) ActionType.Idle; // go to idle
	reactivateTerminationFlags();
}
else
{
	//calculate utility for each action for each of the reports in the selectedReports, and choose the highest one.
	foreach (Report r in selectedReports)
	{	//calculate possible costs
		ActionCosts_Improve.Add(new Tuple&lt;Report, double&gt;(r, costOfAction(ActionType.Improve, r)));
		ActionCosts_Rate.Add(new Tuple&lt;Report, double&gt;( r, costOfAction(ActionType.Rate, r)));
		//calculate possible benefits						
		ActionBenefits_Improve.Add(new Tuple&lt;Report,double&gt;( r, benefitOfAction(ActionType.Improve, r)));
		ActionBenefits_Rate.Add(new Tuple&lt;Report,double&gt;( r, benefitOfAction(ActionType.Rate, r)));
	}
	int k = 0;
	foreach (Tuple&lt;Report, double&gt; bnft in ActionBenefits_Improve)
	{	//this is now the utility, i.e. benefit minus the cost. The bigger, the better.
		ActionUtilities.Add(new Tuple&lt;object, double, ActionType&gt;((object) bnft.Item1, bnft.Item2 - ActionCosts_Improve[k++].Item2, ActionType.Improve));
	}
	
	k = 0;
	foreach (Tuple&lt;Report, double&gt; bnft in ActionBenefits_Rate)
	{
		if(!toConsiderAction((ProfileType)ActionSelector.Worker.profile, ActionType.Rate))
		{
			//if rating is not allowed, set all the rating utilities to smallest value
			ActionUtilities.Add(new Tuple&lt;object, double, ActionType&gt;((object) bnft.Item1, Double.MinValue, ActionType.Rate));
		}
		else
		{
			//this is now the utility, i.e. benefit minus the cost. The bigger, the better.
			ActionUtilities.Add(new Tuple&lt;object, double, ActionType&gt;((object) bnft.Item1, bnft.Item2 - ActionCosts_Rate[k++].Item2, ActionType.Rate));
		}
	}
	
	//now find the action with the highest utility among all actions.
	
	//check what pays most. item1-Report/Situation, item2-utility, item3-action
	foreach (Tuple&lt;object, double, ActionType&gt; util in ActionUtilities)
	{
		if (util.Item2 &gt; currentMaxUtil) 
		{
			currentMaxUtil = util.Item2;
			ActiveReport = (Report)util.Item1;
			ActionSelector.nextActionType = (int) util.Item3;
		}
	}
	
}


} //uncomment the curly bracket when pasting into model, to close the body of the run method.

/*************** allow other actors to run *************/
public void reactivateTerminationFlags()
{
	// if we claimed the termination flags but don't end up executing any action (i.e., just idle), allow other actors to run by reseting/reactivating the termination flags
	ActionSelector.Worker.Reporting.endedInIncentivize = true;
	ActionSelector.Worker.Reporting.endedInFinalize = true;
	ActionSelector.Worker.Reporting.endedInCalculate = true;
}

/************ Cost metrics *****************/
public double costOfAction(ActionType action, Report r)
{
	switch (action)
	{
		case ActionType.Improve:
			return ActionSelector.Worker.baseCostImprove * distance(r.refSituation.location, ActionSelector.Worker.location);
		case ActionType.Rate:
			return ActionSelector.Worker.baseCostRate * distance(r.refSituation.location, ActionSelector.Worker.location);
		default:
			return 0.0;
	}
}

/********** Benefit metrics ***************/
public double benefitOfAction(ActionType action, Report r)
{ 
	//TODO: if we want malicious behavior here we need to implement it for Improve/rate actions
	//we can introduce a simulation parameter of probability for a certain malicious behavior, 
	//and in case we are below that threshold, the 'real' benefits should be overridden by the
	//malicious values.
	switch (action)
	{
		case ActionType.Improve:
			double improvingCoeff = 1.0;
			foreach (Simulation.ReportingContext.ReportContext.UpdateInfo rinf in r.UpdateInfoList)
			{
				if (rinf.ImprovedBy == ActionSelector.Worker) improvingCoeff /= 2.0; //the more I improve, the less benefit I obtain
			}
			return ActionSelector.B_base_improve * improvingCoeff * r.improvementReward; 
		case ActionType.Rate:
			double ratingCoeff = 1.0;
			foreach (Simulation.ReportingContext.ReportContext.RatingInfo rinf in r.RatingInfoList)
			{
				if (rinf.RatedBy == ActionSelector.Worker) ratingCoeff = 0.0; //if I raed before, then wont have any benefit to do it again
			}
			return ActionSelector.B_base_rate * ratingCoeff * r.ratingReward; 
		default:
			return 0.0;
	}
}



//will define later. This is the most primitive variant. We can use personality profiles to influence the behavior of workers, such as malicious, lazy, etc.
public enum ProfileType
{
	None, // = 0, default
	PreventedToRate, // = 1
	Malicious // =2
}

public enum ActionType
{
	Idle, Submit, Improve, Rate, ReportDuplicate
}
public double distance(double A, double B, bool worldContinuous = false) 
{
	if (!worldContinuous) 
		return Math.Abs(B - A);
	else
		return 1 - Math.Abs(B - A);
}

public bool toConsiderAction(ProfileType profile, ActionType action )
{
	if (profile == ProfileType.PreventedToRate &amp;&amp; action == ActionType.Rate) return false;
	return true; 
}

public object selectMostProbable(List&lt;Tuple&lt;object,double&gt;&gt; ListOfchoices) {
	
	if (ListOfchoices.Count == 0) return null;
	
    double[] choices = new double[ListOfchoices.Count];
	double sum = 0.0;
    for (int i = 0; i &lt; ListOfchoices.Count; i++) 
    {
	double value = ListOfchoices[i].Item2;
	if (value &lt; 0.0) value = 0.0; 			
      choices[i]= value; 
	sum += value;
    }

     double p =  Random.Uniform();
    double cumulProb = 0.0;

    for (int i = 0; i &lt; choices.Length; i++) 
	{
        if (choices[i] == 0.0) continue;
        cumulProb += choices[i] / sum;
        if (p &lt;= cumulProb) return ListOfchoices[i].Item1;
    }
    return null;
}

/* Scaling factors for cost and benefit. Benefits should be normally distributed within a population 
 * to reflect different perceived benefits (and thus diligence) in a population. See below.
 * Costs are not distributed. They are the same for everyone. C stands for cost, B for benefit. */
//double baseCostImprove = 100; //@SIMPARAM
//double baseCostRate = 50; //@SIMPARAM
//double baseBenefitImprove = 80; //@SIMPARAM
//double baseBenefitRate = 50; //@SIMPARAM

// int numberOfReportsToEvaluate = 20; //@SIMPARAM number of  reports to evaluate for improvement/rating
// int numberOfReportsToEvaluateForDuplicateChecking = 3; //@SIMPARAM
//double tooFarAway = 0.2; //@SIMPARAM
//double pointQuota = 500; //@SIMPARAM The amount of points that every agent would like to achieve, because of the price draw, for example.
//
//double probImproveOrRate = 0.3; //@SIMPARAM to replace CreateP
//keep this comment as the last line. Do not add whitespaces aferwards</String>
                              </Instruction>
                              <Instruction>
                                <Name>Duration</Name>
                                <String>return 0;
</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>116</Width>
                            <Height>101</Height>
                          </Size>
                          <Location>
                            <X>61</X>
                            <Y>42</Y>
                          </Location>
                          <DisplayName>SetNextStep</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>-1</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                            <CornerRounding>5</CornerRounding>
                            <Alignment>MiddleCenter</Alignment>
                          </ShapeProperties>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>B_base_improve</Name>
                          <Id>ed9e97a2-899f-4d54-91d8-c87a02b33b3a</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>f6dc6964-c290-47e7-bbd5-ce56afd014a2</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>050ea832-ea5f-434b-a8d9-b6b3c7a30366</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>100</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>139</X>
                            <Y>449</Y>
                          </Location>
                          <DisplayName>B_base_improve</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>double</ImplementationType>
                          <InitialValue>0.0</InitialValue>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>B_base_rate</Name>
                          <Id>04651c83-f686-4468-b166-f65862dc44dc</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>135c5154-b3e5-4b95-8647-15e34627b473</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>af7b7f14-3635-444f-9360-59afaa03c709</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>100</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>149</X>
                            <Y>497</Y>
                          </Location>
                          <DisplayName>B_base_rate</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>double</ImplementationType>
                          <InitialValue>0.0</InitialValue>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>c29fe6e4-18d1-4da9-9d5e-b14a90439622</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Startup</Name>
                          <String>B_base_improve = Random.Normal(Worker.baseBenefitImprove, 0.05 * Worker.baseBenefitImprove);
B_base_rate = Random.Normal(Worker.baseBenefitRate, 0.05 * Worker.baseBenefitRate);</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>237</Width>
                      <Height>191</Height>
                    </Size>
                    <Location>
                      <X>9</X>
                      <Y>346</Y>
                    </Location>
                    <DisplayName>ActionSelector</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Bold</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <BorderWidth>3</BorderWidth>
                      <FillColor>
                        <Argb>-21</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>TopCenter</Alignment>
                    </ShapeProperties>
                    <CreateP>0.1</CreateP>
                  </anyType>
                  <anyType xsi:type="Metric">
                    <Name>Karma</Name>
                    <Id>439e94f3-15ef-480e-a6c1-0ceefa771d1b</Id>
                    <Structure xsi:type="MetricStructure">
                      <Id>cfc51586-87a6-4b62-bb99-6e81a6e4aece</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>09d0000d-7d9b-468f-9980-0f836633a2e1</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>69</Width>
                      <Height>21</Height>
                    </Size>
                    <Location>
                      <X>17</X>
                      <Y>570</Y>
                    </Location>
                    <DisplayName>Karma</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.5</InitialValue>
                  </anyType>
                  <anyType xsi:type="Metric">
                    <Name>points</Name>
                    <Id>25c860fb-0158-4486-a87a-a5d5a567a153</Id>
                    <Structure xsi:type="MetricStructure">
                      <Id>2daafa68-c5fc-4693-ac05-31e4f375a53b</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>abcd1a45-2763-4c96-bd91-70721f5898b9</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>81</Width>
                      <Height>23</Height>
                    </Size>
                    <Location>
                      <X>92</X>
                      <Y>568</Y>
                    </Location>
                    <DisplayName>points</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="Variable">
                    <Name>location</Name>
                    <Id>1396bf1d-f46e-436b-835b-33daf25e4ca2</Id>
                    <Structure xsi:type="VariableStructure">
                      <Id>9540a442-7938-40f3-8fe0-98024b4d4d43</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>b5924c42-ab8d-48bd-8d2f-d5263c9a019f</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>56</Width>
                      <Height>20</Height>
                    </Size>
                    <Location>
                      <X>70</X>
                      <Y>544</Y>
                    </Location>
                    <DisplayName>location</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="CollabSequence">
                    <Name>CS1</Name>
                    <Id>fa27d836-8ed6-49de-9ef4-ebc16cf237f9</Id>
                    <Structure xsi:type="CollabSequenceStructure">
                      <Id>be8d1233-89de-4ae9-a71e-80eb8e733564</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>9c81ca20-98b4-4117-8628-7f67b9266dba</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>if (SetNextStep.ActionSelector.nextActionType==4)
{
System.Diagnostics.Debug.Assert(SetNextStep.ActiveReport != null, "ActiveReport NULL", "ActiveReport NULL"); 
System.Diagnostics.Debug.Assert(SetNextStep.OriginalReport != null, "OriginalReport NULL", "OriginalReport NULL");
}
return (SetNextStep.ActionSelector.nextActionType==4  &amp;&amp; SetNextStep.ActiveReport != null  &amp;&amp; SetNextStep.OriginalReport != null);
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String>ReportDuplicate.ActiveReport = SetNextStep.ActiveReport;
ReportDuplicate.OriginalReport = SetNextStep.OriginalReport;</String>
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return SetNextStep.ActionSelector.Worker.BehaviorList[0];</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>24</Width>
                      <Height>71</Height>
                    </Size>
                    <Location>
                      <X>100</X>
                      <Y>317</Y>
                    </Location>
                    <DisplayName>CS1</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <BorderWidth>0</BorderWidth>
                      <FillColor>
                        <Argb>-16777216</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>54</X>
                          <Y>0</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>26</X>
                          <Y>68</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>d7a16cac-2655-4fe5-9baf-78cb3f7f6b67</Role1Id>
                    <Role2Id>4f5f4a2d-e7cb-4bb8-a460-f50029c3f1e0</Role2Id>
                  </anyType>
                  <anyType xsi:type="CollabSequence">
                    <Name>CS2</Name>
                    <Id>d66a927d-30bf-43a1-b0f2-08ed8eedee4b</Id>
                    <Structure xsi:type="CollabSequenceStructure">
                      <Id>5493a5a9-cc59-4211-89ca-0cc70c5414c3</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>0fe82f3e-0696-4e55-b1fd-3f677739c1e2</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>if (SetNextStep.ActionSelector.nextActionType==3)
{
System.Diagnostics.Debug.Assert(SetNextStep.ActiveReport != null, "ActiveReport NULL", "ActiveReport NULL"); 
}
return (SetNextStep.ActionSelector.nextActionType==3 &amp;&amp; SetNextStep.ActiveReport != null);
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String>Rate.RefReport = SetNextStep.ActiveReport;</String>
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return SetNextStep.ActionSelector.Worker.BehaviorList[0];</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>3</Width>
                      <Height>154</Height>
                    </Size>
                    <Location>
                      <X>132</X>
                      <Y>234</Y>
                    </Location>
                    <DisplayName>CS2</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <BorderWidth>0</BorderWidth>
                      <FillColor>
                        <Argb>-16777216</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>65</X>
                          <Y>0</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>28</X>
                          <Y>46</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>d7a16cac-2655-4fe5-9baf-78cb3f7f6b67</Role1Id>
                    <Role2Id>24e394ca-a8b3-4f57-878b-385e9ed08c91</Role2Id>
                  </anyType>
                  <anyType xsi:type="CollabSequence">
                    <Name>CS3</Name>
                    <Id>cd98be80-9cca-4ded-b236-57cd09ffe451</Id>
                    <Structure xsi:type="CollabSequenceStructure">
                      <Id>daad747e-6e5c-424d-8ef9-ec888d7060c0</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>840fa88d-f8cf-4761-9a12-2547897caf7d</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>if (SetNextStep.ActionSelector.nextActionType==2)
{
System.Diagnostics.Debug.Assert(SetNextStep.ActiveReport != null, "ActiveReport NULL", "ActiveReport NULL"); 
}
return (SetNextStep.ActionSelector.nextActionType==2 &amp;&amp; SetNextStep.ActiveReport != null);
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String>Improve.RefReport = SetNextStep.ActiveReport;</String>
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return SetNextStep.ActionSelector.Worker.BehaviorList[0];</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>29</Width>
                      <Height>223</Height>
                    </Size>
                    <Location>
                      <X>149</X>
                      <Y>165</Y>
                    </Location>
                    <DisplayName>CS3</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <BorderWidth>0</BorderWidth>
                      <FillColor>
                        <Argb>-16777216</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>79</X>
                          <Y>0</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>60</X>
                          <Y>50</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>d7a16cac-2655-4fe5-9baf-78cb3f7f6b67</Role1Id>
                    <Role2Id>7338ef4f-f6d3-4aa1-88a1-923165bf375f</Role2Id>
                  </anyType>
                  <anyType xsi:type="CollabSequence">
                    <Name>CS4</Name>
                    <Id>e7749075-a5f6-498d-96ac-bb9ddbfdb9dc</Id>
                    <Structure xsi:type="CollabSequenceStructure">
                      <Id>60bbbe16-6b4d-4e80-a8f0-19d91f192ec9</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>d4812dcf-7b4c-4466-aca6-653dd67d5fe5</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>if (SetNextStep.ActionSelector.nextActionType==1)
{
System.Diagnostics.Debug.Assert(SetNextStep.ActiveSituation != null, "ActiveSituation NULL", "ActiveSituation NULL"); 
}

return (SetNextStep.ActionSelector.nextActionType==1 &amp;&amp; SetNextStep.ActiveSituation != null);
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String>Submit.RefSituation = SetNextStep.ActiveSituation;</String>
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return SetNextStep.ActionSelector.Worker.BehaviorList[0];</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>46</Width>
                      <Height>293</Height>
                    </Size>
                    <Location>
                      <X>170</X>
                      <Y>95</Y>
                    </Location>
                    <DisplayName>CS4</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <BorderWidth>0</BorderWidth>
                      <FillColor>
                        <Argb>-16777216</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>100</X>
                          <Y>0</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>79</X>
                          <Y>51</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>d7a16cac-2655-4fe5-9baf-78cb3f7f6b67</Role1Id>
                    <Role2Id>2941b8d8-5654-4783-99f1-a1143ead265b</Role2Id>
                  </anyType>
                  <anyType xsi:type="CollabSequence">
                    <Name>CS5</Name>
                    <Id>2ace0fed-8e50-4dd4-9629-927486e8aa9c</Id>
                    <Structure xsi:type="CollabSequenceStructure">
                      <Id>e6e99d5b-8772-48eb-9245-4b84b85b340b</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>9a25dfc0-a9b6-4709-83cd-ab9c8aebe074</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>return (SetNextStep.ActionSelector.nextActionType==0);
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String>Idle.idleTime = 1;
SetNextStep.ActionSelector.Worker.isIdling = true;</String>
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return SetNextStep.ActionSelector.Worker.BehaviorList[0];</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>40</Width>
                      <Height>166</Height>
                    </Size>
                    <Location>
                      <X>53</X>
                      <Y>222</Y>
                    </Location>
                    <DisplayName>CS5</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <BorderWidth>0</BorderWidth>
                      <FillColor>
                        <Argb>-16777216</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>23</X>
                          <Y>0</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>36</X>
                          <Y>144</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>d7a16cac-2655-4fe5-9baf-78cb3f7f6b67</Role1Id>
                    <Role2Id>8a32822d-2634-478f-889b-88e2de72bff5</Role2Id>
                  </anyType>
                  <anyType xsi:type="Variable">
                    <Name>profile</Name>
                    <Id>252562d7-5224-4b32-b75c-4090fa5f153c</Id>
                    <Structure xsi:type="VariableStructure">
                      <Id>619ea19a-064a-4707-be53-c6dfaec63348</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>bb1e32c3-9dff-4535-8507-69d8c048028c</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>46</Width>
                      <Height>20</Height>
                    </Size>
                    <Location>
                      <X>17</X>
                      <Y>545</Y>
                    </Location>
                    <DisplayName>profile</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0 /*@SIMPARAM set to 1 if you want to prevent unreputational Workers to rate*/</InitialValue>
                  </anyType>
                  <anyType xsi:type="Variable">
                    <Name>banned</Name>
                    <Id>4b55ee01-f34c-4ca5-bb3b-5b4351d9b87d</Id>
                    <Structure xsi:type="VariableStructure">
                      <Id>bfbb2642-1514-4e38-aad0-0975d4a6caaf</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>c2407342-378e-4f39-a212-7190e7177fe5</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>78</Width>
                      <Height>20</Height>
                    </Size>
                    <Location>
                      <X>140</X>
                      <Y>544</Y>
                    </Location>
                    <DisplayName>banned</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>bool</ImplementationType>
                    <InitialValue>false</InitialValue>
                  </anyType>
                  <anyType xsi:type="Variable">
                    <Name>isIdling</Name>
                    <Id>f9624416-8878-4778-aead-72328a257e2c</Id>
                    <Structure xsi:type="VariableStructure">
                      <Id>af765aef-e4a3-40c3-984d-ea91c1c55bb1</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>0ac8e1b3-0cf5-4cba-b1d7-96b9b714594c</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>100</Width>
                      <Height>20</Height>
                    </Size>
                    <Location>
                      <X>17</X>
                      <Y>593</Y>
                    </Location>
                    <DisplayName>isIdling</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>bool</ImplementationType>
                    <InitialValue>false</InitialValue>
                  </anyType>
                </Types>
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>e02450e5-9cf3-49f8-84bd-90fe6d77c64b</Id>
                <Instructions>
                  <Instruction>
                    <Name>Startup</Name>
                    <String>location = Random.Uniform();

</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>269</Width>
                <Height>630</Height>
              </Size>
              <Location>
                <X>14</X>
                <Y>5</Y>
              </Location>
              <DisplayName>Worker</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>10</Size>
                <Style>Bold</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16777216</Argb>
                </BorderColor>
                <BorderWidth>3</BorderWidth>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
              </ShapeProperties>
            </anyType>
            <anyType xsi:type="CollabObject">
              <Name>Report</Name>
              <Id>8d1a91c9-323a-462f-bc61-dcf0af6132dd</Id>
              <Structure xsi:type="CollabObjectStructure">
                <Id>c475133d-db9c-447d-ba50-ecde5cc1e3c9</Id>
                <Types>
                  <anyType xsi:type="Trigger">
                    <Name>CreatedR</Name>
                    <Id>d7644b9f-9055-4d1c-8285-d4f1686f908b</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>5ff833be-9341-4d93-b97b-4a901280599f</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>eec95cf4-d5b5-4779-a89c-c673b3822f5f</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>// Upper threshold for bayesian estimator. Equal number of reports we consider to make the initial, cold-start assesment of report's accuracy and importance more objective
//for threshold =3, and initial value 0.5, it takes 9 (assumed) correct values of 1 so that the average would reach &gt;0.95 and converge. 
//So setting threshold &gt;3 makes no sense. 
//double BayesThreshold_Submit = 3.0; //@SIMPARAM 
//double KarmaInfluenceOnBayesThreshold_Submit = 0.333; //@SIMPARAM 

double avgImp = 0.0;	// average importance accross all reports. Default 0.0
double avgAcc = 0.0;	// average importance accross all reports. Default 0.0	

Report.originalImportance = Report.importance;
Report.originalAccuracy = Report.accuracy;

double alpha = Report.KarmaInfluenceOnBayesThreshold_Submit;
double k = Report.createdBy.Karma;
double threshold = Report.BayesThreshold_Submit * (1 - alpha * k); //lower the threshold for trusted workers. 	
if (Report.Reporting.ReportList.Count &gt; 0)
{
	foreach (Report r in Report.Reporting.ReportList)
	{
		avgAcc += r.accuracy;
		avgImp += r.importance;
	}
	avgAcc /= Math.Max(1, Report.Reporting.ReportList.Count); 	//will stay 0.5 if no reports up till now.	
	avgImp /= Math.Max(1, Report.Reporting.ReportList.Count); 			
}
else
{
	avgAcc = 0.5;	
	avgImp = 0.5;
}

//set the new accuracy based on the initial, user-provided value, and the average accross all the reports
Report.accuracy = (avgAcc * threshold + Report.accuracy) / (threshold + 1);

//set the new importance based on the initial, user-provided value, and the average accross all the reports
Report.importance = (avgImp * threshold + Report.importance) / (threshold + 1);


System.Diagnostics.Debug.Assert(Report.accuracy &gt;= 0 &amp;&amp; Report.accuracy &lt;= 1, "Accuracy violated", "Accuracy violated"+Report.accuracy); 
System.Diagnostics.Debug.Assert(Report.importance &gt;= 0 &amp;&amp; Report.importance &lt;= 1, "Importance violated", "Importance violated"+Report.importance); 
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0.0;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>110</Width>
                      <Height>31</Height>
                    </Size>
                    <Location>
                      <X>14</X>
                      <Y>16</Y>
                    </Location>
                    <DisplayName>CreatedR</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="TriggerDataSet">
                    <Name>RatingInfo</Name>
                    <Id>9fb2c958-cc73-4372-8a78-a06f95c5ebc2</Id>
                    <Structure xsi:type="TriggerDataSetStructure">
                      <Id>8ab82e5c-2413-48b9-b49c-24865bae6e5b</Id>
                      <Types>
                        <anyType xsi:type="Variable">
                          <Name>RatingValue</Name>
                          <Id>1ee5df2f-ab81-4d43-9054-6356a92bf9f3</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>96049a18-a9e8-4234-b2e4-336dd85c2e5f</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>5ebf56dd-3729-4dba-b584-c51b3449ae3b</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>115</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>5</X>
                            <Y>19</Y>
                          </Location>
                          <DisplayName>RatingValue</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>double</ImplementationType>
                          <InitialValue>0.0</InitialValue>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>RatedBy</Name>
                          <Id>23ff49bb-1819-48bf-83fd-bd7b5615e55f</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>13665c1a-8dd8-4676-b51e-6604eb0d5d75</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>1ab3a27f-e496-4cdb-9207-edbb89e4f733</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>115</Width>
                            <Height>21</Height>
                          </Size>
                          <Location>
                            <X>6</X>
                            <Y>45</Y>
                          </Location>
                          <DisplayName>RatedBy</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>Simulation.ReportingContext.Worker</ImplementationType>
                          <InitialValue>null</InitialValue>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>91036af0-c851-441a-b25e-1973a7ae17c7</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Startup</Name>
                          <String />
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>126</Width>
                      <Height>70</Height>
                    </Size>
                    <Location>
                      <X>12</X>
                      <Y>253</Y>
                    </Location>
                    <DisplayName>RatingInfo</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="TriggerDataSet">
                    <Name>UpdateInfo</Name>
                    <Id>b79a8354-6af5-41e9-be02-527ba587acea</Id>
                    <Structure xsi:type="TriggerDataSetStructure">
                      <Id>f28a4e10-509f-4cc1-a31a-510180b18014</Id>
                      <Types>
                        <anyType xsi:type="Variable">
                          <Name>ImprovementImpact</Name>
                          <Id>1d60077b-7d1d-4194-aef1-635283cc5247</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>66b8b27c-0cde-4e34-9dd8-614457ed4457</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>daf70064-b1b0-4695-adf1-b426758fd99d</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>115</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>4</X>
                            <Y>20</Y>
                          </Location>
                          <DisplayName>ImprovementImpact</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>double</ImplementationType>
                          <InitialValue>0.0</InitialValue>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>ImprovedBy</Name>
                          <Id>68e2e582-09c6-4a43-b2bd-612e31de0f75</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>06be2294-1ca0-404e-8237-08a7ff681fdf</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>984123c1-861c-4a03-a110-11257361a96c</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>112</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>5</X>
                            <Y>46</Y>
                          </Location>
                          <DisplayName>ImprovedBy</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>Simulation.ReportingContext.Worker</ImplementationType>
                          <InitialValue>null</InitialValue>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>15e545b4-f143-4d47-9c79-a055a814d34c</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Startup</Name>
                          <String />
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>126</Width>
                      <Height>73</Height>
                    </Size>
                    <Location>
                      <X>13</X>
                      <Y>171</Y>
                    </Location>
                    <DisplayName>UpdateInfo</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="Trigger">
                    <Name>ImprovedR</Name>
                    <Id>cf4f897b-4afa-484f-b08a-6f2cc33a2d5e</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>99f7c31d-dac8-47c2-9820-074aeca0655a</Id>
                      <Types>
                        <anyType xsi:type="Variable">
                          <Name>activeWorker</Name>
                          <Id>ce163562-33fb-4a9c-88ff-f5f33511534e</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>cac0a6dc-6c9f-47bb-a2e5-74f8202989f0</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>6b486a2f-ed27-4c22-a9fd-eb5797e9f68f</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>100</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>24</X>
                            <Y>83</Y>
                          </Location>
                          <DisplayName>activeWorker</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>Worker</ImplementationType>
                          <InitialValue>null</InitialValue>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>481752c1-db3a-4594-94c7-b8b56c26139c</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>// double improvementInfluence = 0.3; //@SIMPARAM keep within [0..1]

//TODO: test if this actually returns the correct UpdateInfo object
UpdateInfo newUpdateInfo = Report.UpdateInfoList[Report.UpdateInfoList.Count-1];

// Calculate accuracy
Report.accuracy =  Report.improvementInfluence * Math.Max(0, Math.Min(1, Report.accuracy + newUpdateInfo.ImprovementImpact)) + (1 - Report.improvementInfluence) * Report.accuracy;	

System.Diagnostics.Debug.Assert(Report.accuracy &gt;= 0 &amp;&amp; Report.accuracy &lt;= 1, "Accuracy violated", "Accuracy violated"); 	</String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>110</Width>
                      <Height>55</Height>
                    </Size>
                    <Location>
                      <X>15</X>
                      <Y>50</Y>
                    </Location>
                    <DisplayName>ImprovedR</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="Trigger">
                    <Name>RatedR</Name>
                    <Id>9e68d5c9-49c2-44cb-bac2-feb65594ca88</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>233e8c28-c79c-4554-84c0-1f71567815f2</Id>
                      <Types>
                        <anyType xsi:type="Variable">
                          <Name>activeWorker</Name>
                          <Id>c5e5ac57-02c4-43d5-a030-bc15e58aae8f</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>4bbdc974-9289-400e-81b4-32b1533dacca</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>d3577a40-7cbe-4cdd-9100-315b516b519b</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>100</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>31</X>
                            <Y>101</Y>
                          </Location>
                          <DisplayName>activeWorker</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>Worker</ImplementationType>
                          <InitialValue>null</InitialValue>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>f25f752a-e1f3-4477-ae7d-afda19320cc4</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>//double C = Report.Reporting.SituationGeneratorList[0].EWMAReportScore; // Cm = average report rating across all processed reports 

// Upper threshold for bayesian estimator. 
//double BayesThreshold_Rate = 7.0; //@SIMPARAM  must be &gt;1
//double KarmaInfluenceOnBayesThreshold_Rate = 0.333; //@SIMPARAM 

double avgImpAllReports = 0.5;	// average importance accross all reports. Default 0.5
double alpha = Report.KarmaInfluenceOnBayesThreshold_Rate;
double k = Report.createdBy.Karma;
double threshold = Report.BayesThreshold_Rate * (1 - alpha * k); //lower the threshold for trusted workers. 	

if (Report.Reporting.ReportList.Count &gt;= Report.BayesThreshold_Rate)
{
	double temp = 0.0;
	foreach (Report r in Report.Reporting.ReportList) 
	{
		temp += r.importance;
	}
	 avgImpAllReports = temp / Math.Max(1, Report.Reporting.ReportList.Count);
}
	 
double numRatingsThisReport = Math.Max(1,Report.RatingInfoList.Count); 	//number of ratings for this report. ogi - is always &gt;=1 anyway, otherwise this part of the code wouldn't be executed.
double avgRatingThisReport = 0.0; 	//avg. importance of this report.			
foreach (RatingInfo rd in Report.RatingInfoList)
{
	avgRatingThisReport += rd.RatingValue;
}

avgRatingThisReport /= numRatingsThisReport;

//Bayes estimator
Report.importance = (avgImpAllReports * threshold + avgRatingThisReport * numRatingsThisReport) / (threshold + numRatingsThisReport);

System.Diagnostics.Debug.Assert(Report.importance &gt;= 0 &amp;&amp; Report.importance &lt;= 1, "Importance violated", "Importance violated"); </String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>110</Width>
                      <Height>57</Height>
                    </Size>
                    <Location>
                      <X>12</X>
                      <Y>109</Y>
                    </Location>
                    <DisplayName>RatedR</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>importance</Name>
                    <Id>14a9f51e-a48c-4e28-af35-0fe587005f74</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>87e76739-4328-4346-999b-5c36a6b15ea9</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>c1bc4167-b85a-4609-88c7-240d80aeeff2</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>73</Width>
                      <Height>25</Height>
                    </Size>
                    <Location>
                      <X>145</X>
                      <Y>287</Y>
                    </Location>
                    <DisplayName>importance</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>accuracy</Name>
                    <Id>8367edc5-c9ca-49f3-af2c-45d57ffd7231</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>5e8148d0-d9b1-4797-afab-d89fa63aad9a</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>8e3be22b-1f2b-41b7-bf9c-59851f7885f1</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>72</Width>
                      <Height>25</Height>
                    </Size>
                    <Location>
                      <X>144</X>
                      <Y>208</Y>
                    </Location>
                    <DisplayName>accuracy</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>isDuplicate</Name>
                    <Id>345ed78b-28b8-494c-85fe-feab14c2f22a</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>23430cbb-1e9f-46db-9443-76daf61d971d</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>8ee845fd-33ba-47cf-abe4-fe98ad720c96</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>82</Width>
                      <Height>20</Height>
                    </Size>
                    <Location>
                      <X>190</X>
                      <Y>36</Y>
                    </Location>
                    <DisplayName>isDuplicate</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>bool</ImplementationType>
                    <InitialValue>false</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>isProcessed</Name>
                    <Id>1f6c53b3-65f4-4c23-bbf0-783649f4ebf3</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>cd220db1-4f2b-43fb-9106-6f7360930d7e</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>2611e505-2eb0-45a8-ae87-b0a2b5352c47</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>82</Width>
                      <Height>19</Height>
                    </Size>
                    <Location>
                      <X>190</X>
                      <Y>59</Y>
                    </Location>
                    <DisplayName>isProcessed</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>bool</ImplementationType>
                    <InitialValue>false</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>createdBy</Name>
                    <Id>401e8b28-b713-4fa2-a60e-d98e25e69f24</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>7ff89737-1e62-48be-902b-23577ee18226</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>8be3f028-a6e2-4de4-8fde-23e675137cfd</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>86</Width>
                      <Height>24</Height>
                    </Size>
                    <Location>
                      <X>142</X>
                      <Y>83</Y>
                    </Location>
                    <DisplayName>createdBy</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>Simulation.ReportingContext.Worker</ImplementationType>
                    <InitialValue>null</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>refSituation</Name>
                    <Id>2757b51b-8153-435a-96b4-4de20b65d2d2</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>d6fa5174-c0e5-42d7-b7c9-672dfec0e404</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>2223c42f-1842-42ac-a039-87df8a4e65a0</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>87</Width>
                      <Height>25</Height>
                    </Size>
                    <Location>
                      <X>143</X>
                      <Y>137</Y>
                    </Location>
                    <DisplayName>refSituation</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>Simulation.ReportingContext.Situation</ImplementationType>
                    <InitialValue>null</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>createdOn</Name>
                    <Id>3a781d4d-697b-41fd-b2ab-07487687efc4</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>3551ca15-bac4-4c38-8a5a-699b7d4df16c</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>87a03e2f-e65e-44fb-86d4-b820552156fb</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>87</Width>
                      <Height>22</Height>
                    </Size>
                    <Location>
                      <X>143</X>
                      <Y>112</Y>
                    </Location>
                    <DisplayName>createdOn</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>improvementReward</Name>
                    <Id>a6db5f4e-37fe-4cf1-8372-03a636f88621</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>48f20b41-37e5-4f60-aea2-d947806d5895</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>daec69e8-2b83-40ce-9c3f-6731ee0d356c</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>123</Width>
                      <Height>25</Height>
                    </Size>
                    <Location>
                      <X>182</X>
                      <Y>181</Y>
                    </Location>
                    <DisplayName>improvementReward</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>ratingReward</Name>
                    <Id>8ed483d1-7d00-4107-8f9d-2d5e2de73e46</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>b760bc33-dbda-4e72-a5f2-2dbe73984f00</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>f02c69fb-ca76-4416-b95b-d5c91ecbd10b</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>122</Width>
                      <Height>25</Height>
                    </Size>
                    <Location>
                      <X>178</X>
                      <Y>254</Y>
                    </Location>
                    <DisplayName>ratingReward</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>duplicateOf</Name>
                    <Id>e5372b8a-53bb-46fe-86b5-429a053252af</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>28a10d34-074b-4f67-b84b-3d95c4a4972a</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>1c84f270-cc10-4f90-a843-701f8228233f</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>83</Width>
                      <Height>18</Height>
                    </Size>
                    <Location>
                      <X>324</X>
                      <Y>37</Y>
                    </Location>
                    <DisplayName>duplicateOf</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>HashSet&lt;Report&gt;</ImplementationType>
                    <InitialValue>new HashSet&lt;Report&gt;()</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>originalOf</Name>
                    <Id>b762de8a-4b54-4191-83d5-d8a4969e7070</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>680e335d-9366-4471-b8e7-a1da2b62d627</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>26a0bfb0-ad16-490a-8130-80f3f0fbb056</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>72</Width>
                      <Height>18</Height>
                    </Size>
                    <Location>
                      <X>325</X>
                      <Y>15</Y>
                    </Location>
                    <DisplayName>originalOf</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>HashSet&lt;Report&gt;</ImplementationType>
                    <InitialValue>new HashSet&lt;Report&gt;()</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>originalImportance</Name>
                    <Id>c3f200f0-aba5-4af7-b345-3651aae047ce</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>9e4f6ead-325f-41ba-8b0d-af55b1fe6f72</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>a71a9d23-96f8-4ea2-a311-2ea7420dd34d</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>122</Width>
                      <Height>22</Height>
                    </Size>
                    <Location>
                      <X>375</X>
                      <Y>68</Y>
                    </Location>
                    <DisplayName>originalImportance</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.5</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>originalAccuracy</Name>
                    <Id>f36dde65-21b8-4eee-ac20-35fcb67b1f3a</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>dafdc2c4-f540-40da-9bfb-acf2996ab346</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>7d481c12-52ae-4b3f-9e1e-58d68d7f1d9d</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>100</Width>
                      <Height>21</Height>
                    </Size>
                    <Location>
                      <X>366</X>
                      <Y>213</Y>
                    </Location>
                    <DisplayName>originalAccuracy</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                </Types>
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>bcbacea1-c12d-4d47-9e82-bb8c011f0b1f</Id>
                <Instructions>
                  <Instruction>
                    <Name>Startup</Name>
                    <String>// isDuplicate is the official flag by the authority that the report is a duplicate and will thus not be used by Worker.Behavior.Improve/Rate/ReportDuplicate
;</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>279</Width>
                <Height>330</Height>
              </Size>
              <Location>
                <X>296</X>
                <Y>5</Y>
              </Location>
              <DisplayName>Report</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16776961</Argb>
                </BorderColor>
                <BorderWidth>2</BorderWidth>
                <FillColor>
                  <Argb>-2561</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
                <CornerRounding>5</CornerRounding>
                <Alignment>TopCenter</Alignment>
              </ShapeProperties>
            </anyType>
            <anyType xsi:type="Collaborator">
              <Name>Authority</Name>
              <Id>81f2b2ba-dfdb-48c6-b865-9eb59fdeb1d6</Id>
              <Structure xsi:type="CollaboratorStructure">
                <Id>0c335773-7833-4cfb-b263-9fbc63516410</Id>
                <Types>
                  <anyType xsi:type="Connector">
                    <Name>ReportProcessing</Name>
                    <Id>31bf3024-ef83-45aa-95d3-fef21dbd1ae0</Id>
                    <Structure xsi:type="ConnectorStructure">
                      <Id>d29d9e85-5235-424f-8c17-a9c4b6650435</Id>
                      <Types>
                        <anyType xsi:type="Read">
                          <Name>Incentivize</Name>
                          <Id>669a3aea-622e-4c71-8695-d9b2a6886b28</Id>
                          <Structure xsi:type="ReadStructure">
                            <Id>e9201faf-567e-4b10-9890-f0053253425e</Id>
                            <Types>
                              <anyType xsi:type="Variable">
                                <Name>ActiveReport</Name>
                                <Id>388cdcb6-3d78-45a4-8eb1-255f299e63fe</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>c02927d3-6317-4a95-94b9-cfda68b027c7</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>53c00010-1a7c-408d-a971-b278b82fcea0</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>112</X>
                                  <Y>38</Y>
                                </Location>
                                <DisplayName>ActiveReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>actionPerformed</Name>
                                <Id>7ef88c1e-55ba-4730-a119-4ef6866c323d</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>3e9b0a91-1e10-440e-b310-30344f358e49</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>702afa9c-869e-4812-8c8d-d50112ce7a1c</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>7</X>
                                  <Y>39</Y>
                                </Location>
                                <DisplayName>actionPerformed</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>int</ImplementationType>
                                <InitialValue>0</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>activeWorker</Name>
                                <Id>b4552b28-1bb7-4c78-8d18-9baae9fe8c28</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>38a16fe1-1860-419a-84a7-b232b9a787cf</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>6c8efae3-1e56-40c3-970e-c6a1af7c4c8c</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>21</Height>
                                </Size>
                                <Location>
                                  <X>8</X>
                                  <Y>-1</Y>
                                </Location>
                                <DisplayName>activeWorker</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Worker</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>cost</Name>
                                <Id>6cddd8ac-a169-4c3c-8a93-3259b062099d</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>4930e0a1-be50-459d-915e-84d74c68569e</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>4637883c-1e62-4155-9cd7-d3d1380f98aa</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>114</X>
                                  <Y>-1</Y>
                                </Location>
                                <DisplayName>cost</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>double</ImplementationType>
                                <InitialValue>0.0</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>proceedToFinalize</Name>
                                <Id>189c36f5-d69f-46c4-809b-e913e5240621</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>3ad08dbd-b783-4e25-a1e9-571b81d5177a</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>514d2dd2-cbcb-4feb-9c46-c2158108f496</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>118</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>86</X>
                                  <Y>96</Y>
                                </Location>
                                <DisplayName>proceedToFinalize</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>bool</ImplementationType>
                                <InitialValue>false</InitialValue>
                              </anyType>
                            </Types>
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>3b3e7771-7a85-406b-b329-c825730cafb0</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Run</Name>
                                <String>System.Diagnostics.Debug.Assert(activeWorker != null, "activeWorker NULL", "activeWorker NULL");
//double unitCostOfProcessing = 10; //@SIMPARAM
Report r = ActiveReport;
//check if active report is processed. if so, abort

bool cameFromSubmit = (actionPerformed == 1);
bool cameFromImprove = (actionPerformed == 2); 
bool cameFromRate = (actionPerformed == 3);
bool cameFromProcDupl = (actionPerformed == 4);

//importance that will cause a freshly submitted report to be immediately processed
//extreme values by unreputable users will be dampened towards the average, so it need not be high
//double onSubmitProcessingThreshold = 0.6; //@SIMPARAM

//minimum accuracy required after at least 3 updates to trigger final processing
//double onImproveProcessingThreshold = 0.75; //@SIMPARAM

//minimum importance required after at least 5 ratings to trigger final processing
//double onRateProcessingThreshold = 0.4; //@SIMPARAM

//we keep this one low, because it may be not very important, but if it aroused so much interes to be reported so many times, it makes sense to deal with it.
//double onReportDuplicateProcessingThreshold = 0.3; //@SIMPARAM
System.Diagnostics.Debug.Assert(r.accuracy &gt;= 0 &amp;&amp; r.accuracy &lt;= 1, "Accuracy violated", "Accuracy violated"); 
System.Diagnostics.Debug.Assert(r.importance &gt;= 0 &amp;&amp; r.importance &lt;= 1, "Importance violated", "Importance violated"); 


double repQuality = Math.Min(1, Math.Max(0, r.accuracy)); //[0,1] * r.importance
double coeff = 1 - repQuality;

if (cameFromSubmit &amp;&amp; r.importance &gt;= ReportProcessing.Authority.onSubmitProcessingThreshold) 	proceedToFinalize = true;
else if (cameFromImprove &amp;&amp; r.UpdateInfoList.Count &gt;= 3 &amp;&amp; r.accuracy &gt;= ReportProcessing.Authority.onImproveProcessingThreshold) 
	proceedToFinalize = true;
else if (cameFromRate &amp;&amp; r.RatingInfoList.Count &gt;= 5 &amp;&amp; r.importance &gt;= ReportProcessing.Authority.onRateProcessingThreshold) 
	proceedToFinalize = true;
else if (cameFromProcDupl &amp;&amp; r.importance &gt;= ReportProcessing.Authority.onReportDuplicateProcessingThreshold ) 
	proceedToFinalize = true; //definitely proceed. 
		//we already added the cost for this in ProcessDuplicateAlerts

if (proceedToFinalize)
{
  int missedDupReports = 0;
  cost += ReportProcessing.Authority.unitCostOfProcessing * coeff ; //costly to act immediately. 
  //additional cost for the remaining (orphan) Reports
  foreach (Report rr in ReportProcessing.Authority.Reporting.ReportList)
{
	//find remaining Reports pointing to the same situation
	if (!rr.isProcessed &amp;&amp; rr.refSituation == r.refSituation &amp;&amp; r != rr) 
	{
		rr.isProcessed = true; 
		rr.isDuplicate = true; //just for stats purposes
		if (cameFromProcDupl)
			cost += 0.05 * ReportProcessing.Authority.unitCostOfProcessing;
		else
			cost += 0.2 * ReportProcessing.Authority.unitCostOfProcessing;
		missedDupReports++;
		//TODO: aggregate remaining info. 
		//The only purpose of this would be to offer more precise Karma calculation.
		//skip for now
	}
}
ReportProcessing.Authority.Reporting.SituationGeneratorList[0].DuplicateReportsMissed = missedDupReports;
ReportProcessing.Authority.Reporting.SituationGeneratorList[0].AccuracyCost = 1-r.accuracy;

}
ActiveReport = r;

if (!proceedToFinalize) 
{
	ReportProcessing.Authority.Reporting.endedInFinalize = true;
	ReportProcessing.Authority.Reporting.endedInIncentivize = true;
}
else
{
	ReportProcessing.Authority.Reporting.endedInIncentivize = true;
}</String>
                              </Instruction>
                              <Instruction>
                                <Name>Duration</Name>
                                <String>return 0.01;
</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>198</Width>
                            <Height>56</Height>
                          </Size>
                          <Location>
                            <X>22</X>
                            <Y>143</Y>
                          </Location>
                          <DisplayName>Incentivize</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>-1</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                            <CornerRounding>5</CornerRounding>
                            <Alignment>MiddleCenter</Alignment>
                          </ShapeProperties>
                        </anyType>
                        <anyType xsi:type="Read">
                          <Name>ProcessDuplicateAlerts</Name>
                          <Id>8d4aa3c1-f666-465d-9060-7a58c2802ee2</Id>
                          <Structure xsi:type="ReadStructure">
                            <Id>e6d90d94-bb1b-4609-8097-c9e4024b2191</Id>
                            <Types>
                              <anyType xsi:type="Variable">
                                <Name>duplicatesFound</Name>
                                <Id>feb71d35-c12c-4bfe-a504-9801245ba171</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>61154124-49e9-4c42-a592-b7719fa78917</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>e97ae6db-27d5-43f6-be69-f9f9c7476c82</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>79</X>
                                  <Y>61</Y>
                                </Location>
                                <DisplayName>duplicatesFound</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>HashSet&lt;Report&gt;</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>activeReport</Name>
                                <Id>54d3bf67-7593-41a3-a37d-9f2c0f656970</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>7ccf6532-6bfc-4499-8b4a-a5d2ac536ae4</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>6b07e858-8b88-4f88-9a69-f3b507439412</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>80</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>100</X>
                                  <Y>-1</Y>
                                </Location>
                                <DisplayName>activeReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>activeWorker</Name>
                                <Id>88639e9a-a88d-4f88-a73e-bebe2beff809</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>6d0fafa5-23a3-4393-82f5-7d3f20b95893</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>73c7e3b9-4fcb-484f-ba8b-c6b838f6ae38</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>76</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>8</X>
                                  <Y>0</Y>
                                </Location>
                                <DisplayName>activeWorker</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Worker</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>activeDupInf</Name>
                                <Id>a5cba802-792a-41a7-b039-91754060849d</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>65e80f89-6fb4-4da4-b4dc-9faaa7a8cc44</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>7ec14731-0e07-4517-a0fa-dd33105f1948</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>76</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>6</X>
                                  <Y>87</Y>
                                </Location>
                                <DisplayName>activeDupInf</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Simulation.ReportingContext.DuplicatesContext.DuplicateInfo</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>cost</Name>
                                <Id>4da2221f-dcbb-4c16-8682-f6fd82ccc7d3</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>767a895e-f964-4d19-83be-f1fb27dd94b5</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>84ca3f49-0ff5-436a-b968-d25558a20c4f</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>54</Width>
                                  <Height>24</Height>
                                </Size>
                                <Location>
                                  <X>10</X>
                                  <Y>61</Y>
                                </Location>
                                <DisplayName>cost</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>double</ImplementationType>
                                <InitialValue>0.0</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>root</Name>
                                <Id>fede5140-7269-4248-b6b9-037b41d574c2</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>9c5871ed-f6a6-45f0-aa0a-3de642e53475</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>4f85d9d4-3d9f-4db9-b633-b22d594f80f3</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>275</X>
                                  <Y>55</Y>
                                </Location>
                                <DisplayName>root</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                            </Types>
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>c2d843c5-b8b6-4d24-9bee-6effffd85db4</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Run</Name>
                                <String>//double unitCostOfProcessing = 10; //@SIMPARAM

double oldestTimeCreated = Double.MaxValue;
root = null;
foreach (Report r in duplicatesFound) 
{
	if (r.refSituation == activeReport.refSituation)
	{	
		if (r.createdOn &lt;= oldestTimeCreated)
		{
			oldestTimeCreated = r.createdOn;
			root = r;
		}
	}
}
activeWorker = root.createdBy;

int trueDups=0;
int falseDups=0;

foreach (Report r in duplicatesFound) 
{
	if (r != root &amp;&amp; !r.isProcessed &amp;&amp; r.refSituation == activeReport.refSituation)
	{
		//merge Update infos. Have to add one by one, because the formula expects the last added value
		foreach (Simulation.ReportingContext.ReportContext.UpdateInfo ui in r.UpdateInfoList)
		{
			root.UpdateInfoList.Add(ui);
			//root.ImprovedR(true); //call blocking COPY FROM IMPROVEDR
			Simulation.ReportingContext.ReportContext.UpdateInfo newUpdateInfo = root.UpdateInfoList[root.UpdateInfoList.Count-1];
			root.accuracy =  root.improvementInfluence * Math.Max(0, Math.Min(1, root.accuracy + newUpdateInfo.ImprovementImpact)) + (1 - root.improvementInfluence) * root.accuracy;	
		}
		
		//merge rating infos. Can add all at once in this case
		root.RatingInfoList.AddRange(r.RatingInfoList);
		//root.RatedR(true); //call blocking CALL LOCALLY
		calcRatedR(root);	

		r.isProcessed = true;
		cost += 0.2 * ReportProcessing.Authority.unitCostOfProcessing;
		trueDups++;
	}
	else if (r != root &amp;&amp; !r.isProcessed &amp;&amp; r.refSituation != activeReport.refSituation)
	{
		//wrong duplicate
		cost += 0.2 * ReportProcessing.Authority.unitCostOfProcessing;
		falseDups++;
	}
}

ReportProcessing.Authority.Reporting.SituationGeneratorList[0].TrueDuplicateAlertsFound = trueDups;
ReportProcessing.Authority.Reporting.SituationGeneratorList[0].FalseDuplicateAlertsFound = falseDups;
}

void calcRatedR(Report r)
{
double avgImpAllReports = 0.5;	// average importance accross all reports. Default 0.5
double alpha = r.KarmaInfluenceOnBayesThreshold_Rate;
double k = r.createdBy.Karma;
double threshold = r.BayesThreshold_Rate * (1 - alpha * k); //lower the threshold for trusted workers. 	

if (r.Reporting.ReportList.Count &gt;= r.BayesThreshold_Rate)
{
	double temp = 0.0;
	foreach (Report rr in r.Reporting.ReportList) 
	{
		temp += rr.importance;
	}
	 avgImpAllReports = temp / Math.Max(1, r.Reporting.ReportList.Count);
}
	 
double numRatingsThisReport = Math.Max(1, r.RatingInfoList.Count); 	
double avgRatingThisReport = 0.0; 	//avg. importance of this report.			
foreach (Simulation.ReportingContext.ReportContext.RatingInfo rd in r.RatingInfoList)
{
	avgRatingThisReport += rd.RatingValue;
}

avgRatingThisReport /= numRatingsThisReport;

//Bayes estimator
r.importance = (avgImpAllReports * threshold + avgRatingThisReport * numRatingsThisReport) / (threshold + numRatingsThisReport);
}
// LASTLINE</String>
                              </Instruction>
                              <Instruction>
                                <Name>Duration</Name>
                                <String>return 0.01;
</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>176</Width>
                            <Height>79</Height>
                          </Size>
                          <Location>
                            <X>17</X>
                            <Y>18</Y>
                          </Location>
                          <DisplayName>ProcessDuplicateAlerts</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>-1</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                            <CornerRounding>5</CornerRounding>
                            <Alignment>MiddleCenter</Alignment>
                          </ShapeProperties>
                        </anyType>
                        <anyType xsi:type="CollabSequence">
                          <Name>NewCollabSequence</Name>
                          <Id>e1fae5af-0d90-4306-a0ef-7fdbee92b3df</Id>
                          <Structure xsi:type="CollabSequenceStructure">
                            <Id>76316ce5-a0b0-4037-a39d-87b30d3ea482</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>a4932b1b-4ead-473f-8f95-25037f1370d4</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Trigger</Name>
                                <String>return true;
</String>
                              </Instruction>
                              <Instruction>
                                <Name>Transfer</Name>
                                <String>System.Diagnostics.Debug.Assert(ProcessDuplicateAlerts.activeWorker != null, "activeWorker NULL", "activeWorker NULL");
Incentivize.actionPerformed = 4; //don't trigger ComposeMechanisms from Incentivize. We should have already done it.
Incentivize.ActiveReport = ProcessDuplicateAlerts.root; //this is not a mistake
Incentivize.activeWorker = ProcessDuplicateAlerts.activeWorker;
Incentivize.cost = ProcessDuplicateAlerts.cost;

</String>
                              </Instruction>
                              <Instruction>
                                <Name>Resolve</Name>
                                <String>return Context;</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>4</Width>
                            <Height>46</Height>
                          </Size>
                          <Location>
                            <X>61</X>
                            <Y>97</Y>
                          </Location>
                          <DisplayName>NewCollabSequence</DisplayName>
                          <ShowName>false</ShowName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <LineProperties>
                            <LineWidth>2</LineWidth>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <BorderWidth>0</BorderWidth>
                            <FillColor>
                              <Argb>-16777216</Argb>
                            </FillColor>
                            <Role1>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Offset>
                                <X>44</X>
                                <Y>79</Y>
                              </Offset>
                            </Role1>
                            <Role2>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Icon>..\..\Icons\triangle.gif</Icon>
                              <Offset>
                                <X>43</X>
                                <Y>0</Y>
                              </Offset>
                            </Role2>
                          </LineProperties>
                          <Role1Id>8d4aa3c1-f666-465d-9060-7a58c2802ee2</Role1Id>
                          <Role2Id>669a3aea-622e-4c71-8695-d9b2a6886b28</Role2Id>
                        </anyType>
                        <anyType xsi:type="CollabSequence">
                          <Name>NewCollabSequence1</Name>
                          <Id>0bfc67f3-9400-44a9-bfa3-6003d98e7687</Id>
                          <Structure xsi:type="CollabSequenceStructure">
                            <Id>7f2375eb-933c-4748-9560-ca6376a8684b</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>0c6447be-e699-45c3-b7e4-3226832cdb04</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Trigger</Name>
                                <String>return Incentivize.proceedToFinalize;

</String>
                              </Instruction>
                              <Instruction>
                                <Name>Transfer</Name>
                                <String>RepFinalize.ActiveReport = Incentivize.ActiveReport;
RepFinalize.cost = Incentivize.cost;</String>
                              </Instruction>
                              <Instruction>
                                <Name>Resolve</Name>
                                <String>return Context;</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>18</Width>
                            <Height>58</Height>
                          </Size>
                          <Location>
                            <X>220</X>
                            <Y>113</Y>
                          </Location>
                          <DisplayName>NewCollabSequence1</DisplayName>
                          <ShowName>false</ShowName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <LineProperties>
                            <LineWidth>2</LineWidth>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <BorderWidth>0</BorderWidth>
                            <FillColor>
                              <Argb>-16777216</Argb>
                            </FillColor>
                            <Role1>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Offset>
                                <X>198</X>
                                <Y>28</Y>
                              </Offset>
                            </Role1>
                            <Role2>
                              <Font>
                                <FontFamily>Segoe UI</FontFamily>
                                <Size>9</Size>
                                <Style>Regular</Style>
                              </Font>
                              <Icon>..\..\Icons\triangle.gif</Icon>
                              <Offset>
                                <X>0</X>
                                <Y>26</Y>
                              </Offset>
                            </Role2>
                          </LineProperties>
                          <Role1Id>669a3aea-622e-4c71-8695-d9b2a6886b28</Role1Id>
                          <Role2Id>709fbf2a-4449-44bd-a89d-630b0e7d4490</Role2Id>
                        </anyType>
                        <anyType xsi:type="Update">
                          <Name>RepFinalize</Name>
                          <Id>709fbf2a-4449-44bd-a89d-630b0e7d4490</Id>
                          <Structure xsi:type="UpdateStructure">
                            <Id>2f2fac2b-f062-42fc-bfe4-db20ab5d9aa6</Id>
                            <Types>
                              <anyType xsi:type="Variable">
                                <Name>ActiveReport</Name>
                                <Id>5ea5d1f8-ae1c-489b-9c2d-246b91e83071</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>0ba0a120-422e-48fb-a239-b62fa34b0704</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>cf007216-8af9-457b-be95-a7e8ccfc64d5</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>8</X>
                                  <Y>36</Y>
                                </Location>
                                <DisplayName>ActiveReport</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>Report</ImplementationType>
                                <InitialValue>null</InitialValue>
                              </anyType>
                              <anyType xsi:type="Variable">
                                <Name>cost</Name>
                                <Id>68bd68b3-8658-4c83-b29b-8f9a2b1ea05b</Id>
                                <Structure xsi:type="VariableStructure">
                                  <Id>d6d85a59-230d-47f3-900b-58eb9de87ccb</Id>
                                  <Types />
                                </Structure>
                                <Text xsi:type="DP_Text">
                                  <Id>82024c1c-78dc-4661-ae33-279f72ede9e9</Id>
                                  <Instructions />
                                </Text>
                                <Size>
                                  <Width>100</Width>
                                  <Height>20</Height>
                                </Size>
                                <Location>
                                  <X>12</X>
                                  <Y>5</Y>
                                </Location>
                                <DisplayName>cost</DisplayName>
                                <NameFont>
                                  <FontFamily>Segoe UI</FontFamily>
                                  <Size>9</Size>
                                  <Style>Regular</Style>
                                </NameFont>
                                <ShapeProperties>
                                  <DefaultSize>
                                    <Width>100</Width>
                                    <Height>60</Height>
                                  </DefaultSize>
                                  <BorderColor>
                                    <Argb>-16777216</Argb>
                                  </BorderColor>
                                  <FillColor>
                                    <Argb>0</Argb>
                                  </FillColor>
                                  <GradientFill>true</GradientFill>
                                  <GradientFillColor>
                                    <Argb>0</Argb>
                                  </GradientFillColor>
                                </ShapeProperties>
                                <ImplementationType>double</ImplementationType>
                                <InitialValue>0.0</InitialValue>
                              </anyType>
                            </Types>
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>96be08c1-8051-4328-b8e6-d1b11a0544f6</Id>
                            <Instructions>
                              <Instruction>
                                <Name>Run</Name>
                                <String>//if active report processed abort

//repair the situation reported
ActiveReport.refSituation.isProcessed = true;
ActiveReport.isProcessed = true;
ReportProcessing.Authority.Reporting.SituationGeneratorList[0].totalAuthorityCost += cost;
ReportProcessing.Authority.Reporting.SituationGeneratorList[0].UnprocessedSituations--;


ReportProcessing.Authority.Reporting.endedInFinalize = true;</String>
                              </Instruction>
                              <Instruction>
                                <Name>Duration</Name>
                                <String>return 0.01;
</String>
                              </Instruction>
                            </Instructions>
                          </Text>
                          <Size>
                            <Width>106</Width>
                            <Height>60</Height>
                          </Size>
                          <Location>
                            <X>238</X>
                            <Y>87</Y>
                          </Location>
                          <DisplayName>RepFinalize</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>-1</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                            <CornerRounding>5</CornerRounding>
                            <Alignment>MiddleCenter</Alignment>
                          </ShapeProperties>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>05360855-988d-4a9a-a381-017d614d5daf</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Startup</Name>
                          <String>int selectedIncentiveScheme = 0; //@SIMPARAM. Appears also in the starup code of IncentiveMechanism. Same variable
IncentiveSchemeSelectedLink = Authority.Reporting.Create("IncentiveSchemeSelected") as IncentiveSchemeSelected;
IncentiveSchemeSelected = Authority.Reporting.IncentiveSchemeList[selectedIncentiveScheme]; //default. But we have more than one in general

//composing incentive schemes:

int sel = (int)Math.Round(CreateP);
switch (sel)
{
	default:
	case 1: //EX1-VAR1
		IncentiveSchemeSelected.mechComposition.Add(12); //the first one to execute
		IncentiveSchemeSelected.mechComposition.Add(1); 
		IncentiveSchemeSelected.mechComposition.Add(11); //the last one to execute;
		break;
	case 2:
		IncentiveSchemeSelected.mechComposition.Add(0); //the first one to execute
		IncentiveSchemeSelected.mechComposition.Add(1);
		IncentiveSchemeSelected.mechComposition.Add(11); //the last one to execute;
		break;
	case 3:
		IncentiveSchemeSelected.mechComposition.Add(0); //the first one to execute
		IncentiveSchemeSelected.mechComposition.Add(2);
		IncentiveSchemeSelected.mechComposition.Add(10); 
		IncentiveSchemeSelected.mechComposition.Add(11); //the last one to execute;
		break;
}
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>353</Width>
                      <Height>219</Height>
                    </Size>
                    <Location>
                      <X>23</X>
                      <Y>21</Y>
                    </Location>
                    <DisplayName>ReportProcessing</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Bold</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <BorderWidth>3</BorderWidth>
                      <FillColor>
                        <Argb>-21</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>TopCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                </Types>
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>0b9eb9a8-8646-4dce-a113-e3e4f030d8b6</Id>
                <Instructions>
                  <Instruction>
                    <Name>Startup</Name>
                    <String>DomainProAnalyst.Instance.Report("Initializing Authority");
</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>389</Width>
                <Height>254</Height>
              </Size>
              <Location>
                <X>588</X>
                <Y>15</Y>
              </Location>
              <DisplayName>Authority</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>10</Size>
                <Style>Bold</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16777216</Argb>
                </BorderColor>
                <BorderWidth>3</BorderWidth>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
              </ShapeProperties>
            </anyType>
            <anyType xsi:type="CollabObject">
              <Name>Duplicates</Name>
              <Id>a5dcb081-a541-4e61-ad19-0b8c9425ddd2</Id>
              <Structure xsi:type="CollabObjectStructure">
                <Id>540477ce-d9b7-48fb-87cc-e53254f43aab</Id>
                <Types>
                  <anyType xsi:type="TriggerDataSet">
                    <Name>DuplicateInfo</Name>
                    <Id>df2557b5-4133-48a5-8aae-43d1c6a0143c</Id>
                    <Structure xsi:type="TriggerDataSetStructure">
                      <Id>d4c72bdd-2916-4bd9-955a-2fd0b19aacf6</Id>
                      <Types>
                        <anyType xsi:type="Variable">
                          <Name>ReportOrig</Name>
                          <Id>bced5db6-337a-4543-9f9e-1608544501f8</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>8384d06a-4aa2-458d-b310-b03ee802a3fe</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>ca7fcc9c-8998-4b06-b5a1-5ba63f807c0b</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>89</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>5</X>
                            <Y>19</Y>
                          </Location>
                          <DisplayName>ReportOrig</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>Report</ImplementationType>
                          <InitialValue>null</InitialValue>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>ReportDupl</Name>
                          <Id>d1168338-98f3-4f41-ac44-027d907aa415</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>d3fa220e-20da-472c-8759-b9028f2cba35</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>cde44c8a-5dd7-4df8-914d-aa07dff6e91a</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>89</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>6</X>
                            <Y>43</Y>
                          </Location>
                          <DisplayName>ReportDupl</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>Report</ImplementationType>
                          <InitialValue>null</InitialValue>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>trueDuplicate</Name>
                          <Id>c0c89982-7be4-46cf-8c76-f980edea4b08</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>6e6166bf-2d0f-46f2-91a3-a9f53f9f3310</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>6a023169-bbea-4ee0-9168-8dc5e62320f1</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>94</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>4</X>
                            <Y>69</Y>
                          </Location>
                          <DisplayName>trueDuplicate</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>bool</ImplementationType>
                          <InitialValue>true</InitialValue>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>detectedBy</Name>
                          <Id>2a7292bf-d7a2-4375-a8c7-1338f2f5b3bf</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>e5ced199-561f-4dc4-b6f4-e9a1aa69ed5d</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>b02d7b0d-3e7f-4c55-a2e5-a2db69231ed1</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>95</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>4</X>
                            <Y>94</Y>
                          </Location>
                          <DisplayName>detectedBy</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>Simulation.ReportingContext.Worker</ImplementationType>
                          <InitialValue>null</InitialValue>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>isProcessed</Name>
                          <Id>f5bb0982-6b06-40bd-9472-a7b896b2dc67</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>5df723da-25cc-47da-9686-f7f1471ce099</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>c7e0f5e2-4071-465a-a668-ea7d191739f9</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>94</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>3</X>
                            <Y>117</Y>
                          </Location>
                          <DisplayName>isProcessed</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>bool</ImplementationType>
                          <InitialValue>false</InitialValue>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>554bac26-f912-407f-89c8-62136631c83f</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Startup</Name>
                          <String />
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>111</Width>
                      <Height>149</Height>
                    </Size>
                    <Location>
                      <X>14</X>
                      <Y>76</Y>
                    </Location>
                    <DisplayName>DuplicateInfo</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="Trigger">
                    <Name>Added</Name>
                    <Id>1cac497d-976c-4014-b941-da1889f4959e</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>a7ce92f8-2bba-4955-b5ae-413ca79d7f5b</Id>
                      <Types>
                        <anyType xsi:type="Variable">
                          <Name>activeDuplicateInfo</Name>
                          <Id>7bf1346d-2ea5-4b5f-ad2b-9108ffd548c0</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>00704a9e-e2bd-41a4-be94-c538a0945f7c</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>fd368fe2-f4d3-40b8-8140-997f565f6d50</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>115</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>7</X>
                            <Y>30</Y>
                          </Location>
                          <DisplayName>activeDuplicateInfo</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>DuplicateInfo</ImplementationType>
                          <InitialValue>null</InitialValue>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>duplicatesFound</Name>
                          <Id>55f078cf-54f9-4f07-aa5f-26a4c83aee97</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>15368537-1078-4d36-bcdf-cb25b8693d6d</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>de29b1ef-c3ab-43c7-a2fa-617841b98a22</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>100</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>8</X>
                            <Y>0</Y>
                          </Location>
                          <DisplayName>duplicatesFound</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>HashSet&lt;Report&gt;</ImplementationType>
                          <InitialValue>new HashSet&lt;Report&gt;()</InitialValue>
                        </anyType>
                        <anyType xsi:type="Variable">
                          <Name>finishedWithThisReport</Name>
                          <Id>09691e47-6e14-4bc3-90ef-23a292af0442</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>33097e7e-626a-49f6-a397-2cf00ffe5e62</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>9ae8c094-27c9-4234-a885-809ae5090732</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>141</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>7</X>
                            <Y>50</Y>
                          </Location>
                          <DisplayName>finishedWithThisReport</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>bool</ImplementationType>
                          <InitialValue>false</InitialValue>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>5e9ed3df-1a7f-4e63-ba88-3082f6d4dbf3</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>Simulation.ReportingContext.DuplicatesContext.DuplicateInfo adinf = activeDuplicateInfo;
System.Diagnostics.Debug.Assert(adinf != null, "DuplicateInfo NULL", "DuplicateInfo NULL"); 

//Add the bidirectional references connecting the original and the duplicate.
//We previously made sure (in Worker.ReportDuplicate) that the newly arriving DuplicateInfo does nor relate two already related reports

adinf.ReportDupl.duplicateOf.Add(adinf.ReportOrig);
adinf.ReportOrig.originalOf.Add(adinf.ReportDupl);

if (adinf.ReportDupl.refSituation == adinf.ReportOrig.refSituation)
	adinf.trueDuplicate = true;
else
	adinf.trueDuplicate = false;

//Now traverse the subtree reachable from adinf.ReportOrig to gather claimed duplicates
processReportNode(adinf.ReportOrig, findClaimedDuplicates);


//int duplicatesThresholdToProcess = 4; //@SIMPARAM

int unprocessedCount = 0;
foreach (Report r in duplicatesFound)
{
	if (!r.isProcessed) unprocessedCount++;
}

finishedWithThisReport = (unprocessedCount &lt;= Duplicates.duplicatesThresholdToProcess); 

if (finishedWithThisReport)
{
	Duplicates.Reporting.endedInIncentivize = true;
	Duplicates.Reporting.endedInFinalize = true;
	Duplicates.Reporting.endedInCalculate = true;
}



} //to close the Run method

delegate bool NodeProcessingLogic(Report node);


bool findClaimedDuplicates(Report node)
{
	if (duplicatesFound.Contains(node)) return false; //already visited duplicates
	duplicatesFound.Add(node);
	return true;
}


void processReportNode(Report r, NodeProcessingLogic process)
{
   if (!process(r)) return; //if already visited, return to break recursion

	foreach (Report child in r.duplicateOf)
	{
		processReportNode(child, process);
	}

	foreach (Report child in r.originalOf)
	{
		processReportNode(child, process);
	}
 }  //end processReportNode
 

 //keep this comment as last line</String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>147</Width>
                      <Height>50</Height>
                    </Size>
                    <Location>
                      <X>12</X>
                      <Y>20</Y>
                    </Location>
                    <DisplayName>Added</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                </Types>
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>d250bc73-d296-4ad4-b03e-6949b1fc3929</Id>
                <Instructions>
                  <Instruction>
                    <Name>Startup</Name>
                    <String />
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>176</Width>
                <Height>234</Height>
              </Size>
              <Location>
                <X>300</X>
                <Y>355</Y>
              </Location>
              <DisplayName>Duplicates</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16776961</Argb>
                </BorderColor>
                <BorderWidth>2</BorderWidth>
                <FillColor>
                  <Argb>-2561</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
                <CornerRounding>5</CornerRounding>
                <Alignment>TopCenter</Alignment>
              </ShapeProperties>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow</Name>
              <Id>80cbd41e-4e88-46a3-b6c6-12921deba9c5</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>c6b90fce-4c1f-4a69-8fa3-ab4f9400571e</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>e1846bba-0398-4981-9313-608c9e755960</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>System.Diagnostics.Debug.Assert(ReportDuplicate.newDup != null, " ReportDuplicate.newDup NULL", "ReportDuplicate.newDup NULL");
return ReportDuplicate.newDup != null;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String>Added.activeDuplicateInfo = ReportDuplicate.newDup;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return ReportDuplicate.Behavior.DuplicatesConn;</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>123</Width>
                <Height>73</Height>
              </Size>
              <Location>
                <X>189</X>
                <Y>322</Y>
              </Location>
              <DisplayName>NewTriggerFlow</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>101</X>
                    <Y>68</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>20</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>4f5f4a2d-e7cb-4bb8-a460-f50029c3f1e0</Role1Id>
              <Role2Id>1cac497d-976c-4014-b941-da1889f4959e</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow1</Name>
              <Id>3313ebe3-c583-4799-b509-21057a8d8bef</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>486b71c9-f7e8-4ca4-b672-9a2adf938b89</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>36a6b809-8d19-4b15-af33-452d5b04f099</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>System.Diagnostics.Debug.Assert(Submit.NewReport != null, "Submit.NewReport NULL", "Submit.NewReport  NULL");
return (Submit.NewReport != null);
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String />
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return Submit.NewReport;</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>65</Width>
                <Height>31</Height>
              </Size>
              <Location>
                <X>245</X>
                <Y>36</Y>
              </Location>
              <DisplayName>NewTriggerFlow1</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>94</X>
                    <Y>18</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>15</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>2941b8d8-5654-4783-99f1-a1143ead265b</Role1Id>
              <Role2Id>d7644b9f-9055-4d1c-8285-d4f1686f908b</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow2</Name>
              <Id>404649fa-f4eb-4e25-b6fb-94fbbe5a9803</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>e64ef307-a946-4325-8fa2-2ca3910ab97b</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>51250981-105e-434c-b1b0-80bdcca20822</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>return true;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String>ImprovedR.activeWorker = Improve.Behavior.Worker;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return Improve.RefReport;</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>103</Width>
                <Height>37</Height>
              </Size>
              <Location>
                <X>208</X>
                <Y>83</Y>
              </Location>
              <DisplayName>NewTriggerFlow2</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>76</X>
                    <Y>0</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>28</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>7338ef4f-f6d3-4aa1-88a1-923165bf375f</Role1Id>
              <Role2Id>cf4f897b-4afa-484f-b08a-6f2cc33a2d5e</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow3</Name>
              <Id>d1ba787a-cb2b-4920-b0da-0adfe3151706</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>525076fc-6c20-4df3-b20b-89afe59a7c30</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>9f5a0913-2a06-4b8b-aecb-966b3034affd</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>return true ;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String>RatedR.activeWorker = Rate.Behavior.Worker;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return Rate.RefReport;</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>115</Width>
                <Height>78</Height>
              </Size>
              <Location>
                <X>193</X>
                <Y>142</Y>
              </Location>
              <DisplayName>NewTriggerFlow3</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>75</X>
                    <Y>27</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>28</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>24e394ca-a8b3-4f57-878b-385e9ed08c91</Role1Id>
              <Role2Id>9e68d5c9-49c2-44cb-bac2-feb65594ca88</Role2Id>
            </anyType>
            <anyType xsi:type="CollabObject">
              <Name>Situation</Name>
              <Id>9e931bff-390e-4b64-ac61-3cd1e5276925</Id>
              <Structure xsi:type="CollabObjectStructure">
                <Id>cc02cb44-c66d-45f3-9c76-ef7e78bf0f1b</Id>
                <Types>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>id</Name>
                    <Id>f75e6a15-7fc7-4e6b-94f0-0c001f0e722a</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>590609f6-f3dd-4251-8a77-db8eff44c05e</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>b7e5ba70-d9b2-4d0e-9ee2-58e4621041f1</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>19</Width>
                      <Height>17</Height>
                    </Size>
                    <Location>
                      <X>11</X>
                      <Y>18</Y>
                    </Location>
                    <DisplayName>id</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>String</ImplementationType>
                    <InitialValue>null</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>severity</Name>
                    <Id>1903cf7c-496d-4a4d-984b-2a7f41eba1cb</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>9531e4b5-f299-4300-b9e7-d757dcef523e</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>9c37aa73-96fb-4e7b-9faf-e97ec7226e28</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>51</Width>
                      <Height>17</Height>
                    </Size>
                    <Location>
                      <X>33</X>
                      <Y>18</Y>
                    </Location>
                    <DisplayName>severity</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>isProcessed</Name>
                    <Id>6f726a5a-15d9-4e4b-bd82-79be8e0459de</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>227d5470-1f47-4590-9add-05028d93e1a9</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>fd66ef40-7bec-47d1-8718-68501e3b9d94</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>69</Width>
                      <Height>18</Height>
                    </Size>
                    <Location>
                      <X>80</X>
                      <Y>43</Y>
                    </Location>
                    <DisplayName>isProcessed</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>bool</ImplementationType>
                    <InitialValue>false</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>location</Name>
                    <Id>ee5d7bae-821b-4fdc-a6e4-bd09a9e9bab1</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>f76856d4-a61c-4020-ba97-9b1917d3788b</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>a644a1df-2aab-468a-9db4-3f1c4b5ed958</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>56</Width>
                      <Height>19</Height>
                    </Size>
                    <Location>
                      <X>12</X>
                      <Y>42</Y>
                    </Location>
                    <DisplayName>location</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>simPhase</Name>
                    <Id>8945c10d-132c-4b84-a144-a3b9cff5b638</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>969a759d-8876-4b6b-9f8b-0b18b7eb3bb9</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>0e754524-430f-46b9-9057-7788a4f75e30</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>64</Width>
                      <Height>19</Height>
                    </Size>
                    <Location>
                      <X>86</X>
                      <Y>19</Y>
                    </Location>
                    <DisplayName>simPhase</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>isReported</Name>
                    <Id>493c0539-c9fe-402c-ad27-7d571cb0168b</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>8f2a97f4-5419-46c6-8251-184c8c803f4f</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>e352c11a-093c-448f-abc1-0cbe6f4a7fe5</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>73</Width>
                      <Height>24</Height>
                    </Size>
                    <Location>
                      <X>79</X>
                      <Y>66</Y>
                    </Location>
                    <DisplayName>isReported</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>bool</ImplementationType>
                    <InitialValue>false</InitialValue>
                  </anyType>
                </Types>
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>caa55690-2530-4cbc-b128-d69ff0566342</Id>
                <Instructions>
                  <Instruction>
                    <Name>Startup</Name>
                    <String />
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>160</Width>
                <Height>85</Height>
              </Size>
              <Location>
                <X>821</X>
                <Y>359</Y>
              </Location>
              <DisplayName>Situation</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16776961</Argb>
                </BorderColor>
                <BorderWidth>2</BorderWidth>
                <FillColor>
                  <Argb>-2561</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
                <CornerRounding>5</CornerRounding>
                <Alignment>TopCenter</Alignment>
              </ShapeProperties>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow5</Name>
              <Id>adb2c735-4b04-4b04-9432-db47fa6c302c</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>d4017487-2bed-4f89-a5f5-a3b089d405e5</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>5ed3b333-294b-43f6-a82b-9466b3a3442b</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>return !Added.finishedWithThisReport;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String>ProcessDuplicateAlerts.duplicatesFound = Added.duplicatesFound;
ProcessDuplicateAlerts.activeReport = Added.activeDuplicateInfo.ReportOrig;
ProcessDuplicateAlerts.activeWorker = Added.activeDuplicateInfo.detectedBy;
ProcessDuplicateAlerts.activeDupInf = Added.activeDuplicateInfo;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return Added.Duplicates.Reporting.AuthorityList[0].ReportProcessingList[0];</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>169</Width>
                <Height>318</Height>
              </Size>
              <Location>
                <X>459</X>
                <Y>79</Y>
              </Location>
              <DisplayName>NewTriggerFlow5</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>147</X>
                    <Y>22</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>25</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>1cac497d-976c-4014-b941-da1889f4959e</Role1Id>
              <Role2Id>8d4aa3c1-f666-465d-9060-7a58c2802ee2</Role2Id>
            </anyType>
            <anyType xsi:type="CollabObject">
              <Name>SituationGenerator</Name>
              <Id>0a3d5a1a-7daa-4bee-adfd-92aca7166cef</Id>
              <Structure xsi:type="CollabObjectStructure">
                <Id>6326134b-714e-49ce-92b4-205706edb942</Id>
                <Types>
                  <anyType xsi:type="Trigger">
                    <Name>CreateSituations</Name>
                    <Id>09e271f7-c22b-46bd-b209-319dae05af4d</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>2690ee9f-5c50-4f15-9299-e3909df33bbe</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>cbeef561-b8ee-40c6-8e7b-657d1542300d</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>// int situationsToCreatePerPhase = 10; //@SIMPARAM

SituationGenerator.SimPhase++;
for (int i = 0; i&lt;SituationGenerator.situationsToCreatePerPhase; i++)
{
	Situation s = SituationGenerator.Reporting.Create("Situation") as Situation;
	s.id = "SituationS"+SituationGenerator.SimPhase+"E"+i;
	s.simPhase = SituationGenerator.SimPhase;
	s.location = Random.Uniform();
	s.severity = Random.Uniform(); //If severity scope is changed, also update InitialValue for EWMAReportScore and flow condition from PreprocessingReport to ProcessReport
	SituationGenerator.UnprocessedSituations++;
}

// increase malicious users each X phases but not on the first one
//if (SituationGenerator.SimPhase == 1) return;
/*
if ((SituationGenerator.SimPhase-1)%10 == 0)
{
DomainProAnalyst.Instance.Report("Increasing Malicious User at before phase: "+SituationGenerator.SimPhase+" at:"+Model.Simulation.Simulator.Scheduler.Time );

	int wcount = 0;	
	foreach (DP_StartInstance si in Model.Simulation.StartInstances)
	{
		if (si.Type == "Reporting")
		{
			foreach (DP_StartInstance j in si.Instances) 
			{	
			if (j.Type == "Worker")
			{
				wcount = j.Count;
				break;
			}}
		}
	}
/**/
// increase by 20% malicious users
/*
	int i = 0;
	double limit = (SituationGenerator.SimPhase-1) * 0.02 * wcount;
System.Diagnostics.Debug.Assert(limit &gt; 0, "Limit ="+limit , "Simphase: "+SituationGenerator.SimPhase);
	foreach(Worker w in SituationGenerator.Reporting.WorkerList)
	{
		w.Karma = 0.5;
		w.points = 0;		
		if (i &lt; limit)
		{
			w.profile = 2;
		}	
		i++;
	}
}
/**/



</String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0.01;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>110</Width>
                      <Height>40</Height>
                    </Size>
                    <Location>
                      <X>38</X>
                      <Y>108</Y>
                    </Location>
                    <DisplayName>CreateSituations</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="Trigger">
                    <Name>Timer</Name>
                    <Id>cfcb9ca1-a9bf-4b99-92dc-21f7d31f6ad1</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>2844e989-4122-4ef6-9c8d-f51724036be2</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>93ea092b-da08-4d22-9c57-7ec189d3ad8e</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String />
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return SituationGenerator.phaseDuration;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>64</Width>
                      <Height>40</Height>
                    </Size>
                    <Location>
                      <X>23</X>
                      <Y>16</Y>
                    </Location>
                    <DisplayName>Timer</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="IntraTriggerFlow">
                    <Name>NewIntraTriggerFlow</Name>
                    <Id>dc87cb5f-d34e-4898-bf59-a6414d3e529d</Id>
                    <Structure xsi:type="IntraTriggerFlowStructure">
                      <Id>e1033826-7f18-4ea9-b7d3-c05198f51413</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>2fffa6ab-0dad-486f-9943-bcf1bcbd9242</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>return true;
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String />
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return Context;</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>14</Width>
                      <Height>52</Height>
                    </Size>
                    <Location>
                      <X>45</X>
                      <Y>56</Y>
                    </Location>
                    <DisplayName>NewIntraTriggerFlow</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <FillStyle>Dot</FillStyle>
                      <FillColor>
                        <Argb>-8388480</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>21</X>
                          <Y>0</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>22</X>
                          <Y>40</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>09e271f7-c22b-46bd-b209-319dae05af4d</Role1Id>
                    <Role2Id>cfcb9ca1-a9bf-4b99-92dc-21f7d31f6ad1</Role2Id>
                  </anyType>
                  <anyType xsi:type="IntraTriggerFlow">
                    <Name>NewIntraTriggerFlow1</Name>
                    <Id>3ea398d9-0e54-4454-9e44-916390c31bb3</Id>
                    <Structure xsi:type="IntraTriggerFlowStructure">
                      <Id>2c8af7ab-5341-4386-83cd-e3e59c425fdc</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>e192d653-0cbf-46b4-ae25-77ee296a52e2</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>return true;
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String />
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return Context;</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>45</Width>
                      <Height>6</Height>
                    </Size>
                    <Location>
                      <X>87</X>
                      <Y>36</Y>
                    </Location>
                    <DisplayName>NewIntraTriggerFlow1</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <FillStyle>Dot</FillStyle>
                      <FillColor>
                        <Argb>-8388480</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>64</X>
                          <Y>20</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>0</X>
                          <Y>18</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>cfcb9ca1-a9bf-4b99-92dc-21f7d31f6ad1</Role1Id>
                    <Role2Id>0ff872cd-e3ab-422d-8b12-eb196f00bf40</Role2Id>
                  </anyType>
                  <anyType xsi:type="Trigger">
                    <Name>CleanUpAndStats</Name>
                    <Id>0ff872cd-e3ab-422d-8b12-eb196f00bf40</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>88a1bce1-ce16-465d-89aa-1111d7b3e275</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>53d64348-b6b4-45fb-97ed-c94e2145dcee</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>// remove reported situations
int sDone = 0;
double sevDone = 0.0;
double sevOpen = 0.0;
for (int i = SituationGenerator.Reporting.SituationList.Count-1; i &gt;= 0; i--)
{
	if (SituationGenerator.Reporting.SituationList[i].isProcessed)
	{		
		sDone++;
		sevDone += SituationGenerator.Reporting.SituationList[i].severity;
		SituationGenerator.Reporting.SituationList.RemoveAt(i);		
	}
	else
	{
		sevOpen += SituationGenerator.Reporting.SituationList[i].severity;
	}
}

if (sDone &gt; 0)
{
	SituationGenerator.SituationsProcessed = sDone;
	SituationGenerator.SeverityAddressed = sevDone/sDone;
	SituationGenerator.AuthorityPhaseCost = SituationGenerator.totalAuthorityCost/sDone;
}
SituationGenerator.totalAuthorityCost = 0.0;

if (SituationGenerator.UnprocessedSituations &gt; 0)
{
	SituationGenerator.SeverityOpen = sevOpen/SituationGenerator.UnprocessedSituations;
}

//ogi - we should not remove processed reports, because we allow falsely (on purpose or by error)
// declared duplicates. Therefore, we have a graph of reports pointing to one another. If we
// remove reports, we will be breaking this structure, or we would need to rechain.  
// Although, this will cause traversal times to increase, I think it makes sense to leave them for now.
// because we always traverse the ReportList and first check if Report.isProcessed, and that is
// a very fast operation, so hopefully it should not be that problematic.
int reported = 0;
int doubles = 0;
double scoreSum = 0.0;
double corrSum = 0.0;
int countR = SituationGenerator.Reporting.ReportList.Count;
for (int i = countR-1; i &gt;= 0; i--)
{
	if (SituationGenerator.Reporting.ReportList[i].isProcessed)
	{	
		if (SituationGenerator.Reporting.ReportList[i].isDuplicate)
		{
			doubles++;
		}
		else
		{
			reported++;
			scoreSum += SituationGenerator.Reporting.ReportList[i].importance;
			corrSum += SituationGenerator.Reporting.ReportList[i].accuracy;
		}
	//SituationGenerator.Reporting.ReportList.RemoveAt(i);
	}
}
SituationGenerator.ReportsProcessed = reported;
SituationGenerator.DuplicatesFound = doubles;


double prevScore = SituationGenerator.EWMAReportScore;
double alpha = 0.1;
if (reported &gt; 0)
{
	SituationGenerator.EWMAReportScore = (alpha * (scoreSum/reported) ) + ((1-alpha)*prevScore);
	SituationGenerator.PhaseAvgReportCorr = corrSum/reported;
}

int situationCleanupThreshold = 2; // delete all situations more than X phases ago
int delSit = SituationGenerator.SimPhase - situationCleanupThreshold;

//we remove only old situations nobody reported so far.
int unreported = 0;
double unrepSev = 0.0;
for (int i = SituationGenerator.Reporting.SituationList.Count-1; i &gt;= 0; i--)
{
	Situation sit = SituationGenerator.Reporting.SituationList[i];
	if (sit.simPhase &lt;= delSit)
	{		
		if (!sit.isReported)
		{				
			unreported++;
			unrepSev += sit.severity;
		}		
		// old situation, that have been reported but not processed: thus set to processed to avoid becoming subject to worker activity ever again
		sit.isProcessed = true;			
		SituationGenerator.Reporting.SituationList.RemoveAt(i);		
	}
}
if (unreported &gt; 0)
{
	SituationGenerator.UnreportedOldSituation = unreported;
	SituationGenerator.UnreportedOldSitSeverity = unrepSev/unreported;
}

double malicious = 0.0;
double malPoints = 0.0;
double nonmalicious = 0.0;
double nonmalPoints = 0.0;
double countM = 0;
double countNM = 0;
foreach(Worker w in SituationGenerator.Reporting.WorkerList)
{
	if (w.profile == 2)
	{
		malicious += w.Karma;
		malPoints += w.points;
		countM++;
	}
	else
	{
		nonmalicious += w.Karma;
		nonmalPoints += w.points;
		countNM++;
	}
}
if (countM &gt; 0)
{
	SituationGenerator.avgPhaseKarmaMalicious = malicious/countM;
	SituationGenerator.avgPhasePointsMalicious = malPoints/countM;
}
if (countNM &gt; 0)
{
	SituationGenerator.avgPhaseKarmaNonMalicious = nonmalicious/countNM;
	SituationGenerator.avgPhasePointsNonMalicious = nonmalPoints/countNM;
}

</String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0.99;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>110</Width>
                      <Height>40</Height>
                    </Size>
                    <Location>
                      <X>132</X>
                      <Y>24</Y>
                    </Location>
                    <DisplayName>CleanUpAndStats</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="IntraTriggerFlow">
                    <Name>NewIntraTriggerFlow2</Name>
                    <Id>60b0a687-f824-453c-9c95-b13064c8bd40</Id>
                    <Structure xsi:type="IntraTriggerFlowStructure">
                      <Id>bdddb78a-39d7-48ca-a475-8e0251acee85</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>5532bad4-6605-420b-b7fe-661c10d4f84f</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>return true;
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String />
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return Context;</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>59</Width>
                      <Height>44</Height>
                    </Size>
                    <Location>
                      <X>110</X>
                      <Y>64</Y>
                    </Location>
                    <DisplayName>NewIntraTriggerFlow2</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <FillStyle>Dot</FillStyle>
                      <FillColor>
                        <Argb>-8388480</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>37</X>
                          <Y>40</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>72</X>
                          <Y>0</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>0ff872cd-e3ab-422d-8b12-eb196f00bf40</Role1Id>
                    <Role2Id>09e271f7-c22b-46bd-b209-319dae05af4d</Role2Id>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>DuplicatesFound</Name>
                    <Id>3b1276f5-c869-4c68-9081-61615d82e013</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>e14e6d94-ab2c-4e80-a1b6-8dd53a60f167</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>38134441-abea-4643-9d94-f2c1fd118b62</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>100</Width>
                      <Height>23</Height>
                    </Size>
                    <Location>
                      <X>312</X>
                      <Y>20</Y>
                    </Location>
                    <DisplayName>DuplicatesFound</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>ReportsProcessed</Name>
                    <Id>84fb5e55-0bef-4de7-8dee-093d9fb52b18</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>d80dcc7b-e090-49d6-b69e-f180280e7460</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>c6317d64-2785-4c57-b9d6-1d62457edff2</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>108</Width>
                      <Height>23</Height>
                    </Size>
                    <Location>
                      <X>309</X>
                      <Y>47</Y>
                    </Location>
                    <DisplayName>ReportsProcessed</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>SituationsProcessed</Name>
                    <Id>15f69dff-3a31-46a8-b462-bfcad3b6cb54</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>3097fe9b-7d63-492f-b1cc-ee688115ff21</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>25427426-dd9a-4729-8110-38f4428e2580</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>118</Width>
                      <Height>23</Height>
                    </Size>
                    <Location>
                      <X>304</X>
                      <Y>72</Y>
                    </Location>
                    <DisplayName>SituationsProcessed</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>SeverityAddressed</Name>
                    <Id>46c2d5ab-ba85-4da1-b38d-264f6a5018e7</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>3a5f10a8-ae26-44e5-8783-947afe7cc909</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>a65bdbce-04be-4bdb-ad5f-d69d1731a546</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>108</Width>
                      <Height>24</Height>
                    </Size>
                    <Location>
                      <X>306</X>
                      <Y>97</Y>
                    </Location>
                    <DisplayName>SeverityAddressed</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>SeverityOpen</Name>
                    <Id>5bc2493a-bf36-4ad5-8dfd-1a85d4a2e159</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>f7dda59e-2afb-4e5d-9fdb-d1551199a80f</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>dfa7b5cb-20d5-43a4-8dce-7fd28432a6ef</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>108</Width>
                      <Height>24</Height>
                    </Size>
                    <Location>
                      <X>304</X>
                      <Y>124</Y>
                    </Location>
                    <DisplayName>SeverityOpen</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>EWMAReportScore</Name>
                    <Id>fc193fd6-1241-41bc-9edf-7ee60f1f0c22</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>4ba655ef-fd11-4cce-8578-bdf6e82c7f0a</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>e9c35f47-d34f-41c1-8dc1-c1475e7308ff</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>113</Width>
                      <Height>22</Height>
                    </Size>
                    <Location>
                      <X>301</X>
                      <Y>155</Y>
                    </Location>
                    <DisplayName>EWMAReportScore</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.5</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>PhaseAvgReportCorr</Name>
                    <Id>ec5f9f16-1326-458a-a8a0-c69b703a5434</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>34f2d574-5283-417e-a673-e055c12236df</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>e93c0844-89f8-4def-be16-7af6f34aae27</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>122</Width>
                      <Height>22</Height>
                    </Size>
                    <Location>
                      <X>291</X>
                      <Y>182</Y>
                    </Location>
                    <DisplayName>PhaseAvgReportCorr</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.5</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>SimPhase</Name>
                    <Id>615bdd94-b876-4651-a251-988fa46deb1d</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>ef5bed80-4df5-42d8-b62b-b5e3a2ba8880</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>ff6d9ec9-d532-4ce2-b934-6caa41700ec7</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>100</Width>
                      <Height>19</Height>
                    </Size>
                    <Location>
                      <X>158</X>
                      <Y>132</Y>
                    </Location>
                    <DisplayName>SimPhase</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>UnreportedOldSituation</Name>
                    <Id>c75d3c2d-f477-495a-86af-4138e243022c</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>d34d8dac-9a7b-4a2d-ad7a-c3d36cb780ac</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>806b7955-e0a9-46c1-b4d5-5c6550ae6701</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>92</Width>
                      <Height>34</Height>
                    </Size>
                    <Location>
                      <X>444</X>
                      <Y>19</Y>
                    </Location>
                    <DisplayName>UnreportedOldSituation</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>UnreportedOldSitSeverity</Name>
                    <Id>d0f10fd1-d23d-45e3-ae31-0998b381e1ea</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>e27f09cb-7bc7-415f-86e2-34b875fd085e</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>3ca2ca41-b332-4d74-8c24-421ded98fb4b</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>92</Width>
                      <Height>34</Height>
                    </Size>
                    <Location>
                      <X>441</X>
                      <Y>66</Y>
                    </Location>
                    <DisplayName>UnreportedOldSitSeverity</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>totalAuthorityCost</Name>
                    <Id>8d5aefeb-8f85-4b88-98b5-ec6ef65b4076</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>a6af8663-11de-431b-8ceb-3ef5b336a72a</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>2557c11c-ae50-43e9-ba97-946d92aef2ec</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>118</Width>
                      <Height>22</Height>
                    </Size>
                    <Location>
                      <X>457</X>
                      <Y>120</Y>
                    </Location>
                    <DisplayName>totalAuthorityCost</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>UnprocessedSituations</Name>
                    <Id>2866f6b4-4ecb-4f0d-96c5-9be0b4ac9c25</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>ae4e7524-2ef2-4dd8-a4a8-c607230126cd</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>f6d61b3d-6bf4-4f4b-a2c8-2b8fadd8ad53</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>127</Width>
                      <Height>18</Height>
                    </Size>
                    <Location>
                      <X>449</X>
                      <Y>155</Y>
                    </Location>
                    <DisplayName>UnprocessedSituations</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>AuthorityPhaseCost</Name>
                    <Id>b184c4eb-db8e-4211-986f-c69d5868c7f3</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>d2bc7179-e267-4eb8-a705-a06294d2946e</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>55d42ba5-3542-4ad0-acf8-50793900e5ad</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>130</Width>
                      <Height>23</Height>
                    </Size>
                    <Location>
                      <X>449</X>
                      <Y>180</Y>
                    </Location>
                    <DisplayName>AuthorityPhaseCost</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>TrueDuplicateAlertsFound</Name>
                    <Id>02d3b4f2-afc2-409c-9a89-bdd045b1d807</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>511421ca-01be-40af-99db-47dd0dab042b</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>30f3680f-ca82-42b6-a79c-87aa7e746ca9</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>165</Width>
                      <Height>21</Height>
                    </Size>
                    <Location>
                      <X>289</X>
                      <Y>215</Y>
                    </Location>
                    <DisplayName>TrueDuplicateAlertsFound</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>FalseDuplicateAlertsFound</Name>
                    <Id>66b3c395-579d-4676-bb9e-46aab76c24ae</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>1132f997-6599-4e54-9cd8-9865332c8b54</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>34fa5dfc-6d27-41af-967a-7080d5634e4b</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>165</Width>
                      <Height>21</Height>
                    </Size>
                    <Location>
                      <X>287</X>
                      <Y>237</Y>
                    </Location>
                    <DisplayName>FalseDuplicateAlertsFound</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>DuplicateReportsMissed</Name>
                    <Id>cd790e8d-3b1a-4b60-8447-d253a7688b8d</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>4aadbbe7-2902-4352-9baa-40d7f49cc694</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>a883b1b0-d84a-4d18-a1cb-7f8663a2411f</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>165</Width>
                      <Height>21</Height>
                    </Size>
                    <Location>
                      <X>290</X>
                      <Y>262</Y>
                    </Location>
                    <DisplayName>DuplicateReportsMissed</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>AccuracyCost</Name>
                    <Id>7c2873d7-6158-4f00-8601-121b83af8399</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>4656cfdf-34da-4514-ac0c-f2bdb017b404</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>69312439-f474-481f-bfea-5ca5258fecea</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>130</Width>
                      <Height>23</Height>
                    </Size>
                    <Location>
                      <X>469</X>
                      <Y>215</Y>
                    </Location>
                    <DisplayName>AccuracyCost</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>avgPhaseKarmaNonMalicious</Name>
                    <Id>5f437b02-832e-4e9a-9925-e324691b7103</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>3d6ec3bb-4ce1-4c9b-b213-fc4b35d17c86</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>647ecb2a-2f8a-40ce-a080-f7623257da7b</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>179</Width>
                      <Height>23</Height>
                    </Size>
                    <Location>
                      <X>81</X>
                      <Y>171</Y>
                    </Location>
                    <DisplayName>avgPhaseKarmaNonMalicious</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>avgPhaseKarmaMalicious</Name>
                    <Id>3f26f356-e506-4145-92d9-05ac1e0c99c6</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>f9b5047d-89ca-4a74-bc56-50bbb560e6fe</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>a565b21f-dc2a-42d0-8fb0-9086479fa3a7</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>179</Width>
                      <Height>23</Height>
                    </Size>
                    <Location>
                      <X>77</X>
                      <Y>197</Y>
                    </Location>
                    <DisplayName>avgPhaseKarmaMalicious</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="Trigger">
                    <Name>SetupWorkers</Name>
                    <Id>a54956bd-a718-47c9-8609-f3f0436ce477</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>41dc88c9-c75b-4ec3-87ae-ad9209d195fe</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>d8ee299e-57bc-4df9-8474-d77a0c1a69a5</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>DomainProAnalyst.Instance.Report("Setting Malicious User Amount:"+ SituationGenerator.improvementInfluence );

int wcount = 0;	
foreach (DP_StartInstance si in Model.Simulation.StartInstances)
{
	if (si.Type == "Reporting")
	{
		foreach (DP_StartInstance j in si.Instances) 
		{	
		if (j.Type == "Worker")
		{
			wcount = j.Count;
			break;
		}}
	}
}

int i = 0;
double limit = SituationGenerator.improvementInfluence * wcount;
System.Diagnostics.Debug.Assert(limit &gt; 0, "Limit ="+limit , "Simphase: "+SituationGenerator.SimPhase);
foreach(Worker w in SituationGenerator.Reporting.WorkerList)
{
	w.Karma = 0.5;
	w.points = 0;		
	if (i &lt; limit)
	{
		w.profile = 2;
	}	
	i++;
}
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>110</Width>
                      <Height>40</Height>
                    </Size>
                    <Location>
                      <X>23</X>
                      <Y>236</Y>
                    </Location>
                    <DisplayName>SetupWorkers</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="IntraTriggerFlow">
                    <Name>NewIntraTriggerFlow3</Name>
                    <Id>099342a0-4f95-448e-b727-ac136e2f60d2</Id>
                    <Structure xsi:type="IntraTriggerFlowStructure">
                      <Id>1b7896b7-ecc1-48ae-949d-14aa02f0f7f4</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>47676e9c-9b6e-42c0-bcfe-6dc37a83c0bb</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>return true;
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String />
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return Context;</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>4</Width>
                      <Height>88</Height>
                    </Size>
                    <Location>
                      <X>60</X>
                      <Y>148</Y>
                    </Location>
                    <DisplayName>NewIntraTriggerFlow3</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <FillStyle>Dot</FillStyle>
                      <FillColor>
                        <Argb>-8388480</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>41</X>
                          <Y>0</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>22</X>
                          <Y>40</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>a54956bd-a718-47c9-8609-f3f0436ce477</Role1Id>
                    <Role2Id>09e271f7-c22b-46bd-b209-319dae05af4d</Role2Id>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>avgPhasePointsMalicious</Name>
                    <Id>b6c9d141-7133-429a-90a1-2722503a93fb</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>30765341-7057-4dad-8ff5-362a69d610a9</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>d858bef6-a40a-4c5d-ac3d-72a871ab81a9</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>177</Width>
                      <Height>24</Height>
                    </Size>
                    <Location>
                      <X>136</X>
                      <Y>270</Y>
                    </Location>
                    <DisplayName>avgPhasePointsMalicious</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectMetadata">
                    <Name>avgPhasePointsNonMalicious</Name>
                    <Id>f6812f39-6dd9-42d9-929f-6cb4b050ba79</Id>
                    <Structure xsi:type="ObjectMetadataStructure">
                      <Id>c63cb245-2b64-44b3-a533-6d7a1edd2728</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>5c13949f-d813-4aa1-b208-58c0c95438f2</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>174</Width>
                      <Height>24</Height>
                    </Size>
                    <Location>
                      <X>135</X>
                      <Y>296</Y>
                    </Location>
                    <DisplayName>avgPhasePointsNonMalicious</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                </Types>
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>a8653eb6-ee19-426d-8b44-0397ace70a32</Id>
                <Instructions>
                  <Instruction>
                    <Name>Startup</Name>
                    <String>DomainProAnalyst.Instance.Report("Starting Situation Generator");
</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>577</Width>
                <Height>339</Height>
              </Size>
              <Location>
                <X>512</X>
                <Y>496</Y>
              </Location>
              <DisplayName>SituationGenerator</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16776961</Argb>
                </BorderColor>
                <BorderWidth>2</BorderWidth>
                <FillColor>
                  <Argb>-2561</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
                <CornerRounding>5</CornerRounding>
                <Alignment>TopCenter</Alignment>
              </ShapeProperties>
              <improvementInfluence>0</improvementInfluence>
            </anyType>
            <anyType xsi:type="FocusOnObjConn">
              <Name>DuplicatesConn</Name>
              <Id>e93e35ea-07a9-42d7-8ccc-9ffbe8f24053</Id>
              <Structure xsi:type="FocusOnObjConnStructure">
                <Id>eb9e25a2-d77d-46a2-bfb1-8df31ef560e3</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>14fe6964-209c-4ae8-a231-0341622b9466</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>42</Width>
                <Height>64</Height>
              </Size>
              <Location>
                <X>258</X>
                <Y>291</Y>
              </Location>
              <DisplayName>DuplicatesConn</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <BorderColor>
                  <Argb>-4177920</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>232</X>
                    <Y>270</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>444f3e18-0d26-43aa-a79a-ea1ca3305010</Role1Id>
              <Role2Id>a5dcb081-a541-4e61-ad19-0b8c9425ddd2</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow6</Name>
              <Id>3b3387c3-6cd4-4787-a584-b5b3f5f1a2b9</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>483153fa-6a4b-476c-85c3-3f5929b1dd3b</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>3c41aa7c-76f3-4f25-9b4c-7c71844b06be</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>return true;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String>System.Diagnostics.Debug.Assert(RatedR.activeWorker != null, "activeWorker NULL", "activeWorker NULL");
Incentivize.actionPerformed = 3; //we rated
Incentivize.ActiveReport = RatedR.Report;
Incentivize.activeWorker = RatedR.activeWorker;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return RatedR.Report.Reporting.AuthorityList[0].ReportProcessingList[0];</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>215</Width>
                <Height>35</Height>
              </Size>
              <Location>
                <X>418</X>
                <Y>144</Y>
              </Location>
              <DisplayName>NewTriggerFlow6</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>110</X>
                    <Y>30</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>9e68d5c9-49c2-44cb-bac2-feb65594ca88</Role1Id>
              <Role2Id>669a3aea-622e-4c71-8695-d9b2a6886b28</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow7</Name>
              <Id>d00fb96f-1c88-470f-b8d0-04fb24383585</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>584bfd12-ceaa-4640-9afa-48aac60dc4ad</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>c0db9529-3f6d-46b4-9e41-522cc5322c7b</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>return true;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String>System.Diagnostics.Debug.Assert(ImprovedR.activeWorker != null, "activeWorker NULL", "activeWorker NULL");
Incentivize.actionPerformed = 2; //we improved
Incentivize.ActiveReport = ImprovedR.Report;
Incentivize.activeWorker = ImprovedR.activeWorker;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return ImprovedR.Report.Reporting.AuthorityList[0].ReportProcessingList[0];
</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>212</Width>
                <Height>109</Height>
              </Size>
              <Location>
                <X>421</X>
                <Y>70</Y>
              </Location>
              <DisplayName>NewTriggerFlow7</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>110</X>
                    <Y>15</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>cf4f897b-4afa-484f-b08a-6f2cc33a2d5e</Role1Id>
              <Role2Id>669a3aea-622e-4c71-8695-d9b2a6886b28</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow8</Name>
              <Id>ba114e92-d182-4c26-a6ac-5b1fb861a3ed</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>d0233163-0ddf-49bd-ad54-893226a3548b</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>6624e7f9-2b4f-42a2-a06e-03a4d60b3dd0</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>return true;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String>System.Diagnostics.Debug.Assert(CreatedR.Report.createdBy != null, "activeWorker NULL", "activeWorker NULL");
Incentivize.actionPerformed = 1; //we submitted
Incentivize.ActiveReport = CreatedR.Report;
Incentivize.activeWorker = CreatedR.Report.createdBy;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return CreatedR.Report.Reporting.AuthorityList[0].ReportProcessingList[0];</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>213</Width>
                <Height>143</Height>
              </Size>
              <Location>
                <X>420</X>
                <Y>36</Y>
              </Location>
              <DisplayName>NewTriggerFlow8</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>110</X>
                    <Y>15</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>d7644b9f-9055-4d1c-8285-d4f1686f908b</Role1Id>
              <Role2Id>669a3aea-622e-4c71-8695-d9b2a6886b28</Role2Id>
            </anyType>
            <anyType xsi:type="CollabObject">
              <Name>IncentiveMechanism</Name>
              <Id>5f6c8242-d16f-4b59-91a3-8d1b046c42d6</Id>
              <Structure xsi:type="CollabObjectStructure">
                <Id>902a7fc4-5869-4801-bbd1-3ae18923b164</Id>
                <Types>
                  <anyType xsi:type="Trigger">
                    <Name>Calculate</Name>
                    <Id>b11a179a-2792-4b68-87a0-1abcbd368a4f</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>80434c50-4e6f-4598-985e-0bf528c40f47</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>26362272-a9f1-44cf-b315-77c38be6811c</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>//ugly, but for the purposes of this simulation it should do the work.
//Incentive Mechanism composition is performed in Reporting.Startup()
switch (IncentiveMechanism.incMechId)
{
	default:
	case 0:
		IncentiveMechanism0(); 
		break;
	case 1:
		IncentiveMechanism1();
		break;
	case 2:
		IncentiveMechanism2();
		break;
	case 3:
		IncentiveMechanism3(); 
		break;
	case 4:
		IncentiveMechanism4();
		break;
	case 5:
		IncentiveMechanism5();
		break;
	case 6:
		IncentiveMechanism6(); 
		break;
	case 7:
		IncentiveMechanism7();
		break;
	case 8:
		IncentiveMechanism8();
		break;
	case 9:
		IncentiveMechanism9();
		break;
	case 10:
		IncentiveMechanism10();
		break;
	case 11:
		IncentiveMechanism11();
		break;
}

}//closing Run() method

int M = 100; //multiplier to map [0,1] -&gt; [0,100] for points

//Set the base values for improvementReward and ratingReward. This mechanism should be applied in composition
//AFTER the Worker has been rewarded, because for rewarding the user we need to take into account promised rewards before
//this method calculates the new ones, this time based on the accuracy and the importance which already takes into account also
//that user's contribution.
//Also, after this mechanism, you can apply IncentiveMechanism9(), to lower, and even annul the rewards if we gathered enough votes/improvements
void IncentiveMechanism0() 
{
	//set ratingReward and improvement reward in the ActiveReport
	//assign the Worker karma and points, based on the action performed, state of the ActiveReport, and his current karma.
	Report r = IncentiveMechanism.OwnerScheme.ActiveReport;
	
	//favor low-ranked and high-ranked, because it may be the case that they are wrongly rated on purpose
	r.ratingReward = Math.Max(1 + M * r.importance, 1 + M * (1 - r.importance)); 
	
	//Let's say that in principle we value higher for 20% improvement than rating. However, we will later make reputable users prefer rating.
	r.improvementReward = 1 + 1.2 * M * (1 - r.accuracy); //the more accurate the less improvement needed, the lower the reward
		
}

//calculate fixed amounts of points to the users
//#local
void IncentiveMechanism1()
{
	switch (IncentiveMechanism.OwnerScheme.actionPerformed)
	{
		case 1: //submit
			IncentiveMechanism.OwnerScheme.localPoints += M / 4;
			break;
		case 2: //improve accuracy
			IncentiveMechanism.OwnerScheme.localPoints += M / 3;
			break;
		case 3: //rate
			IncentiveMechanism.OwnerScheme.localPoints += M / 5;
			break;
		case 4: //submitted a dupl. report
			IncentiveMechanism.OwnerScheme.localPoints += M / 4.5;
			break;
		default:
			break;
	}
	
}

//calculate fixed amount points for submission and duplicate reports
//but depending on promised rewards for the other 2 actions
//#local
void IncentiveMechanism2()
{
	Report r = IncentiveMechanism.OwnerScheme.ActiveReport;
	switch (IncentiveMechanism.OwnerScheme.actionPerformed)
	{
		case 1: //submit
			IncentiveMechanism.OwnerScheme.localPoints += M / 4;
			break;
		case 2: //improve accuracy
			IncentiveMechanism.OwnerScheme.localPoints += r.improvementReward;
			break;
		case 3: //rate
			IncentiveMechanism.OwnerScheme.localPoints += r.ratingReward;
			break;
		case 4: //submitted a dupl. report
			IncentiveMechanism.OwnerScheme.localPoints += M / 4.5;
			break;
		default:
			break;
	}
}

//limit number of actions.
int maxNumberOfActions = 10; //@SIMPARAM
void IncentiveMechanism3()
{
	Worker w = IncentiveMechanism.OwnerScheme.ActiveWorker;
	int previousActions = 0;
	switch (IncentiveMechanism.OwnerScheme.actionPerformed)
	{
		case 1: //submit
			foreach (Report rpt in IncentiveMechanism.Reporting.ReportList)
			{
				if (rpt.createdBy == w) previousActions++;
			}
			if (previousActions &gt;= maxNumberOfActions) w.banned = true;
			break;
		case 2: //improve accuracy
			foreach (Report rpt in IncentiveMechanism.Reporting.ReportList)
			{
				foreach (var ui in rpt.UpdateInfoList)
				{
					if (ui.ImprovedBy == w) previousActions++;
				}
			}
			if (previousActions &gt;= maxNumberOfActions) w.banned = true;
			break;
		case 3: //rate
			foreach (Report rpt in IncentiveMechanism.Reporting.ReportList)
			{
				foreach (var ri in rpt.RatingInfoList)
				{
					if (ri.RatedBy == w) previousActions++;
				}
			}
			if (previousActions &gt;= maxNumberOfActions) w.banned = true;
			break;
		case 4: //submitted a dupl. report
			foreach (var di in IncentiveMechanism.Reporting.DuplicatesList[0].DuplicateInfoList)
			{
					if (di.detectedBy == w) previousActions++;
			}
			if (previousActions &gt;= maxNumberOfActions) w.banned = true;
			break;
			
		default:
			break;
	}
}

//modify local points by linearly multiplying with Karma
//#local
void IncentiveMechanism4()
{
	Worker w = IncentiveMechanism.OwnerScheme.ActiveWorker;
	IncentiveMechanism.OwnerScheme.localPoints *= w.Karma;
}

//award novices with acceptable Karma.
void IncentiveMechanism5()
{
	Worker w = IncentiveMechanism.OwnerScheme.ActiveWorker;
	
	int experience = 2;
	if (w.Karma &lt; 0.25 || w.Karma &gt;= 0.85)
		return;
	else 
	{
		int previousActions = 0;
		foreach (Report rpt in IncentiveMechanism.Reporting.ReportList)
		{
			if (rpt.createdBy == w) previousActions++;
			foreach (var ri in rpt.RatingInfoList)
			{
				if (ri.RatedBy == w) previousActions++;
			}
			foreach (var ui in rpt.UpdateInfoList)
			{
				if (ui.ImprovedBy == w) previousActions++;
			}
		}
		
		if (previousActions &gt; 3) experience--;
		if (previousActions &gt; 6) experience--;
	}
	
	IncentiveMechanism.OwnerScheme.localPoints += experience * M/4;
}

//award experts with acceptable Karma.
//#local
void IncentiveMechanism6()
{
	Worker w = IncentiveMechanism.OwnerScheme.ActiveWorker;
	
	int experience = 0;
	if (w.Karma &gt;= 0.85)
		experience = 2; //expert anyway
	else if (w.Karma &lt; 0.25)
		return;
	else 
	{
		int previousActions = 0;
		foreach (Report rpt in IncentiveMechanism.Reporting.ReportList)
		{
			if (rpt.createdBy == w) previousActions++;
			foreach (var ri in rpt.RatingInfoList)
			{
				if (ri.RatedBy == w) previousActions++;
			}
			foreach (var ui in rpt.UpdateInfoList)
			{
					if (ui.ImprovedBy == w) previousActions++;
			}
		}
		
		if (previousActions &gt; 5) experience++;
		if (previousActions &gt; 15) experience++;
	}
	
	IncentiveMechanism.OwnerScheme.localPoints += experience * M/4;
}

//prevent the user from rating if he has low Karma
void IncentiveMechanism7()
{
	Worker w = IncentiveMechanism.OwnerScheme.ActiveWorker;
	if (w.Karma &lt; 0.4) 
		w.profile = 1; // == ProfileType.PreventedToRate
	else
		w.profile = 0; // default. Will be allowed to rate
}

//ban Workers with low quality submissions
//Unfortunately, our model does not allow us to vote on the improvement delta's, therefore
//currently we cannot prevent malicious improvement/rating behavior, but as a proof of concept
//this mechanism shows how it could be done.
int maxNumberOfLowQualityReports = 10; //@SIMPARAM
void IncentiveMechanism8()
{
	double sum = 0.0;
	int count = 0;
	double avg = 0.5;
	int lowQualityReports = 0;
	Worker w = IncentiveMechanism.OwnerScheme.ActiveWorker;
	switch (IncentiveMechanism.OwnerScheme.actionPerformed)
	{
		case 1: //submit
			//average report 
			foreach (Report rpt in IncentiveMechanism.Reporting.ReportList)
			{
				if (rpt.RatingInfoList.Count &gt;= 3)
				{
					sum += rpt.importance;
					count++;
				}
			}
			if (count &gt;= 10) avg = sum / count;
			
			//ban the workers that contributed  a certain number of bad reports
			foreach (Report rpt in IncentiveMechanism.Reporting.ReportList)
			{
				if (rpt.createdBy == w &amp;&amp; rpt.originalImportance &lt; 0.5 * avg) lowQualityReports++;
			}
			
			if (lowQualityReports &gt; maxNumberOfLowQualityReports) w.banned = true;
			
			break;
		default:
			break;
	}
}

//modify promised rewards based on already performed ratings/improvements
//use IncentiveMechanism0() before
int enoughPostActionsOnReport = 10; //@SIMPARAM
void IncentiveMechanism9() 
{
	Report r = IncentiveMechanism.OwnerScheme.ActiveReport;
	int numUpd = r.UpdateInfoList.Count;
	int numRat = r.RatingInfoList.Count;
	
	//Let's say that the number of reports we consider enough is enoughPostActionsOnReport
	r.improvementReward *= 1 - numUpd / enoughPostActionsOnReport;
	r.ratingReward *=  1 - numRat / enoughPostActionsOnReport;
}

//modify Karma, but only if the report is to be processed. The assumption is that only then 
//can the authority asses whether a Worker provided correct/good enough data.
void IncentiveMechanism10()
{
	if (!IncentiveMechanism.OwnerScheme.proceedToFinalize) return;
	
	Report r = IncentiveMechanism.OwnerScheme.ActiveReport;
	
	double factualSeverity = r.refSituation.severity;
	Worker submitter = r.createdBy;
	
	//reward/punish the submitter
	double sevDiff = Math.Abs(r.originalImportance - factualSeverity);
	if (sevDiff &gt; 0.33) //he gave a really bad estimate
	{
		submitter.Karma = submitter.Karma * (1 - 0.1 * sevDiff);
	}
	else
	{
		submitter.Karma = Math.Max(1, submitter.Karma * (1 + 0.15 * (1 - sevDiff)));
	}
	
	//reward improvement contributors
	foreach (Simulation.ReportingContext.ReportContext.UpdateInfo ui in r.UpdateInfoList)
	{
		if (ui.ImprovementImpact &gt; 0) {
			ui.ImprovedBy.Karma = Math.Max(1, ui.ImprovedBy.Karma * (1 + 0.1 * ui.ImprovementImpact));
		}
		else
		{
			ui.ImprovedBy.Karma = ui.ImprovedBy.Karma * (1 + 0.1 * ui.ImprovementImpact);
		}	
	}
	
	//reward raters
	foreach (Simulation.ReportingContext.ReportContext.RatingInfo ri in r.RatingInfoList)
	{
		sevDiff = Math.Abs(ri.RatingValue - factualSeverity);
		if (sevDiff &gt; 0.2) { //inaccurate rating
			ri.RatedBy.Karma = ri.RatedBy.Karma * (1 - 0.02 * sevDiff);
		}
		else
		{
			ri.RatedBy.Karma = Math.Max(1, ri.RatedBy.Karma * (1 + 0.08 * (1 - sevDiff)));
		}	
	}
	
	//reward people reporting duplicates
	foreach (Simulation.ReportingContext.DuplicatesContext.DuplicateInfo dinf in IncentiveMechanism.Reporting.DuplicatesList[0].DuplicateInfoList)
	{
		if (dinf.ReportOrig != r) continue;
		if (dinf.trueDuplicate) 
		{
			dinf.detectedBy.Karma = Math.Max(1, 1.05 * dinf.detectedBy.Karma);
		}
		else
		{
			dinf.detectedBy.Karma = 0.97 * dinf.detectedBy.Karma;
		}
	}
	
} 

//actually assign local points to the worker
void IncentiveMechanism11() 
{
	Worker w = IncentiveMechanism.OwnerScheme.ActiveWorker;
	w.points = IncentiveMechanism.OwnerScheme.localPoints;
}

//keep as last line</String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0.01;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>104</Width>
                      <Height>40</Height>
                    </Size>
                    <Location>
                      <X>15</X>
                      <Y>21</Y>
                    </Location>
                    <DisplayName>Calculate</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>incMechId</Name>
                    <Id>33812d6e-fb2c-4458-ac2f-ada096ac2663</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>a863c373-85df-457a-a8fc-4c59b67486e7</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>fe099f81-2ebe-450c-99e9-a322f24b4b41</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>72</Width>
                      <Height>21</Height>
                    </Size>
                    <Location>
                      <X>137</X>
                      <Y>23</Y>
                    </Location>
                    <DisplayName>incMechId</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                </Types>
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>757a360f-84eb-43d5-b5f8-b773b1526d15</Id>
                <Instructions>
                  <Instruction>
                    <Name>Startup</Name>
                    <String>int selectedIncentiveScheme = 0; //@SIMPARAM. 

OwnerSchemeLink = Reporting.Create("OwnerScheme") as OwnerScheme;
OwnerScheme = Reporting.IncentiveSchemeList[selectedIncentiveScheme];
</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>231</Width>
                <Height>67</Height>
              </Size>
              <Location>
                <X>1105</X>
                <Y>493</Y>
              </Location>
              <DisplayName>IncentiveMechanism</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16776961</Argb>
                </BorderColor>
                <BorderWidth>2</BorderWidth>
                <FillColor>
                  <Argb>-2561</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
                <CornerRounding>5</CornerRounding>
                <Alignment>TopCenter</Alignment>
              </ShapeProperties>
            </anyType>
            <anyType xsi:type="FocusOnObjConn">
              <Name>IncentiveSchemeSelected</Name>
              <Id>991f0aef-a9f8-49d9-8efa-85ed6f13c761</Id>
              <Structure xsi:type="FocusOnObjConnStructure">
                <Id>ec4532d9-375f-412f-96c1-f555bf98602a</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>9fbfb6c3-2883-4457-9782-4e56729f3702</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>1</Width>
                <Height>53</Height>
              </Size>
              <Location>
                <X>656</X>
                <Y>255</Y>
              </Location>
              <DisplayName>IncentiveSchemeSelected</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <BorderColor>
                  <Argb>-4177920</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>46</X>
                    <Y>219</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>52</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>31bf3024-ef83-45aa-95d3-fef21dbd1ae0</Role1Id>
              <Role2Id>9ae83c1c-e5bb-43a2-995c-0fbf450a1d2b</Role2Id>
            </anyType>
            <anyType xsi:type="ObjectRefConnection">
              <Name>OwnerScheme</Name>
              <Id>a63f700e-cd06-4e77-85e1-c5c012fb3e5c</Id>
              <Structure xsi:type="ObjectRefConnectionStructure">
                <Id>3ba18476-d716-4bdc-b953-5d42cd7d8dec</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>2660e76b-1d88-473a-bb1e-a490a1c06862</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>507</Width>
                <Height>48</Height>
              </Size>
              <Location>
                <X>713</X>
                <Y>445</Y>
              </Location>
              <DisplayName>OwnerScheme</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <BorderStyle>DashDotDot</BorderStyle>
                <BorderColor>
                  <Argb>-16776961</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>115</X>
                    <Y>0</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>109</X>
                    <Y>137</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>5f6c8242-d16f-4b59-91a3-8d1b046c42d6</Role1Id>
              <Role2Id>9ae83c1c-e5bb-43a2-995c-0fbf450a1d2b</Role2Id>
            </anyType>
            <anyType xsi:type="Variable">
              <Name>endedInIncentivize</Name>
              <Id>f452a7fa-30a3-449c-87d5-6e2db23b1836</Id>
              <Structure xsi:type="VariableStructure">
                <Id>bfd5f05f-687c-4983-a5b7-f057f5cdc966</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>600517a7-40c2-49d6-a21e-dad82b0ea326</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>121</Width>
                <Height>20</Height>
              </Size>
              <Location>
                <X>19</X>
                <Y>642</Y>
              </Location>
              <DisplayName>endedInIncentivize</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16777216</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
              </ShapeProperties>
              <ImplementationType>bool</ImplementationType>
              <InitialValue>true</InitialValue>
            </anyType>
            <anyType xsi:type="Variable">
              <Name>endedInFinalize</Name>
              <Id>987b92d8-df73-41a5-b140-dcb7a7dae237</Id>
              <Structure xsi:type="VariableStructure">
                <Id>dd821c52-4270-4e65-9489-475b3013ab8f</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>d7f09521-086b-478f-b7b6-71b416384d44</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>125</Width>
                <Height>20</Height>
              </Size>
              <Location>
                <X>16</X>
                <Y>664</Y>
              </Location>
              <DisplayName>endedInFinalize</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16777216</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
              </ShapeProperties>
              <ImplementationType>bool</ImplementationType>
              <InitialValue>true</InitialValue>
            </anyType>
            <anyType xsi:type="Variable">
              <Name>endedInCalculate</Name>
              <Id>ab1c26f9-29ee-4921-9e56-ea56d7f18e67</Id>
              <Structure xsi:type="VariableStructure">
                <Id>f40dc419-1211-42f6-9954-89b1b37fa5e5</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>b5e38e5c-98a2-46da-be4d-e5518f252b40</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>100</Width>
                <Height>20</Height>
              </Size>
              <Location>
                <X>21</X>
                <Y>690</Y>
              </Location>
              <DisplayName>endedInCalculate</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16777216</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
              </ShapeProperties>
              <ImplementationType>bool</ImplementationType>
              <InitialValue>true</InitialValue>
            </anyType>
            <anyType xsi:type="CollabObject">
              <Name>Sequencer</Name>
              <Id>8accc0d8-daa4-4354-a94b-d0b5fc921d36</Id>
              <Structure xsi:type="CollabObjectStructure">
                <Id>1c0ece36-306d-47d1-86a5-801238a9b673</Id>
                <Types>
                  <anyType xsi:type="Trigger">
                    <Name>NextActor</Name>
                    <Id>b13e6cf7-de32-4fa6-a300-a7893d17c5bf</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>51bc00ce-1df1-46ca-8ee0-9f3c0d86a722</Id>
                      <Types>
                        <anyType xsi:type="Variable">
                          <Name>allIdling</Name>
                          <Id>5b0b8158-5328-40c7-9b8a-b279e5281ee3</Id>
                          <Structure xsi:type="VariableStructure">
                            <Id>295cc217-e34b-4f1f-820f-0bcae86469ea</Id>
                            <Types />
                          </Structure>
                          <Text xsi:type="DP_Text">
                            <Id>63798f0e-810d-4790-acd3-aa24b28b14b3</Id>
                            <Instructions />
                          </Text>
                          <Size>
                            <Width>64</Width>
                            <Height>20</Height>
                          </Size>
                          <Location>
                            <X>8</X>
                            <Y>3</Y>
                          </Location>
                          <DisplayName>allIdling</DisplayName>
                          <NameFont>
                            <FontFamily>Segoe UI</FontFamily>
                            <Size>9</Size>
                            <Style>Regular</Style>
                          </NameFont>
                          <ShapeProperties>
                            <DefaultSize>
                              <Width>100</Width>
                              <Height>60</Height>
                            </DefaultSize>
                            <BorderColor>
                              <Argb>-16777216</Argb>
                            </BorderColor>
                            <FillColor>
                              <Argb>0</Argb>
                            </FillColor>
                            <GradientFill>true</GradientFill>
                            <GradientFillColor>
                              <Argb>0</Argb>
                            </GradientFillColor>
                          </ShapeProperties>
                          <ImplementationType>bool</ImplementationType>
                          <InitialValue>false</InitialValue>
                        </anyType>
                      </Types>
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>985ef70c-a82c-4bbd-aefb-f89509207002</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>int count = Sequencer.Reporting.WorkerList.Count;

int checkedW = 0;
while(!allIdling)
{
	Worker w = Sequencer.Reporting.WorkerList[Sequencer.nextIndex];
	checkedW++;
	Sequencer.currentIndex = (Sequencer.currentIndex+1)%count;
	Sequencer.nextIndex = (Sequencer.nextIndex+1)%count;
	if (!w.isIdling) 
	{
		break; // a worker ready to do something, trigger him
	}
	else //check if we have iterated through all workers = all idling
	{
		if (checkedW &gt;= count)
			allIdling = true;
	}
}</String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>138</Width>
                      <Height>54</Height>
                    </Size>
                    <Location>
                      <X>9</X>
                      <Y>19</Y>
                    </Location>
                    <DisplayName>NextActor</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>nextIndex</Name>
                    <Id>ad0af611-7862-4997-88b9-48aad78b5a10</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>5ac40d8c-efc0-44b1-9d93-4e2f4d84a03f</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>d61b7628-c2f4-4530-9f55-007f4208c638</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>78</Width>
                      <Height>21</Height>
                    </Size>
                    <Location>
                      <X>26</X>
                      <Y>106</Y>
                    </Location>
                    <DisplayName>nextIndex</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>currentIndex</Name>
                    <Id>6f046e97-efd0-4618-8372-37401ffa5513</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>9fcfbbb9-aa57-4a3b-9d84-144d7a4bbc54</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>1f47353f-e7af-456c-b0b0-2dab3ec50415</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>78</Width>
                      <Height>21</Height>
                    </Size>
                    <Location>
                      <X>29</X>
                      <Y>79</Y>
                    </Location>
                    <DisplayName>currentIndex</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>-1</InitialValue>
                  </anyType>
                  <anyType xsi:type="Trigger">
                    <Name>WaitForAny</Name>
                    <Id>6726a106-fe84-42b1-93a7-674b26eb6bf0</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>50b25069-ccbb-4f7e-be28-ef411c537b5b</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>be94e629-cbdf-4376-ab81-02d2294f9911</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String />
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 1;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>110</Width>
                      <Height>40</Height>
                    </Size>
                    <Location>
                      <X>11</X>
                      <Y>139</Y>
                    </Location>
                    <DisplayName>WaitForAny</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                  <anyType xsi:type="IntraTriggerFlow">
                    <Name>NewIntraTriggerFlow</Name>
                    <Id>e519604f-2d0b-4127-8073-14da675b7050</Id>
                    <Structure xsi:type="IntraTriggerFlowStructure">
                      <Id>03bca538-327e-48fb-a754-fcdac70b1093</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>edfba527-97c9-4147-a137-1c1e9e28e161</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>return NextActor.allIdling;
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String />
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return Context;</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>2</Width>
                      <Height>66</Height>
                    </Size>
                    <Location>
                      <X>9</X>
                      <Y>73</Y>
                    </Location>
                    <DisplayName>NewIntraTriggerFlow</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <FillStyle>Dot</FillStyle>
                      <FillColor>
                        <Argb>-8388480</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>0</X>
                          <Y>54</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>0</X>
                          <Y>0</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>b13e6cf7-de32-4fa6-a300-a7893d17c5bf</Role1Id>
                    <Role2Id>6726a106-fe84-42b1-93a7-674b26eb6bf0</Role2Id>
                  </anyType>
                  <anyType xsi:type="IntraTriggerFlow">
                    <Name>NewIntraTriggerFlow1</Name>
                    <Id>b62c98f1-f32f-4359-a928-c914860d45d1</Id>
                    <Structure xsi:type="IntraTriggerFlowStructure">
                      <Id>7e26efd8-eba7-4fc1-a2bd-e2da153e335f</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>a6f3a2f2-82e7-4971-a6e2-a312424380b0</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Trigger</Name>
                          <String>return true;
</String>
                        </Instruction>
                        <Instruction>
                          <Name>Transfer</Name>
                          <String />
                        </Instruction>
                        <Instruction>
                          <Name>Resolve</Name>
                          <String>return Context;</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>14</Width>
                      <Height>66</Height>
                    </Size>
                    <Location>
                      <X>107</X>
                      <Y>73</Y>
                    </Location>
                    <DisplayName>NewIntraTriggerFlow1</DisplayName>
                    <ShowName>false</ShowName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <LineProperties>
                      <LineWidth>2</LineWidth>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <FillStyle>Dot</FillStyle>
                      <FillColor>
                        <Argb>-8388480</Argb>
                      </FillColor>
                      <Role1>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Offset>
                          <X>110</X>
                          <Y>0</Y>
                        </Offset>
                      </Role1>
                      <Role2>
                        <Font>
                          <FontFamily>Segoe UI</FontFamily>
                          <Size>9</Size>
                          <Style>Regular</Style>
                        </Font>
                        <Icon>..\..\Icons\triangle.gif</Icon>
                        <Offset>
                          <X>98</X>
                          <Y>54</Y>
                        </Offset>
                      </Role2>
                    </LineProperties>
                    <Role1Id>6726a106-fe84-42b1-93a7-674b26eb6bf0</Role1Id>
                    <Role2Id>b13e6cf7-de32-4fa6-a300-a7893d17c5bf</Role2Id>
                  </anyType>
                </Types>
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>e69c9764-e9ef-485b-abee-f8950866de08</Id>
                <Instructions>
                  <Instruction>
                    <Name>Startup</Name>
                    <String />
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>165</Width>
                <Height>196</Height>
              </Size>
              <Location>
                <X>310</X>
                <Y>615</Y>
              </Location>
              <DisplayName>Sequencer</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16776961</Argb>
                </BorderColor>
                <BorderWidth>2</BorderWidth>
                <FillColor>
                  <Argb>-2561</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
                <CornerRounding>5</CornerRounding>
                <Alignment>TopCenter</Alignment>
              </ShapeProperties>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow10</Name>
              <Id>fa0d149d-6ff1-4ba1-85ea-04dc9c7299fe</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>9f555e0c-ba5a-4fcf-ab0b-c191cb43caed</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>f810e996-9ae8-440d-95a0-f7ca369a2eea</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>return !NextActor.allIdling;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String />
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return NextActor.Sequencer.Reporting.WorkerList[NextActor.Sequencer.currentIndex].ActionSelectorList[0];</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>119</Width>
                <Height>181</Height>
              </Size>
              <Location>
                <X>200</X>
                <Y>453</Y>
              </Location>
              <DisplayName>NewTriggerFlow10</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>0</X>
                    <Y>0</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>116</X>
                    <Y>60</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>b13e6cf7-de32-4fa6-a300-a7893d17c5bf</Role1Id>
              <Role2Id>d7a16cac-2655-4fe5-9baf-78cb3f7f6b67</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow11</Name>
              <Id>00d5996f-9db1-4679-9a00-21145fb5c24d</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>f94a0fda-383d-4851-a391-ab8f38b7722e</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>69bf2053-2d8e-429e-801f-a762257be4c8</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>return (SetNextStep.ActionSelector.nextActionType==0);
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String />
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return SetNextStep.ActionSelector.Worker.Reporting.SequencerList[0];</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>193</Width>
                <Height>175</Height>
              </Size>
              <Location>
                <X>126</X>
                <Y>494</Y>
              </Location>
              <DisplayName>NewTriggerFlow11</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>42</X>
                    <Y>101</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>0</X>
                    <Y>35</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>d7a16cac-2655-4fe5-9baf-78cb3f7f6b67</Role1Id>
              <Role2Id>b13e6cf7-de32-4fa6-a300-a7893d17c5bf</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow12</Name>
              <Id>c7c87be4-0c08-4177-b8ca-c78d9cfc4ddc</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>98af2ec0-05bc-49cc-829a-06036d7f468e</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>28ae6025-f598-48fa-9942-fad606bd0d03</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>Reporting r = Incentivize.ReportProcessing.Authority.Reporting;
return r.endedInIncentivize &amp;&amp;
	r.endedInFinalize &amp;&amp;
	r.endedInCalculate;


</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String />
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return Incentivize.ReportProcessing.Authority.Reporting.SequencerList[0];</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>176</Width>
                <Height>427</Height>
              </Size>
              <Location>
                <X>457</X>
                <Y>207</Y>
              </Location>
              <DisplayName>NewTriggerFlow12</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>0</X>
                    <Y>28</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>138</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>669a3aea-622e-4c71-8695-d9b2a6886b28</Role1Id>
              <Role2Id>b13e6cf7-de32-4fa6-a300-a7893d17c5bf</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow13</Name>
              <Id>fecc9ce4-1581-458c-b0cb-caa3bc557a36</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>692c509a-9583-4f88-95ef-5193b0550cd5</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>3f9d3a0a-7574-4a37-9654-12ebc12dd26b</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>Reporting r = RepFinalize.ReportProcessing.Authority.Reporting;
return r.endedInIncentivize &amp;&amp;
	r.endedInFinalize &amp;&amp;
	r.endedInCalculate;


</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String />
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return RepFinalize.ReportProcessing.Authority.Reporting.SequencerList[0];</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>455</Width>
                <Height>475</Height>
              </Size>
              <Location>
                <X>457</X>
                <Y>183</Y>
              </Location>
              <DisplayName>NewTriggerFlow13</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>63</X>
                    <Y>60</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>138</X>
                    <Y>24</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>709fbf2a-4449-44bd-a89d-630b0e7d4490</Role1Id>
              <Role2Id>b13e6cf7-de32-4fa6-a300-a7893d17c5bf</Role2Id>
            </anyType>
            <anyType xsi:type="IntraTriggerFlow">
              <Name>NewIntraTriggerFlow1</Name>
              <Id>3908f6c6-bb30-49a3-97fa-af18a6b9f20f</Id>
              <Structure xsi:type="IntraTriggerFlowStructure">
                <Id>ceda146f-5eb5-487e-a7de-d561d0b312ec</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>eaed7526-b76c-4d6a-9b92-f81ea9c4a99d</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>//Reporting r = Added.Duplicates.Reporting;
//return r.endedInIncentivize &amp;&amp;
//	r.endedInFinalize &amp;&amp;
//	r.endedInCalculate &amp;&amp; 
//	Added.finishedWithThisReport;
return Added.finishedWithThisReport;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String />
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return Added.Duplicates.Reporting.SequencerList[0];</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>53</Width>
                <Height>209</Height>
              </Size>
              <Location>
                <X>406</X>
                <Y>425</Y>
              </Location>
              <DisplayName>NewIntraTriggerFlow1</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>147</X>
                    <Y>50</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>87</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>1cac497d-976c-4014-b941-da1889f4959e</Role1Id>
              <Role2Id>b13e6cf7-de32-4fa6-a300-a7893d17c5bf</Role2Id>
            </anyType>
            <anyType xsi:type="CollabObject">
              <Name>IncentiveScheme</Name>
              <Id>9ae83c1c-e5bb-43a2-995c-0fbf450a1d2b</Id>
              <Structure xsi:type="CollabObjectStructure">
                <Id>9da2b736-9216-4a69-abbc-46a424044f05</Id>
                <Types>
                  <anyType xsi:type="ObjectData">
                    <Name>schemeId</Name>
                    <Id>303e06e8-becf-46cf-8239-cbde30cf5d27</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>8b03ba45-2f32-4306-8219-52788ba16be1</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>2e6ed541-a7b4-43a9-b16c-3fea2e27ee1a</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>66</Width>
                      <Height>20</Height>
                    </Size>
                    <Location>
                      <X>7</X>
                      <Y>17</Y>
                    </Location>
                    <DisplayName>schemeId</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>actionPerformed</Name>
                    <Id>6a32e264-8cd7-4eed-b268-6bb0a196b0d7</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>77649bd1-47cb-402a-9c3f-472d682959f6</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>a9d3cab7-8b20-4bd7-97cb-e053ae2d4079</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>100</Width>
                      <Height>19</Height>
                    </Size>
                    <Location>
                      <X>9</X>
                      <Y>95</Y>
                    </Location>
                    <DisplayName>actionPerformed</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>int</ImplementationType>
                    <InitialValue>0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>ActiveReport</Name>
                    <Id>ffde9bbb-d70b-421e-99c9-0b84eb8f0b8f</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>c539afed-52b3-46e9-ae7c-1c16bc6e8dfb</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>0d41cbd5-f214-4e34-ad66-cd1a38898236</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>80</Width>
                      <Height>18</Height>
                    </Size>
                    <Location>
                      <X>112</X>
                      <Y>95</Y>
                    </Location>
                    <DisplayName>ActiveReport</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>Report</ImplementationType>
                    <InitialValue>null</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>mechComposition</Name>
                    <Id>c04f2798-3f21-42cb-82b7-49799f8630a4</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>9131b9ca-e536-4ecd-8e1e-382117a688f3</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>1f403bbf-0228-43b3-b7cc-cb1ae78932e1</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>109</Width>
                      <Height>19</Height>
                    </Size>
                    <Location>
                      <X>89</X>
                      <Y>18</Y>
                    </Location>
                    <DisplayName>mechComposition</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>List&lt;int&gt;</ImplementationType>
                    <InitialValue>new List&lt;int&gt;()</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>ActiveWorker</Name>
                    <Id>c936e0d2-1bfb-4531-bc3a-41c29477fae5</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>4b197395-bb76-4f63-8dec-54f1db83e9e6</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>84a22a42-e8ae-4094-af49-778eebdd949f</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>81</Width>
                      <Height>24</Height>
                    </Size>
                    <Location>
                      <X>9</X>
                      <Y>117</Y>
                    </Location>
                    <DisplayName>ActiveWorker</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>Worker</ImplementationType>
                    <InitialValue>null</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>ActiveDuplicateInfo</Name>
                    <Id>dfaea5c9-8d35-4277-9345-2e7e6cc067e6</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>01387b16-f87c-4074-8f07-8b891e49ac4b</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>8030b335-d009-49c0-9fa0-1cbf4d4eb503</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>128</Width>
                      <Height>22</Height>
                    </Size>
                    <Location>
                      <X>88</X>
                      <Y>157</Y>
                    </Location>
                    <DisplayName>ActiveDuplicateInfo</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>Simulation.ReportingContext.DuplicatesContext.DuplicateInfo</ImplementationType>
                    <InitialValue>null</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>localKarma</Name>
                    <Id>2d6cb08c-9398-4ddf-bd5d-518899216090</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>5b5fb9cd-f31f-484d-882f-2ec2dbad835c</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>4e64377e-84fe-49b7-b052-7131737f59b6</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>100</Width>
                      <Height>20</Height>
                    </Size>
                    <Location>
                      <X>11</X>
                      <Y>187</Y>
                    </Location>
                    <DisplayName>localKarma</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>1; //because we will be multiplying this initial value</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>localPoints</Name>
                    <Id>51107ca9-c1f5-4afc-9dfc-d033daa46e77</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>ee92e665-0a12-4369-832a-d251c011da51</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>77062d4a-a5a5-48d0-96b3-ca409807b37a</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>74</Width>
                      <Height>23</Height>
                    </Size>
                    <Location>
                      <X>11</X>
                      <Y>212</Y>
                    </Location>
                    <DisplayName>localPoints</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>double</ImplementationType>
                    <InitialValue>0.0</InitialValue>
                  </anyType>
                  <anyType xsi:type="ObjectData">
                    <Name>proceedToFinalize</Name>
                    <Id>3b85ad86-edb3-49f6-826a-d91b28779f14</Id>
                    <Structure xsi:type="ObjectDataStructure">
                      <Id>73481522-2e68-438d-b574-af7ceb7bd7c8</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>0d9b0f40-3e6e-487d-8091-0669a901f40f</Id>
                      <Instructions />
                    </Text>
                    <Size>
                      <Width>136</Width>
                      <Height>18</Height>
                    </Size>
                    <Location>
                      <X>134</X>
                      <Y>204</Y>
                    </Location>
                    <DisplayName>proceedToFinalize</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderColor>
                        <Argb>-16777216</Argb>
                      </BorderColor>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                    </ShapeProperties>
                    <ImplementationType>bool</ImplementationType>
                    <InitialValue>false</InitialValue>
                  </anyType>
                  <anyType xsi:type="Trigger">
                    <Name>ComposeMechanisms</Name>
                    <Id>d1e51fe0-c8d6-42b6-958e-e73c4e502e3d</Id>
                    <Structure xsi:type="TriggerStructure">
                      <Id>c3823816-7351-444e-9271-cdfd5da61a6e</Id>
                      <Types />
                    </Structure>
                    <Text xsi:type="DP_Text">
                      <Id>4e30486c-6c18-4349-9bf7-373598e41237</Id>
                      <Instructions>
                        <Instruction>
                          <Name>Run</Name>
                          <String>System.Diagnostics.Debug.Assert(IncentiveScheme.ActiveWorker != null, "ActiveWorker NULL", "ActiveWorker NULL");

IncentiveScheme.localPoints = 0;
IncentiveScheme.localKarma = 1;



//for (int i = 0; i &lt; IncentiveScheme.mechComposition.Count; i++)
//{	
	//set this scheme as the context for execution of the mechanism
//	IncentiveScheme.Reporting.IncentiveMechanismList[IncentiveScheme.mechComposition[i]].OwnerScheme = IncentiveScheme; 
//	IncentiveScheme.Reporting.IncentiveMechanismList[IncentiveScheme.mechComposition[i]].Calculate(true); //call blocking
//}


for (int i = 0; i &lt; IncentiveScheme.mechComposition.Count; i++)
{
//ugly, but for the purposes of this simulation it should do the work.
//Incentive Mechanism composition is performed in Reporting.Startup()
switch (IncentiveScheme.mechComposition[i])
{
	default:
	case 0:
		IncentiveMechanism0(); 
		break;
	case 1:
		IncentiveMechanism1();
		break;
	case 2:
		IncentiveMechanism2();
		break;
	case 3:
		IncentiveMechanism3(); 
		break;
	case 4:
		IncentiveMechanism4();
		break;
	case 5:
		IncentiveMechanism5();
		break;
	case 6:
		IncentiveMechanism6(); 
		break;
	case 7:
		IncentiveMechanism7();
		break;
	case 8:
		IncentiveMechanism8();
		break;
	case 9:
		IncentiveMechanism9();
		break;
	case 10:
		IncentiveMechanism10();
		break;
	case 11:
		IncentiveMechanism11();
		break;
	case 12:
		IncentiveMechanism12();
		break;
}
}

IncentiveScheme.Reporting.endedInCalculate = true;

}//closing Run() method

int M = 100; //multiplier to map [0,1] -&gt; [0,100] for points

//Set the base values for improvementReward and ratingReward. This mechanism should be applied in composition
//AFTER the Worker has been rewarded, because for rewarding the user we need to take into account promised rewards before
//this method calculates the new ones, this time based on the accuracy and the importance which already takes into account also
//that user's contribution.
//Also, after this mechanism, you can apply IncentiveMechanism9(), to lower, and even annul the rewards if we gathered enough votes/improvements
void IncentiveMechanism0() 
{
	//set ratingReward and improvement reward in the ActiveReport
	//assign the Worker karma and points, based on the action performed, state of the ActiveReport, and his current karma.
	Report r =  IncentiveScheme.ActiveReport;
	
	//favor low-ranked and high-ranked, because it may be the case that they are wrongly rated on purpose
	double rew = Math.Max(1 + M * r.importance, 1 + M * (1 - r.importance));
	r.ratingReward = r.RatingInfoList.Count &lt; 5 ? rew : rew/(r.RatingInfoList.Count-(5-1));
  	
	//Let's say that in principle we value higher for 20% improvement than rating. However, we will later make reputable users prefer rating.
	double impr = r.UpdateInfoList.Count &lt; 3 ? M/2 : M*(1-r.accuracy);
	r.improvementReward = 1 + impr; //the more accurate the less improvement needed, the lower the reward
		
}

//calculate fixed amounts of points to the users
//#local
void IncentiveMechanism1()
{
	switch ( IncentiveScheme.actionPerformed)
	{
		case 1: //submit
			 IncentiveScheme.localPoints += M / 4;
			break;
		case 2: //improve accuracy
			 IncentiveScheme.localPoints += M / 3;
			break;
		case 3: //rate
			 IncentiveScheme.localPoints += M / 5;
			break;
		case 4: //submitted a dupl. report
			//IM_DuplicationKarmaReward();
			IM_DuplicationPointReward();
			break;
		default:
			break;
	}
	
}

//calculate fixed amount points for submission and duplicate reports
//but depending on promised rewards for the other 2 actions
//#local
void IncentiveMechanism2()
{
	Report r =  IncentiveScheme.ActiveReport;
	switch ( IncentiveScheme.actionPerformed)
	{
		case 1: //submit
			 IncentiveScheme.localPoints += M / 4;
			break;
		case 2: //improve accuracy
			 IncentiveScheme.localPoints += r.improvementReward;
			break;
		case 3: //rate
			 IncentiveScheme.localPoints += r.ratingReward;
			break;
		case 4: //submitted a dupl. report			
			IM_DuplicationKarmaReward();
			IM_DuplicationPointReward();
			break;
		default:
			break;
	}
}

//limit number of actions.
// int maxNumberOfActions = 10; //@SIMPARAM
void IncentiveMechanism3()
{
	Worker w =  IncentiveScheme.ActiveWorker;
	int previousActions = 0;
	switch ( IncentiveScheme.actionPerformed)
	{
		case 1: //submit
			foreach (Report rpt in IncentiveScheme.Reporting.ReportList)
			{
				if (rpt.createdBy == w) previousActions++;
			}
			if (previousActions &gt;= IncentiveScheme.maxNumberOfActions) w.banned = true;
			break;
		case 2: //improve accuracy
			foreach (Report rpt in IncentiveScheme.Reporting.ReportList)
			{
				foreach (var ui in rpt.UpdateInfoList)
				{
					if (ui.ImprovedBy == w) previousActions++;
				}
			}
			if (previousActions &gt;= IncentiveScheme.maxNumberOfActions) w.banned = true;
			break;
		case 3: //rate
			foreach (Report rpt in IncentiveScheme.Reporting.ReportList)
			{
				foreach (var ri in rpt.RatingInfoList)
				{
					if (ri.RatedBy == w) previousActions++;
				}
			}
			if (previousActions &gt;= IncentiveScheme.maxNumberOfActions) w.banned = true;
			break;
		case 4: //submitted a dupl. report
			foreach (var di in IncentiveScheme.Reporting.DuplicatesList[0].DuplicateInfoList)
			{
					if (di.detectedBy == w) previousActions++;
			}
			if (previousActions &gt;= IncentiveScheme.maxNumberOfActions) w.banned = true;
			break;
			
		default:
			break;
	}
}

//modify local points by linearly multiplying with Karma
//#local
void IncentiveMechanism4()
{
	Worker w =  IncentiveScheme.ActiveWorker;
	 IncentiveScheme.localPoints *= w.Karma;
}

//award novices with acceptable Karma.
void IncentiveMechanism5()
{
	Worker w =  IncentiveScheme.ActiveWorker;
	
	int experience = 2;
	if (w.Karma &lt; 0.25 || w.Karma &gt;= 0.85)
		return;
	else 
	{
		int previousActions = 0;
		foreach (Report rpt in IncentiveScheme.Reporting.ReportList)
		{
			if (rpt.createdBy == w) previousActions++;
			foreach (var ri in rpt.RatingInfoList)
			{
				if (ri.RatedBy == w) previousActions++;
			}
			foreach (var ui in rpt.UpdateInfoList)
			{
				if (ui.ImprovedBy == w) previousActions++;
			}
		}
		
		if (previousActions &gt; 3) experience--;
		if (previousActions &gt; 6) experience--;
	}
	
	 IncentiveScheme.localPoints += experience * M/4;
}

//award experts with acceptable Karma.
//#local
void IncentiveMechanism6()
{
	Worker w =  IncentiveScheme.ActiveWorker;
	
	int experience = 0;
	if (w.Karma &gt;= 0.85)
		experience = 2; //expert anyway
	else if (w.Karma &lt; 0.25)
		return;
	else 
	{
		int previousActions = 0;
		foreach (Report rpt in IncentiveScheme.Reporting.ReportList)
		{
			if (rpt.createdBy == w) previousActions++;
			foreach (var ri in rpt.RatingInfoList)
			{
				if (ri.RatedBy == w) previousActions++;
			}
			foreach (var ui in rpt.UpdateInfoList)
			{
					if (ui.ImprovedBy == w) previousActions++;
			}
		}
		
		if (previousActions &gt; 5) experience++;
		if (previousActions &gt; 15) experience++;
	}
	
	 IncentiveScheme.localPoints += experience * M/4;
}

//prevent the user from rating if he has low Karma
void IncentiveMechanism7()
{
	Worker w =  IncentiveScheme.ActiveWorker;
	if (w.Karma &lt; 0.4) 
		w.profile = 1; // == ProfileType.PreventedToRate
	else
		w.profile = 0; // default. Will be allowed to rate
}

//ban Workers with low quality submissions
//Unfortunately, our model does not allow us to vote on the improvement delta's, therefore
//currently we cannot prevent malicious improvement/rating behavior, but as a proof of concept
//this mechanism shows how it could be done.
//int maxNumberOfLowQualityReports = 10; //@SIMPARAM
void IncentiveMechanism8()
{
	double sum = 0.0;
	int count = 0;
	double avg = 0.5;
	int lowQualityReports = 0;
	Worker w =  IncentiveScheme.ActiveWorker;
	switch ( IncentiveScheme.actionPerformed)
	{
		case 1: //submit
			//average report 
			foreach (Report rpt in IncentiveScheme.Reporting.ReportList)
			{
				if (rpt.RatingInfoList.Count &gt;= 3)
				{
					sum += rpt.importance;
					count++;
				}
			}
			if (count &gt;= 10) avg = sum / count;
			
			//ban the workers that contributed  a certain number of bad reports
			foreach (Report rpt in IncentiveScheme.Reporting.ReportList)
			{
				if (rpt.createdBy == w &amp;&amp; rpt.originalImportance &lt; 0.5 * avg) lowQualityReports++;
			}
			
			if (lowQualityReports &gt; IncentiveScheme.maxNumberOfLowQualityReports) w.banned = true;
			
			break;
		default:
			break;
	}
}

//modify promised rewards based on already performed ratings/improvements
//use IncentiveMechanism0() before
//int enoughPostActionsOnReport = 10; //@SIMPARAM
void IncentiveMechanism9() 
{
	Report r =  IncentiveScheme.ActiveReport;
	int numUpd = r.UpdateInfoList.Count;
	int numRat = r.RatingInfoList.Count;
	
	//Let's say that the number of reports we consider enough is enoughPostActionsOnReport
	r.improvementReward *= 1 - numUpd / IncentiveScheme.enoughPostActionsOnReport;
	r.ratingReward *=  1 - numRat / IncentiveScheme.enoughPostActionsOnReport;
}

//modify Karma, but only if the report is to be processed. The assumption is that only then 
//can the authority asses whether a Worker provided correct/good enough data.
void IncentiveMechanism10()
{
	if (! IncentiveScheme.proceedToFinalize) return;
	
	Report r =  IncentiveScheme.ActiveReport;
	
	double factualSeverity = r.refSituation.severity;
	Worker submitter = r.createdBy;
	
	//reward/punish the submitter
	double sevDiff = Math.Abs(r.originalImportance - factualSeverity);
	if (sevDiff &gt; 0.2) //he gave a really bad estimate
	{
		submitter.Karma = submitter.Karma * (1 - 0.08 * sevDiff);
	}
	else
	{
		submitter.Karma = Math.Min(1, submitter.Karma * (1 + 0.1 * (1 - sevDiff)));
	}
	
	//reward improvement contributors
	foreach (Simulation.ReportingContext.ReportContext.UpdateInfo ui in r.UpdateInfoList)
	{		
		ui.ImprovedBy.Karma = Math.Min(1, ui.ImprovedBy.Karma * (1 + 0.1 * ui.ImprovementImpact)); //NOTE IMPROVEMENT IMPACT IS CURRENTLY BETWEEN -0.3 and 0.3, max set to 0.2 by default		
	}
	
	//reward raters
	foreach (Simulation.ReportingContext.ReportContext.RatingInfo ri in r.RatingInfoList)
	{
		sevDiff = Math.Abs(ri.RatingValue - factualSeverity);
		if (sevDiff &gt; 0.2) { //inaccurate rating
			ri.RatedBy.Karma = ri.RatedBy.Karma * (1 - 0.1 * sevDiff);
		}
		else
		{
			ri.RatedBy.Karma = Math.Min(1, ri.RatedBy.Karma * (1 + 0.1 * (1 - sevDiff)));
		}	
	}	
} 

//actually assign local points to the worker
void IncentiveMechanism11() 
{
	Worker w =  IncentiveScheme.ActiveWorker;
	w.points +=  IncentiveScheme.localPoints;
}

void IncentiveMechanism12() 
{
	//set ratingReward and improvement reward in the ActiveReport
	//assign the Worker karma and points, based on the action performed, state of the ActiveReport, and his current karma.
	Report r =  IncentiveScheme.ActiveReport;	
	r.ratingReward = M/8; 	
	r.improvementReward = M/8;
		
}

//assigns points to the workers who have given provided duplicate reports
void IM_DuplicationPointReward() 
{
	List&lt;Worker&gt; list = new List&lt;Worker&gt;();
	foreach (Simulation.ReportingContext.DuplicatesContext.DuplicateInfo dif in IncentiveScheme.Reporting.DuplicatesList[0].DuplicateInfoList)
	{
		if ((dif.ReportOrig.refSituation == IncentiveScheme.ActiveReport.refSituation || 
			dif.ReportDupl.refSituation == IncentiveScheme.ActiveReport.refSituation)
			&amp;&amp; dif.trueDuplicate)
		{
			dif.detectedBy.points +=  M / 6;
		}
	}
}

//assigns karma to the workers who have given provided duplicate reports
void IM_DuplicationKarmaReward() 
{
	//reward people reporting duplicates
	foreach (Simulation.ReportingContext.DuplicatesContext.DuplicateInfo dif in IncentiveScheme.Reporting.DuplicatesList[0].DuplicateInfoList)
	{
		if ((dif.ReportOrig.refSituation == IncentiveScheme.ActiveReport.refSituation || 
			dif.ReportDupl.refSituation == IncentiveScheme.ActiveReport.refSituation) &amp;&amp; 
			!dif.isProcessed )
		{
			dif.isProcessed = true; 
			if (dif.trueDuplicate)
			{
				dif.detectedBy.Karma = Math.Min(1, 1.1 * dif.detectedBy.Karma);
			}
			else
			{	
				double d = distance(dif.ReportOrig.refSituation.location, dif.ReportDupl.refSituation.location);
				if (d &gt; 0.05) 
					dif.detectedBy.Karma = 0.95 * dif.detectedBy.Karma;

			}
		}		
	}	
}

public double distance(double A, double B, bool worldContinuous = false) 
{
	if (!worldContinuous) 
		return Math.Abs(B - A);
	else
		return 1 - Math.Abs(B - A);
}
//keep as last line</String>
                        </Instruction>
                        <Instruction>
                          <Name>Duration</Name>
                          <String>return 0.01;
</String>
                        </Instruction>
                      </Instructions>
                    </Text>
                    <Size>
                      <Width>191</Width>
                      <Height>54</Height>
                    </Size>
                    <Location>
                      <X>12</X>
                      <Y>42</Y>
                    </Location>
                    <DisplayName>ComposeMechanisms</DisplayName>
                    <NameFont>
                      <FontFamily>Segoe UI</FontFamily>
                      <Size>9</Size>
                      <Style>Regular</Style>
                    </NameFont>
                    <ShapeProperties>
                      <DefaultSize>
                        <Width>100</Width>
                        <Height>60</Height>
                      </DefaultSize>
                      <BorderStyle>Dot</BorderStyle>
                      <BorderColor>
                        <Argb>-8388480</Argb>
                      </BorderColor>
                      <BorderWidth>2</BorderWidth>
                      <FillColor>
                        <Argb>0</Argb>
                      </FillColor>
                      <GradientFill>true</GradientFill>
                      <GradientFillColor>
                        <Argb>0</Argb>
                      </GradientFillColor>
                      <Alignment>MiddleCenter</Alignment>
                    </ShapeProperties>
                  </anyType>
                </Types>
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>fcb5c2fc-9eef-4fe2-ae3f-36547d53f496</Id>
                <Instructions>
                  <Instruction>
                    <Name>Startup</Name>
                    <String />
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>205</Width>
                <Height>137</Height>
              </Size>
              <Location>
                <X>604</X>
                <Y>308</Y>
              </Location>
              <DisplayName>IncentiveScheme</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16776961</Argb>
                </BorderColor>
                <BorderWidth>2</BorderWidth>
                <FillColor>
                  <Argb>-2561</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
                <CornerRounding>5</CornerRounding>
                <Alignment>TopCenter</Alignment>
              </ShapeProperties>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow4</Name>
              <Id>228f5534-f28e-4496-8bdd-d00d68d42d74</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>529c43ff-10c0-49e7-8f08-e20f83fdca38</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>8eb178c1-ab04-4eae-853c-251c626af7fb</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>//won't trigger if we came from ProcessDuplicateAlerts
return (Incentivize.actionPerformed != 4);
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String>Incentivize.ReportProcessing.IncentiveSchemeSelected.ActiveReport = Incentivize.ActiveReport;
Incentivize.ReportProcessing.IncentiveSchemeSelected.ActiveWorker = Incentivize.activeWorker;
Incentivize.ReportProcessing.IncentiveSchemeSelected.actionPerformed = Incentivize.actionPerformed;
Incentivize.ReportProcessing.IncentiveSchemeSelected.proceedToFinalize = Incentivize.proceedToFinalize;</String>
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return Incentivize.ReportProcessing.IncentiveSchemeSelected;</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>30</Width>
                <Height>115</Height>
              </Size>
              <Location>
                <X>740</X>
                <Y>235</Y>
              </Location>
              <DisplayName>NewTriggerFlow4</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>107</X>
                    <Y>56</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>154</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>669a3aea-622e-4c71-8695-d9b2a6886b28</Role1Id>
              <Role2Id>d1e51fe0-c8d6-42b6-958e-e73c4e502e3d</Role2Id>
            </anyType>
            <anyType xsi:type="TriggerFlow">
              <Name>NewTriggerFlow9</Name>
              <Id>7a336767-1e8e-40aa-877e-eb4eb97f29c7</Id>
              <Structure xsi:type="TriggerFlowStructure">
                <Id>3a5c76b9-2228-4144-bdfd-cfe463bd51b5</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>85b58e26-0ead-44c7-80ef-214787a28628</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>return true;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String>ProcessDuplicateAlerts.ReportProcessing.IncentiveSchemeSelected.actionPerformed = 4; //a report on a duplicate was submitted
ProcessDuplicateAlerts.ReportProcessing.IncentiveSchemeSelected.ActiveReport = ProcessDuplicateAlerts.activeReport;
ProcessDuplicateAlerts.ReportProcessing.IncentiveSchemeSelected.ActiveWorker = ProcessDuplicateAlerts.activeWorker;
ProcessDuplicateAlerts.ReportProcessing.IncentiveSchemeSelected.ActiveDuplicateInfo = ProcessDuplicateAlerts.activeDupInf;
ProcessDuplicateAlerts.ReportProcessing.IncentiveSchemeSelected.proceedToFinalize = true;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return ProcessDuplicateAlerts.ReportProcessing.IncentiveSchemeSelected;
</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>50</Width>
                <Height>217</Height>
              </Size>
              <Location>
                <X>658</X>
                <Y>133</Y>
              </Location>
              <DisplayName>NewTriggerFlow9</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <BorderWidth>0</BorderWidth>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>30</X>
                    <Y>79</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>92</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>8d4aa3c1-f666-465d-9060-7a58c2802ee2</Role1Id>
              <Role2Id>d1e51fe0-c8d6-42b6-958e-e73c4e502e3d</Role2Id>
            </anyType>
            <anyType xsi:type="IntraTriggerFlow">
              <Name>NewIntraTriggerFlow</Name>
              <Id>8441b703-a00f-464c-a38e-fb5969687938</Id>
              <Structure xsi:type="IntraTriggerFlowStructure">
                <Id>3c798167-0908-4b19-887f-4717de95634f</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>3187ca81-165a-4fc9-86a8-d8cb19b06080</Id>
                <Instructions>
                  <Instruction>
                    <Name>Trigger</Name>
                    <String>Reporting r = ComposeMechanisms.IncentiveScheme.Reporting;
return r.endedInIncentivize &amp;&amp;
	r.endedInFinalize &amp;&amp;
	r.endedInCalculate;
</String>
                  </Instruction>
                  <Instruction>
                    <Name>Transfer</Name>
                    <String />
                  </Instruction>
                  <Instruction>
                    <Name>Resolve</Name>
                    <String>return ComposeMechanisms.IncentiveScheme.Reporting.SequencerList[0];</String>
                  </Instruction>
                </Instructions>
              </Text>
              <Size>
                <Width>199</Width>
                <Height>254</Height>
              </Size>
              <Location>
                <X>417</X>
                <Y>380</Y>
              </Location>
              <DisplayName>NewIntraTriggerFlow</DisplayName>
              <ShowName>false</ShowName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <LineProperties>
                <LineWidth>2</LineWidth>
                <BorderColor>
                  <Argb>-8388480</Argb>
                </BorderColor>
                <FillStyle>Dot</FillStyle>
                <FillColor>
                  <Argb>-8388480</Argb>
                </FillColor>
                <Role1>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Offset>
                    <X>0</X>
                    <Y>30</Y>
                  </Offset>
                </Role1>
                <Role2>
                  <Font>
                    <FontFamily>Segoe UI</FontFamily>
                    <Size>9</Size>
                    <Style>Regular</Style>
                  </Font>
                  <Icon>..\..\Icons\triangle.gif</Icon>
                  <Offset>
                    <X>98</X>
                    <Y>0</Y>
                  </Offset>
                </Role2>
              </LineProperties>
              <Role1Id>d1e51fe0-c8d6-42b6-958e-e73c4e502e3d</Role1Id>
              <Role2Id>b13e6cf7-de32-4fa6-a300-a7893d17c5bf</Role2Id>
            </anyType>
            <anyType xsi:type="Variable">
              <Name>TotalSubmit</Name>
              <Id>91231a67-260b-4bc5-ab73-7f522767f13a</Id>
              <Structure xsi:type="VariableStructure">
                <Id>15033e83-f002-4198-8deb-1cd64aa7c495</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>81f77f41-a31e-4804-b1cd-b57cc018affa</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>100</Width>
                <Height>20</Height>
              </Size>
              <Location>
                <X>145</X>
                <Y>645</Y>
              </Location>
              <DisplayName>TotalSubmit</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16777216</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
              </ShapeProperties>
              <ImplementationType>long</ImplementationType>
              <InitialValue>0</InitialValue>
            </anyType>
            <anyType xsi:type="Variable">
              <Name>TotalImprove</Name>
              <Id>c6ec299e-aa56-4ecf-95f8-63f2a276c795</Id>
              <Structure xsi:type="VariableStructure">
                <Id>f3688945-a547-4439-a71d-b52cc56471a2</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>415859c9-e2c0-460f-9298-9f5b30d0d369</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>100</Width>
                <Height>20</Height>
              </Size>
              <Location>
                <X>145</X>
                <Y>670</Y>
              </Location>
              <DisplayName>TotalImprove</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16777216</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
              </ShapeProperties>
              <ImplementationType>long</ImplementationType>
              <InitialValue>0</InitialValue>
            </anyType>
            <anyType xsi:type="Variable">
              <Name>TotalRate</Name>
              <Id>fe89cd91-15ea-42d9-840c-9d7449b89eef</Id>
              <Structure xsi:type="VariableStructure">
                <Id>080d8eb4-dc82-4fd7-b53a-db569ff4f02b</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>1fa77a8f-448d-4e73-b58d-2cb202915092</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>100</Width>
                <Height>20</Height>
              </Size>
              <Location>
                <X>139</X>
                <Y>696</Y>
              </Location>
              <DisplayName>TotalRate</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16777216</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
              </ShapeProperties>
              <ImplementationType>long</ImplementationType>
              <InitialValue>0</InitialValue>
            </anyType>
            <anyType xsi:type="Variable">
              <Name>TotalDuplicate</Name>
              <Id>ef5a8808-301f-4a64-9d53-23abc2af83de</Id>
              <Structure xsi:type="VariableStructure">
                <Id>ab08a9e2-1c09-440a-9cd5-34b9b4b4731c</Id>
                <Types />
              </Structure>
              <Text xsi:type="DP_Text">
                <Id>8d437b4a-1e18-488e-974f-55d5191230ab</Id>
                <Instructions />
              </Text>
              <Size>
                <Width>100</Width>
                <Height>20</Height>
              </Size>
              <Location>
                <X>132</X>
                <Y>723</Y>
              </Location>
              <DisplayName>TotalDuplicate</DisplayName>
              <NameFont>
                <FontFamily>Segoe UI</FontFamily>
                <Size>9</Size>
                <Style>Regular</Style>
              </NameFont>
              <ShapeProperties>
                <DefaultSize>
                  <Width>100</Width>
                  <Height>60</Height>
                </DefaultSize>
                <BorderColor>
                  <Argb>-16777216</Argb>
                </BorderColor>
                <FillColor>
                  <Argb>0</Argb>
                </FillColor>
                <GradientFill>true</GradientFill>
                <GradientFillColor>
                  <Argb>0</Argb>
                </GradientFillColor>
              </ShapeProperties>
              <ImplementationType>long</ImplementationType>
              <InitialValue>0</InitialValue>
            </anyType>
          </Types>
        </Structure>
        <Text xsi:type="DP_Text">
          <Id>5e8f096d-94c9-427a-a091-0e5edfda2ced</Id>
          <Instructions>
            <Instruction>
              <Name>Startup</Name>
              <String>//DomainProAnalyst.Instance.Report("Starting reporting simulation");

Duplicates dups = Create("Duplicates") as Duplicates;

IncentiveScheme incs;
for (int i = 0; i &lt; 1; i++) //we can create more, and add the 
{
	incs = Create("IncentiveScheme") as IncentiveScheme;
	incs.schemeId = i;
}


//IncentiveMechanism incm;
//for (int i = 0; i &lt; 12; i++) //we can create more, and add the 
//{
//	incm = Create("IncentiveMechanism") as IncentiveMechanism;
//	incm.incMechId = i;
//}

//composing incentive schemes:
//incs = IncentiveSchemeList[0];
//incs.mechComposition.Add(0); //the first one to execute
//incs.mechComposition.Add(1);
//incs.mechComposition.Add(10); 
//incs.mechComposition.Add(11); //the last one to execute;

//so, what incentive scheme No. 0 does is: execute mechanisms 0-1-11 in order, upon each triggering of the ComposeMechanisms()


</String>
            </Instruction>
          </Instructions>
        </Text>
        <Size>
          <Width>993</Width>
          <Height>848</Height>
        </Size>
        <Location>
          <X>5</X>
          <Y>8</Y>
        </Location>
        <DisplayName>Reporting</DisplayName>
        <NameFont>
          <FontFamily>Segoe UI</FontFamily>
          <Size>9</Size>
          <Style>Regular</Style>
        </NameFont>
        <ShapeProperties>
          <DefaultSize>
            <Width>100</Width>
            <Height>60</Height>
          </DefaultSize>
          <BorderColor>
            <Argb>-16777216</Argb>
          </BorderColor>
          <FillColor>
            <Argb>-327681</Argb>
          </FillColor>
          <GradientFill>true</GradientFill>
          <GradientFillColor>
            <Argb>0</Argb>
          </GradientFillColor>
        </ShapeProperties>
      </anyType>
    </Types>
  </Structure>
  <Text xsi:type="DP_Text">
    <Id>2f02d447-745f-4ca6-8836-3abb3ad98d39</Id>
    <Instructions>
      <Instruction>
        <Name>Initialize</Name>
        <String />
      </Instruction>
    </Instructions>
  </Text>
</CollabArchV6Model>